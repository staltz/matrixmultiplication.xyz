(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var dom_1=require("@cycle/dom");var index_1=require("../Calculator/index");var styles_1=require("./styles");function view(calculatorVDom){return calculatorVDom.map(function(calcVNode){return dom_1.div(".app",[dom_1.h1(".title."+styles_1.default.title,"Matrix Multiplication"),calcVNode,dom_1.h2(".footnote."+styles_1.default.footnote,[dom_1.a({attrs:{href:"https://github.com/staltz/matrixmultiplication.xyz"}},"Built by @andrestaltz with Cycle.js")])])})}function App(sources){var calculatorSinks=index_1.default(sources);var vdom$=view(calculatorSinks.DOM);var reducer$=calculatorSinks.onion;var sinks={DOM:vdom$,onion:reducer$};return sinks}Object.defineProperty(exports,"__esModule",{value:true});exports.default=App},{"../Calculator/index":3,"./styles":2,"@cycle/dom":49}],2:[function(require,module,exports){"use strict";var typestyle_1=require("typestyle");var styles_1=require("../styles");typestyle_1.cssRule("body",{margin:0,color:styles_1.pallete.black,fontFamily:'"Source Sans Pro", serif',fontWeight:400});var Styles;(function(Styles){Styles.title=typestyle_1.style({position:"absolute",top:0,left:0,right:0,fontFamily:'"Vesper Libre", serif',fontWeight:400,textAlign:"center",margin:0,paddingTop:"1.5rem",paddingBottom:"3rem",zIndex:10,backgroundImage:"linear-gradient(to bottom, "+"white 0, "+"rgba(255,255,255,0.9) 60%, "+"transparent 100%)"});Styles.footnote=typestyle_1.style({position:"fixed",left:0,right:0,bottom:0,fontFamily:'"Source Sans Pro", serif',fontSize:"14px",textAlign:"center","& > *":{color:styles_1.pallete.gray}})})(Styles||(Styles={}));Object.defineProperty(exports,"__esModule",{value:true});exports.default=Styles},{"../styles":35,typestyle:163}],3:[function(require,module,exports){"use strict";var xstream_1=require("xstream");var isolate_1=require("@cycle/isolate");var index_1=require("../Matrix/index");var measure_1=require("./measure");var timers_1=require("./timers");var index_2=require("./intent/index");var index_3=require("./model/index");var index_4=require("./view/index");function Calculator(sources){var aSinks=isolate_1.default(index_1.default,"matrixA")(sources);var bSinks=isolate_1.default(index_1.default,"matrixB")(sources);var cSinks=isolate_1.default(index_1.default,"matrixC")(sources);var state$=sources.onion.state$;var measurements$=measure_1.default(sources.DOM);var action$=xstream_1.default.merge(index_2.default(sources.DOM),timers_1.default(state$));var reducer$=index_3.default(action$,measurements$);var allReducer$=xstream_1.default.merge(reducer$,aSinks.onion,bSinks.onion);var vdom$=index_4.default(state$,aSinks.DOM,bSinks.DOM,cSinks.DOM);var sinks={DOM:vdom$,onion:allReducer$};return sinks}Object.defineProperty(exports,"__esModule",{value:true});exports.default=Calculator},{"../Matrix/index":25,"./intent/index":5,"./measure":7,"./model/index":10,"./timers":17,"./view/index":20,"@cycle/isolate":58,xstream:169}],4:[function(require,module,exports){"use strict";var xstream_1=require("xstream");function controlPanelIntent(domSource){var startMultiplyAction$=domSource.select(".multiply").events("click").mapTo({type:"START_MULTIPLY",payload:null});var nextStepAction$=domSource.select(".next").events("click").mapTo({type:"NEXT_STEP",payload:null});var endAction$=domSource.select(".end").events("click").mapTo({type:"END",payload:null});var resetAction$=domSource.select(".reset").events("click").mapTo({type:"RESET",payload:null});return xstream_1.default.merge(startMultiplyAction$,nextStepAction$,endAction$,resetAction$)}exports.controlPanelIntent=controlPanelIntent},{xstream:169}],5:[function(require,module,exports){"use strict";var xstream_1=require("xstream");var controlPanel_1=require("./controlPanel");var resize_1=require("./resize");function intent(domSource){var resizeAction$=resize_1.resizeIntent(domSource);var controlPanelAction$=controlPanel_1.controlPanelIntent(domSource);return xstream_1.default.merge(resizeAction$,controlPanelAction$)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=intent},{"./controlPanel":4,"./resize":6,xstream:169}],6:[function(require,module,exports){"use strict";var xstream_1=require("xstream");function createResizeAction(target,direction,amount){return{type:"RESIZE",payload:{target:target,resizeParam:{direction:direction,amount:amount}}}}function resizeIntent(domSource){var decreaseRowA$=domSource.select(".decreaseRowA").events("click").mapTo(createResizeAction("A","row",-1));var increaseRowA$=domSource.select(".increaseRowA").events("click").mapTo(createResizeAction("A","row",+1));var decreaseColA$=xstream_1.default.merge(domSource.select(".decreaseColA").events("click"),domSource.select(".decreaseRowB").events("click")).mapTo(createResizeAction("A","column",-1));var increaseColA$=xstream_1.default.merge(domSource.select(".increaseColA").events("click"),domSource.select(".increaseRowB").events("click")).mapTo(createResizeAction("A","column",+1));var decreaseRowB$=xstream_1.default.merge(domSource.select(".decreaseColA").events("click"),domSource.select(".decreaseRowB").events("click")).mapTo(createResizeAction("B","row",-1));var increaseRowB$=xstream_1.default.merge(domSource.select(".increaseColA").events("click"),domSource.select(".increaseRowB").events("click")).mapTo(createResizeAction("B","row",+1));var decreaseColB$=domSource.select(".decreaseColB").events("click").mapTo(createResizeAction("B","column",-1));var increaseColB$=domSource.select(".increaseColB").events("click").mapTo(createResizeAction("B","column",+1));return xstream_1.default.merge(decreaseRowA$,increaseRowA$,decreaseColA$,increaseColA$,decreaseRowB$,increaseRowB$,decreaseColB$,increaseColB$)}exports.resizeIntent=resizeIntent},{xstream:169}],7:[function(require,module,exports){"use strict";var dropRepeats_1=require("xstream/extra/dropRepeats");var delay_1=require("xstream/extra/delay");function isNotNull(x){return x!==null}function measure(domSource){return domSource.select(".calculator").elements().map(function(e){var actualElement=Array.isArray(e)?e[0]:e;if(actualElement){var matrixAElem=actualElement.querySelector(".matrixA *");var matrixBElem=actualElement.querySelector(".matrixB *");var someRow=matrixAElem.querySelector(".row");var measurements={matrixAHeight:matrixAElem.clientHeight,matrixBWidth:matrixBElem.clientWidth,matrixBHeight:matrixBElem.clientHeight,rowHeight:someRow.clientHeight};return measurements}else{return null}}).filter(isNotNull).compose(dropRepeats_1.default(function(m1,m2){return m1.matrixAHeight===m2.matrixAHeight&&m1.matrixBHeight===m2.matrixBHeight&&m1.matrixBWidth===m2.matrixBWidth})).compose(delay_1.default(16))}Object.defineProperty(exports,"__esModule",{value:true});exports.default=measure},{"xstream/extra/delay":166,"xstream/extra/dropRepeats":167}],8:[function(require,module,exports){"use strict";function isResizeAction(ac){return ac.type==="RESIZE"}exports.isResizeAction=isResizeAction;function isStartMultiplyAction(ac){return ac.type==="START_MULTIPLY"}exports.isStartMultiplyAction=isStartMultiplyAction;function isNextStepAction(ac){return ac.type==="NEXT_STEP"}exports.isNextStepAction=isNextStepAction;function isEndAction(ac){return ac.type==="END"}exports.isEndAction=isEndAction;function isResetAction(ac){return ac.type==="RESET"}exports.isResetAction=isResetAction;function isAllowContinueAction(ac){return ac.type==="ALLOW_CONTINUE"}exports.isAllowContinueAction=isAllowContinueAction},{}],9:[function(require,module,exports){"use strict";function calculateCellMatrixC(i,j,matrixA,matrixB){var m=matrixA.numberColumns;var acc=0;for(var k=0;k<m;k++){acc+=matrixA.get(i,k)*matrixB.get(k,j)}return acc}function calculateNextMatrixC(nextStep,matrixA,matrixB,matrixC){var newMatrixC=matrixC;matrixC.rows.forEach(function(row,i){row.forEach(function(cellC,j){if(i+j===nextStep-2){var val=calculateCellMatrixC(i,j,matrixA,matrixB);newMatrixC=newMatrixC.set(i,j,val)}})});return newMatrixC}exports.calculateNextMatrixC=calculateNextMatrixC},{}],10:[function(require,module,exports){"use strict";var xstream_1=require("xstream");var MatrixValues_1=require("../../utils/MatrixValues");var measure_1=require("./reducers/measure");var resize_1=require("./reducers/resize");var controlPanel_1=require("./reducers/controlPanel");var timers_1=require("./reducers/timers");var defaultState={step:0,canInteract:true,fastForwardToEnd:false,measurements:{matrixAHeight:0,matrixBWidth:0,matrixBHeight:0,rowHeight:0},matrixA:{values:MatrixValues_1.default.from([[1,2,1],[0,1,0],[2,3,4]]),editable:true,id:"A"},matrixB:{values:MatrixValues_1.default.from([[2,5],[6,7],[1,8]]),editable:true,id:"B"},matrixC:void 0};var initReducer$=xstream_1.default.of(function initReducer(prevState){if(!prevState){return defaultState}else{return prevState}});function model(action$,measurements$){return xstream_1.default.merge(initReducer$,measure_1.updateMeasurementsReducer$(measurements$),resize_1.resizeReducer$(action$),controlPanel_1.startMultiplyReducer$(action$),controlPanel_1.nextStepReducer$(action$),controlPanel_1.fastForwardToEndReducer$(action$),controlPanel_1.resetReducer$(action$),timers_1.allowContinueReducer$(action$))}Object.defineProperty(exports,"__esModule",{value:true});exports.default=model},{"../../utils/MatrixValues":36,"./reducers/controlPanel":12,"./reducers/measure":13,"./reducers/resize":14,"./reducers/timers":15,xstream:169}],11:[function(require,module,exports){"use strict";function totalCombSteps(state){return state.matrixA.values.numberRows+state.matrixB.values.numberColumns-2}exports.totalCombSteps=totalCombSteps;function lastCombStep(state){return 2+totalCombSteps(state)}exports.lastCombStep=lastCombStep;function isInCombStep(state){return(state.step===1&&state.canInteract||state.step>1)&&state.step<=lastCombStep(state)}exports.isInCombStep=isInCombStep},{}],12:[function(require,module,exports){"use strict";var MatrixValues_1=require("../../../utils/MatrixValues");var actions_1=require("../actions");var calculate_1=require("../calculate");function startMultiplyReducer$(action$){return action$.filter(actions_1.isStartMultiplyAction).map(function(action){return function startMultiplyReducer(prevState){if(prevState.step===0){return{step:1,canInteract:false,fastForwardToEnd:false,measurements:prevState.measurements,matrixA:{editable:false,values:prevState.matrixA.values,id:prevState.matrixA.id},matrixB:{editable:false,values:prevState.matrixB.values,id:prevState.matrixB.id},matrixC:{editable:false,values:MatrixValues_1.default.ofDimensions(prevState.matrixA.values.numberRows,prevState.matrixB.values.numberColumns).setAll(null),id:"C"}}}else{return prevState}}})}exports.startMultiplyReducer$=startMultiplyReducer$;function nextStepReducer$(action$){return action$.filter(actions_1.isNextStepAction).map(function(action){return function nextStepReducer(prevState){if(prevState.step>=1&&prevState.canInteract&&prevState.matrixC){var nextStep=prevState.step+1;return{step:nextStep,canInteract:false,fastForwardToEnd:prevState.fastForwardToEnd,measurements:prevState.measurements,matrixA:prevState.matrixA,matrixB:prevState.matrixB,matrixC:{editable:prevState.matrixC.editable,values:calculate_1.calculateNextMatrixC(nextStep,prevState.matrixA.values,prevState.matrixB.values,prevState.matrixC.values),id:prevState.matrixC.id}}}else{return prevState}}})}exports.nextStepReducer$=nextStepReducer$;function fastForwardToEndReducer$(action$){return action$.filter(actions_1.isEndAction).map(function(action){return function fastForwardToEndReducer(prevState){if(prevState.step>=1&&prevState.canInteract&&prevState.matrixC){var nextStep=prevState.step+1;return{step:nextStep,canInteract:false,fastForwardToEnd:true,measurements:prevState.measurements,matrixA:prevState.matrixA,matrixB:prevState.matrixB,matrixC:{editable:prevState.matrixC.editable,values:calculate_1.calculateNextMatrixC(nextStep,prevState.matrixA.values,prevState.matrixB.values,prevState.matrixC.values),id:prevState.matrixC.id}}}else{return prevState}}})}exports.fastForwardToEndReducer$=fastForwardToEndReducer$;function resetReducer$(action$){return action$.filter(actions_1.isResetAction).map(function(action){return function resetReducer(prevState){return{step:0,canInteract:true,fastForwardToEnd:false,measurements:prevState.measurements,matrixA:{values:prevState.matrixA.values,editable:true,id:prevState.matrixA.id},matrixB:{values:prevState.matrixB.values,editable:true,id:prevState.matrixB.id},matrixC:void 0}}})}exports.resetReducer$=resetReducer$},{"../../../utils/MatrixValues":36,"../actions":8,"../calculate":9}],13:[function(require,module,exports){"use strict";function updateMeasurementsReducer$(measurements$){return measurements$.map(function(measurements){return function(prevState){return{step:prevState.step,canInteract:prevState.canInteract,fastForwardToEnd:prevState.fastForwardToEnd,measurements:measurements,matrixA:prevState.matrixA,matrixB:prevState.matrixB,matrixC:prevState.matrixC}}})}exports.updateMeasurementsReducer$=updateMeasurementsReducer$},{}],14:[function(require,module,exports){"use strict";var actions_1=require("../actions");function resizeReducer$(action$){return action$.filter(actions_1.isResizeAction).map(function(action){return function resizeReducer(prevState){var targetMatrix="matrix"+action.payload.target;var nextState={step:prevState.step,canInteract:prevState.canInteract,fastForwardToEnd:prevState.fastForwardToEnd,measurements:prevState.measurements,matrixA:prevState.matrixA,matrixB:prevState.matrixB,matrixC:prevState.matrixC};var prevValues=prevState[targetMatrix].values;if(action.payload.resizeParam.direction==="row"){nextState[targetMatrix].values=prevValues.resize(prevValues.numberRows+action.payload.resizeParam.amount,prevValues.numberColumns)}else{nextState[targetMatrix].values=prevValues.resize(prevValues.numberRows,prevValues.numberColumns+action.payload.resizeParam.amount)}return nextState}})}exports.resizeReducer$=resizeReducer$},{"../actions":8}],15:[function(require,module,exports){"use strict";var actions_1=require("../actions");var queries_1=require("../queries");var calculate_1=require("../calculate");function allowContinueReducer$(action$){return action$.filter(actions_1.isAllowContinueAction).map(function(action){return function allowContinueReducer(prevState){if(prevState.fastForwardToEnd&&prevState.matrixC){var nextStep=prevState.step+1;return{step:nextStep,canInteract:false,fastForwardToEnd:nextStep<=queries_1.lastCombStep(prevState),measurements:prevState.measurements,matrixA:prevState.matrixA,matrixB:prevState.matrixB,matrixC:{editable:prevState.matrixC.editable,values:calculate_1.calculateNextMatrixC(nextStep,prevState.matrixA.values,prevState.matrixB.values,prevState.matrixC.values),id:prevState.matrixC.id}}}else{return{step:prevState.step,canInteract:true,fastForwardToEnd:false,measurements:prevState.measurements,matrixA:prevState.matrixA,matrixB:prevState.matrixB,matrixC:prevState.matrixC}}}})}exports.allowContinueReducer$=allowContinueReducer$},{"../actions":8,"../calculate":9,"../queries":11}],16:[function(require,module,exports){"use strict";var typestyle_1=require("typestyle");var styles_1=require("../Matrix/styles");var styles_2=require("../styles");var Styles;(function(Styles){Styles.matrixBracketWidth=styles_1.default.matrixBracketWidth;Styles.step1Duration1=600;Styles.step1Duration2=900;Styles.nextCombDuration=500;Styles.nextCombCellTransitionDelay=Styles.nextCombDuration*.5;Styles.colorPallete=styles_2.pallete;Styles.cellScaleWhenIntersecting=.55;Styles.cellTranslateXWhenIntersecting=16;Styles.cellTranslateYWhenIntersecting=10;Styles.finalResultDuration=1100;Styles.finalFadeDuration=Styles.finalResultDuration*.8;Styles.calculator=typestyle_1.style({marginTop:"200px",marginBottom:"100px"});Styles.matrices=typestyle_1.style({display:"flex",alignItems:"center",justifyContent:"center"});Styles.matrixWrapperTable=typestyle_1.style({borderSpacing:0});Styles.matrixA=typestyle_1.style({position:"relative"});Styles.matrixB=typestyle_1.style({transition:"opacity "+Styles.finalFadeDuration+"ms"});Styles.matrixC=typestyle_1.style({position:"relative",transitionDuration:"700ms",transitionProperty:"opacity, margin-left",transitionDelay:"300ms"});Styles.matrixCHidden=typestyle_1.style({position:"relative",transitionDuration:"0ms",transitionProperty:"opacity, margin-left",transitionDelay:"0ms"});Styles.resultEqualsSign=typestyle_1.style({fontSize:"24px",color:styles_2.pallete.grayDark,transitionDuration:"700ms",transitionProperty:"opacity, width, margin",transitionDelay:"700ms, 300ms, 300ms"});Styles.animatedCell=typestyle_1.style({transition:"all 300ms ease "+Styles.nextCombCellTransitionDelay+"ms"});Styles.operatorGrid=typestyle_1.style({position:"absolute",top:"3px",left:"3px"});Styles.operatorCell=typestyle_1.style({transform:"scale(0.6)",transition:"opacity 300ms ease "+Styles.nextCombCellTransitionDelay+"ms"});Styles.plusSign=typestyle_1.style({"&::after":{content:'"+"',display:"block",position:"absolute",top:0,left:"40px",fontSize:"24px",width:"2em",height:"2em",fontFamily:"'Source Sans Pro', sans-serif",lineHeight:"49px",textAlign:"center",border:"none",textIndent:"0",padding:"0",color:styles_2.pallete.black}});Styles.controlPanel=typestyle_1.style({display:"flex",alignItems:"center",justifyContent:"center",position:"relative",paddingTop:"86px",paddingBottom:"40px",backgroundImage:"linear-gradient(to bottom,\n      transparent 0,\n      rgba(255,255,255,0.8) 92px,\n      rgba(255,255,255,0.8) 126px,\n      transparent 100%)\n    ",zIndex:2,"& > * + *":{marginLeft:"8px"}});var commonButton={color:styles_2.pallete.white,border:"none",fontSize:"24px",padding:"8px 16px","& > svg":{marginBottom:"-2px",marginRight:"8px"}};var commonButtonEnabled={boxShadow:"0 1px 1px 0 "+styles_2.pallete.gray,cursor:"pointer"};var commonButtonDisabled=typestyle_1.style(commonButton,{backgroundColor:styles_2.pallete.gray});Styles.multiplyButton=typestyle_1.style(commonButton,commonButtonEnabled,{backgroundColor:styles_2.pallete.blue,"&:hover":{backgroundColor:styles_2.pallete.blueWeak}});Styles.multiplyButtonDisabled=commonButtonDisabled;Styles.nextButton=Styles.multiplyButton;Styles.nextButtonDisabled=commonButtonDisabled;Styles.endButton=typestyle_1.style(commonButton,commonButtonEnabled,{backgroundColor:styles_2.pallete.orange,"&:hover":{backgroundColor:styles_2.pallete.orangeWeak}});Styles.endButtonDisabled=commonButtonDisabled;Styles.resetButton=Styles.multiplyButton;Styles.multiplyOrEqualsSign=typestyle_1.style({margin:"1em",fontSize:"24px",color:styles_2.pallete.grayDark});Styles.rowsResizer=typestyle_1.style({display:"flex",flexDirection:"column",justifyContent:"center",margin:"0 10px",zIndex:3});Styles.colsResizerContainer=typestyle_1.style({position:"relative"});Styles.colsResizer=typestyle_1.style({position:"absolute",left:0,right:0,display:"flex",flexDirection:"row",justifyContent:"center",margin:"10px 0",zIndex:3});Styles.resizerButton=typestyle_1.style({backgroundColor:"rgba(0, 0, 0, 0)",boxShadow:"0 1px 1px 0 "+styles_2.pallete.gray,color:styles_2.pallete.grayDark,border:"none",fontSize:"20px",textAlign:"center",width:"30px",height:"30px",lineHeight:"30px",margin:"4px",cursor:"pointer","&:hover":{backgroundColor:styles_2.pallete.grayLight}})})(Styles||(Styles={}));Object.defineProperty(exports,"__esModule",{value:true});exports.default=Styles},{"../Matrix/styles":28,"../styles":35,typestyle:163}],17:[function(require,module,exports){"use strict";var xstream_1=require("xstream");var delay_1=require("xstream/extra/delay");var dropRepeats_1=require("xstream/extra/dropRepeats");var queries_1=require("./model/queries");var styles_1=require("./styles");function timers(state$){var stateChange$=state$.compose(dropRepeats_1.default(function(s1,s2){return s1.step===s2.step&&s1.canInteract===s2.canInteract}));var allowContinueFromStartMultiply$=stateChange$.filter(function(state){return state.step===1&&!state.canInteract}).compose(delay_1.default(styles_1.default.step1Duration1+styles_1.default.step1Duration2)).mapTo({type:"ALLOW_CONTINUE",payload:null});var allowContinueFromNextComb$=stateChange$.filter(function(state){return queries_1.isInCombStep(state)&&!state.canInteract}).compose(delay_1.default(styles_1.default.nextCombDuration)).mapTo({type:"ALLOW_CONTINUE",payload:null});var allowContinueFromEnd$=stateChange$.filter(function(state){return state.step===queries_1.lastCombStep(state)+1&&!state.canInteract}).compose(delay_1.default(styles_1.default.finalResultDuration)).mapTo({type:"ALLOW_CONTINUE",payload:null});return xstream_1.default.merge(allowContinueFromStartMultiply$,allowContinueFromNextComb$,allowContinueFromEnd$)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=timers},{"./model/queries":11,"./styles":16,xstream:169,"xstream/extra/delay":166,"xstream/extra/dropRepeats":167}],18:[function(require,module,exports){"use strict";var dom_1=require("@cycle/dom");var styles_1=require("../styles");exports.multiplySign="×";exports.zeroWidthSpace="​";function renderRowsResizer(id){return dom_1.div(".rowsResizer."+styles_1.default.rowsResizer,[dom_1.div(".decreaseRow"+id+"."+styles_1.default.resizerButton,"-"),dom_1.div(".increaseRow"+id+"."+styles_1.default.resizerButton,"+")])}exports.renderRowsResizer=renderRowsResizer;function renderColsResizer(id){return dom_1.div(".colsResizer."+styles_1.default.colsResizer,[dom_1.div(".decreaseCol"+id+"."+styles_1.default.resizerButton,"-"),dom_1.div(".increaseCol"+id+"."+styles_1.default.resizerButton,"+")])}exports.renderColsResizer=renderColsResizer},{"../styles":16,"@cycle/dom":49}],19:[function(require,module,exports){"use strict";var dom_1=require("@cycle/dom");var queries_1=require("../model/queries");var styles_1=require("../styles");var play_1=require("../../icons/play");var next_1=require("../../icons/next");var end_1=require("../../icons/end");var reset_1=require("../../icons/reset");function getArrayOfButtons(state){var step=state.step;var buttons=[];if(step===0){buttons=[dom_1.div(".multiply."+styles_1.default.multiplyButton,[play_1.default,"Multiply"])]}else if(step===1&&!state.canInteract){buttons=[dom_1.div(".multiply."+styles_1.default.multiplyButtonDisabled,[play_1.default,"Multiply"])]}else if(step>=1&&step<=queries_1.lastCombStep(state)&&state.canInteract){buttons=[dom_1.div(".next."+styles_1.default.nextButton,[next_1.default,"Next"]),dom_1.div(".end."+styles_1.default.endButton,[end_1.default,"End"])]}else if(step>=1&&step<=queries_1.lastCombStep(state)+1&&!state.canInteract){buttons=[dom_1.div(".next."+styles_1.default.nextButtonDisabled,[next_1.default,"Next"]),dom_1.div(".end."+styles_1.default.endButtonDisabled,[end_1.default,"End"])]}else if(step===queries_1.lastCombStep(state)+1&&state.canInteract){buttons=[dom_1.div(".reset."+styles_1.default.resetButton,[reset_1.default,"Reset"])]}return buttons}function renderControlPanel(state){return dom_1.div(".controlPanel."+styles_1.default.controlPanel,getArrayOfButtons(state))}exports.renderControlPanel=renderControlPanel},{"../../icons/end":30,"../../icons/next":31,"../../icons/play":32,"../../icons/reset":33,"../model/queries":11,"../styles":16,"@cycle/dom":49}],20:[function(require,module,exports){"use strict";var xstream_1=require("xstream");var dom_1=require("@cycle/dom");var queries_1=require("../model/queries");var styles_1=require("../styles");var matrixA_1=require("./matrixA");var matrixB_1=require("./matrixB");var matrixC_1=require("./matrixC");var controlPanel_1=require("./controlPanel");var common_1=require("./common");var tweens_1=require("./tweens");function renderSign(state){if(queries_1.isInCombStep(state)){return dom_1.span(".multiplySign."+styles_1.default.multiplyOrEqualsSign,"=")}else{return dom_1.span(".tempEqualsSign."+styles_1.default.multiplyOrEqualsSign,common_1.multiplySign)}}function maybeRenderEqualsSign(state){var style={};if(state.step===queries_1.lastCombStep(state)+1){style={margin:"1em",width:"12px",opacity:"1"}}else if(state.step===0){return null}else{style={margin:"0",width:"0",opacity:"0.01"}}return dom_1.span(".resultEqualsSign."+styles_1.default.resultEqualsSign,{style:style},"=")}function view(state$,vdomA$,vdomB$,vdomC$){var transform$=tweens_1.makeTransform$(state$);return xstream_1.default.combine(state$,transform$,vdomA$,vdomB$,vdomC$.startWith(null)).map(function(_a){var state=_a[0],transform=_a[1],matrixA=_a[2],matrixB=_a[3],matrixC=_a[4];return dom_1.div(".calculator."+styles_1.default.calculator,[dom_1.div(".matrices."+styles_1.default.matrices,[matrixA_1.renderMatrixA(matrixA,state),renderSign(state),matrixB_1.renderMatrixB(matrixB,state,transform),maybeRenderEqualsSign(state),matrixC_1.maybeRenderMatrixC(matrixC,state)]),controlPanel_1.renderControlPanel(state)])})}Object.defineProperty(exports,"__esModule",{value:true});exports.default=view},{"../model/queries":11,"../styles":16,"./common":18,"./controlPanel":19,"./matrixA":21,"./matrixB":22,"./matrixC":23,"./tweens":24,"@cycle/dom":49,xstream:169}],21:[function(require,module,exports){"use strict";var dom_1=require("@cycle/dom");var queries_1=require("../model/queries");var styles_1=require("../../Matrix/styles");var styles_2=require("../styles");var common_1=require("./common");function renderOperatorGrid(state){if(state.step===0){return null}var lastIntersectRow=state.step-2;var firstIntersectRow=state.step-2-state.matrixB.values.numberColumns;var rows=state.matrixA.values.rows;return dom_1.div(".operatorGrid."+styles_2.default.operatorGrid,rows.map(function(row,i){var shouldShowMultiply=firstIntersectRow<i&&i<=lastIntersectRow;return dom_1.ul("."+styles_1.default.row,row.map(function(cellVal,j){var shouldShowPlus=j<state.matrixA.values.numberColumns-1;return dom_1.li([dom_1.span(".operator",{class:(_a={},_a[styles_1.default.cell]=true,_a[styles_2.default.operatorCell]=true,_a[styles_2.default.plusSign]=shouldShowPlus,_a),style:{opacity:shouldShowMultiply?1:.01}},[common_1.multiplySign])]);var _a}))}))}function mutateCellStyles(state){var lastIntersectRow=state.step-2;var firstIntersectRow=state.step-2-state.matrixB.values.numberColumns;return function updateHook(prev,next){var all=next.elm.querySelectorAll(".cell");var _loop_1=function(i,N){var cellElem=all.item(i);var rowOfCell=parseInt(cellElem.dataset.row);if(queries_1.isInCombStep(state)){cellElem.classList.add(styles_2.default.animatedCell)}else if(state.step>queries_1.lastCombStep(state)){setTimeout(function(){return cellElem.classList.remove(styles_2.default.animatedCell)},styles_2.default.nextCombDuration)}if(firstIntersectRow<rowOfCell&&rowOfCell<=lastIntersectRow){cellElem.style.transform="\n          scale("+styles_2.default.cellScaleWhenIntersecting+")\n          translateX("+-styles_2.default.cellTranslateXWhenIntersecting+"px)\n          translateY("+styles_2.default.cellTranslateYWhenIntersecting+"px)\n        ";cellElem.style.color=styles_2.default.colorPallete.blue}else{cellElem.style.transform=null;cellElem.style.color=null}};for(var i=0,N=all.length;i<N;i++){_loop_1(i,N)}}}function renderMatrixA(matrixA,state){var showResizers=state.step===0;return dom_1.table(".matrixAWrapper."+styles_2.default.matrixWrapperTable,[dom_1.tr([dom_1.td(showResizers?[common_1.renderRowsResizer("A")]:[]),dom_1.td(".matrixA."+styles_2.default.matrixA,{hook:{update:mutateCellStyles(state)}},[matrixA,renderOperatorGrid(state)])]),dom_1.tr([dom_1.td(),dom_1.td(".colsResizerContainer."+styles_2.default.colsResizerContainer,showResizers?[common_1.renderColsResizer("A")]:[])])])}exports.renderMatrixA=renderMatrixA},{"../../Matrix/styles":28,"../model/queries":11,"../styles":16,"./common":18,"@cycle/dom":49}],22:[function(require,module,exports){"use strict";var dom_1=require("@cycle/dom");var queries_1=require("../model/queries");var styles_1=require("../styles");var common_1=require("./common");function getOpacity(state){if(state.step===queries_1.lastCombStep(state)+1&&!state.canInteract){return"0.01"}else if(state.step===queries_1.lastCombStep(state)+1&&state.canInteract){return"1"}else{return"1"}}function mutateCellStyles(state,transform){var lastIntersectCol=state.step-2;var firstIntersectCol=state.step-2-state.matrixA.values.numberRows;var rotateZTransform=transform.split(" ").filter(function(t){return t.match(/^rotateZ/)!==null}).pop().replace("-","+");return function updateHook(prev,next){var all=next.elm.querySelectorAll(".cell");var _loop_1=function(i,N){var cellElem=all.item(i);var colOfCell=parseInt(cellElem.dataset.col);if(queries_1.isInCombStep(state)){cellElem.classList.add(styles_1.default.animatedCell)}else if(state.step>queries_1.lastCombStep(state)){setTimeout(function(){return cellElem.classList.remove(styles_1.default.animatedCell)},styles_1.default.nextCombDuration)}if(firstIntersectCol<colOfCell&&colOfCell<=lastIntersectCol){cellElem.style.transform="\n          "+rotateZTransform+"\n          scale("+styles_1.default.cellScaleWhenIntersecting+")\n          translateX("+styles_1.default.cellTranslateXWhenIntersecting+"px)\n          translateY("+-styles_1.default.cellTranslateYWhenIntersecting+"px)\n        ";cellElem.style.color=styles_1.default.colorPallete.blue}else{cellElem.style.transform=rotateZTransform;cellElem.style.color=null}};for(var i=0,N=all.length;i<N;i++){_loop_1(i,N)}}}function renderMatrixB(matrixB,state,transform){var showResizers=state.step===0;var opacity=getOpacity(state);return dom_1.table(".matrixBWrapper."+styles_1.default.matrixWrapperTable,[dom_1.tr([dom_1.td(".matrixB."+styles_1.default.matrixB,{style:{opacity:opacity,transform:transform,transformOrigin:"bottom left"},hook:{update:mutateCellStyles(state,transform)}},[matrixB]),dom_1.td(showResizers?[common_1.renderRowsResizer("B")]:[])]),dom_1.tr([dom_1.td(".colsResizerContainer."+styles_1.default.colsResizerContainer,showResizers?[common_1.renderColsResizer("B")]:[]),dom_1.td()])])}exports.renderMatrixB=renderMatrixB},{"../model/queries":11,"../styles":16,"./common":18,"@cycle/dom":49}],23:[function(require,module,exports){"use strict";var dom_1=require("@cycle/dom");var queries_1=require("../model/queries");var styles_1=require("../styles");function mutateCellStyles(state){return function updateHook(prev,next){var all=next.elm.querySelectorAll(".cell");for(var i=0,N=all.length;i<N;i++){var cellElem=all.item(i);var rowOfCell=parseInt(cellElem.dataset.row);var colOfCell=parseInt(cellElem.dataset.col);if(queries_1.isInCombStep(state)){cellElem.classList.add(styles_1.default.animatedCell)}else{cellElem.classList.remove(styles_1.default.animatedCell)}if(rowOfCell+colOfCell>state.step-2){cellElem.style.color=null;cellElem.style.opacity="0.01"}else if(rowOfCell+colOfCell===state.step-2){cellElem.style.color=styles_1.default.colorPallete.blue;cellElem.style.opacity="1"}else{cellElem.style.color=null;cellElem.style.opacity="1"}}}}function maybeRenderMatrixC(matrixC,state){var step=state.step;if(matrixC===null||step===0||step===1&&!state.canInteract){return dom_1.div(".matrixC",{class:(_a={},_a[styles_1.default.matrixCHidden]=true,_a),style:{opacity:"0.01",marginLeft:"0"}})}else{matrixC.data=matrixC.data||{};matrixC.data.style=matrixC.data.style||{};matrixC.data.style.position="absolute";var xDist=state.measurements.matrixBWidth+8;var yDist=state.measurements.matrixAHeight*.5;return dom_1.div(".matrixC",{class:(_b={},_b[styles_1.default.matrixC]=true,_b),style:{transform:"translateX(-"+xDist+"px) translateY(-"+yDist+"px)",opacity:"1",marginLeft:step===queries_1.lastCombStep(state)+1?xDist+"px":"0"
},hook:{update:mutateCellStyles(state)}},[matrixC])}var _a,_b}exports.maybeRenderMatrixC=maybeRenderMatrixC},{"../model/queries":11,"../styles":16,"@cycle/dom":49}],24:[function(require,module,exports){"use strict";var xstream_1=require("xstream");var concat_1=require("xstream/extra/concat");var delay_1=require("xstream/extra/delay");var tween_1=require("xstream/extra/tween");var dropRepeats_1=require("xstream/extra/dropRepeats");var queries_1=require("../model/queries");var styles_1=require("../styles");var xMove=59.5;var padding=8;function makeStartMultiplyTransform$(state$){return state$.filter(function(state){return state.step===1}).map(function(state){var ease=tween_1.default.power2.easeInOut;var yLift=padding+state.measurements.matrixAHeight*.5+state.measurements.matrixBHeight*.5;return concat_1.default(tween_1.default({from:0,to:yLift,duration:styles_1.default.step1Duration1,ease:ease}).map(function(y){return"\n            translateX(0%)\n            translateY("+-y+"px)\n            rotateZ(0deg)\n          "}),tween_1.default({from:0,to:1,duration:styles_1.default.step1Duration2,ease:ease}).map(function(t){return"\n            translateX("+-t*xMove+"px)\n            translateY("+-yLift+"px)\n            rotateZ("+-Math.pow(t,2.3)*90+"deg)\n          "}))}).flatten()}function makeNextStepTransform$(state$){return state$.filter(function(state){return state.step>1&&state.step<=queries_1.lastCombStep(state)}).map(function(state){var ease=tween_1.default.power2.easeInOut;var duration=styles_1.default.nextCombDuration;var yLift=padding+state.measurements.matrixAHeight*.5+state.measurements.matrixBHeight*.5;var yPrev=state.step===2?yLift:yLift-padding-styles_1.default.matrixBracketWidth*2-state.measurements.rowHeight*(state.step-2);var yNext=yLift-padding-styles_1.default.matrixBracketWidth*2-state.measurements.rowHeight*(state.step-1);return tween_1.default({from:yPrev,to:yNext,duration:duration,ease:ease}).map(function(y){return"\n        translateX("+-xMove+"px)\n        translateY("+-y+"px)\n        rotateZ(-90deg)\n      "})}).flatten()}function makeEndTransform$(state$){return state$.filter(function(state){return state.step===queries_1.lastCombStep(state)+1}).map(function(state){var ease=tween_1.default.power2.easeInOut;var duration=styles_1.default.finalFadeDuration;var timeToReset=styles_1.default.finalResultDuration-duration;var yLift=padding+state.measurements.matrixAHeight*.5+state.measurements.matrixBHeight*.5;var yLastComb=yLift-padding-styles_1.default.matrixBracketWidth*2-state.measurements.rowHeight*(state.step-2);var yOutside=yLastComb-state.measurements.rowHeight-padding*4;return concat_1.default(tween_1.default({from:yLastComb,to:yOutside,duration:duration,ease:ease}).map(function(y){return"\n          translateX("+-xMove+"px)\n          translateY("+-y+"px)\n          rotateZ(-90deg)\n        "}),xstream_1.default.of("translateX(0px) translateY(0px) rotateZ(0deg)").compose(delay_1.default(timeToReset*.9)))}).flatten()}function makeTransform$(state$){var stateOnStepChange$=state$.compose(dropRepeats_1.default(function(s1,s2){return s1.step===s2.step}));return xstream_1.default.merge(makeStartMultiplyTransform$(stateOnStepChange$),makeNextStepTransform$(stateOnStepChange$),makeEndTransform$(stateOnStepChange$)).startWith("translateX(0%) translateY(0px) rotateZ(0deg)")}exports.makeTransform$=makeTransform$},{"../model/queries":11,"../styles":16,xstream:169,"xstream/extra/concat":165,"xstream/extra/delay":166,"xstream/extra/dropRepeats":167,"xstream/extra/tween":168}],25:[function(require,module,exports){"use strict";var intent_1=require("./intent");var model_1=require("./model");var view_1=require("./view");function Matrix(sources){var action$=intent_1.default(sources.DOM);var reducer$=model_1.default(action$);var vdom$=view_1.default(sources.onion.state$);var sinks={DOM:vdom$,onion:reducer$};return sinks}Object.defineProperty(exports,"__esModule",{value:true});exports.default=Matrix},{"./intent":26,"./model":27,"./view":29}],26:[function(require,module,exports){"use strict";function intent(domSource){return domSource.select(".cell").events("input").map(function(ev){var inputEl=ev.target;return{row:parseInt(inputEl.attributes["data-row"].value),col:parseInt(inputEl.attributes["data-col"].value),val:parseFloat(inputEl.value)}}).filter(function(action){return!isNaN(action.val)})}Object.defineProperty(exports,"__esModule",{value:true});exports.default=intent},{}],27:[function(require,module,exports){"use strict";var xstream_1=require("xstream");var MatrixValues_1=require("../utils/MatrixValues");var defaultState={values:MatrixValues_1.default.ofDimensions(1,1),editable:true,id:"matrix"+Math.round(Math.random()*1e3)};function model(action$){var initReducer$=xstream_1.default.of(function initReducer(prevState){if(!prevState){return defaultState}else{return prevState}});var inputReducer$=action$.map(function(action){return function inputReducer(prevState){return{values:prevState.values.set(action.row,action.col,action.val),editable:prevState.editable,id:prevState.id}}});return xstream_1.default.merge(initReducer$,inputReducer$)}Object.defineProperty(exports,"__esModule",{value:true});exports.default=model},{"../utils/MatrixValues":36,xstream:169}],28:[function(require,module,exports){"use strict";var typestyle_1=require("typestyle");var styles_1=require("../styles");var Styles;(function(Styles){Styles.matrixBracketWidth=2;Styles.matrixBracketWidthPx=Styles.matrixBracketWidth+"px";Styles.matrixBracketIngress="9px";Styles.matrixBracketColor=styles_1.pallete.black;Styles.matrix=typestyle_1.style({position:"relative",padding:Styles.matrixBracketWidth});Styles.leftBracket=typestyle_1.style({position:"absolute",left:0,bottom:0,top:0,width:Styles.matrixBracketWidth,backgroundColor:Styles.matrixBracketColor,"&::before":{content:"''",backgroundColor:Styles.matrixBracketColor,position:"absolute",top:0,left:0,height:Styles.matrixBracketWidth,width:Styles.matrixBracketIngress},"&::after":{content:"''",backgroundColor:Styles.matrixBracketColor,position:"absolute",bottom:0,left:0,height:Styles.matrixBracketWidth,width:Styles.matrixBracketIngress}});Styles.rightBracket=typestyle_1.style({position:"absolute",right:0,bottom:0,top:0,width:Styles.matrixBracketWidth,backgroundColor:Styles.matrixBracketColor,"&::before":{content:"''",backgroundColor:Styles.matrixBracketColor,position:"absolute",top:0,right:0,height:Styles.matrixBracketWidth,width:Styles.matrixBracketIngress},"&::after":{content:"''",backgroundColor:Styles.matrixBracketColor,position:"absolute",bottom:0,right:0,height:Styles.matrixBracketWidth,width:Styles.matrixBracketIngress}});var insetBoxShadow={"box-shadow":"inset 0px 1px 2px 0px rgba(0,0,0,0.5)"};Styles.row=typestyle_1.style({listStyleType:"none",padding:0,margin:0,display:"flex"});Styles.cell=typestyle_1.style({display:"inline-block",fontSize:"24px",width:"2em",height:"2em",fontFamily:"'Source Sans Pro', sans-serif",lineHeight:"49px",textAlign:"center",border:"none",textIndent:"0",padding:"0",color:styles_1.pallete.black,backgroundColor:"transparent","input&":{"&:hover":insetBoxShadow,"&:focus":insetBoxShadow}})})(Styles||(Styles={}));Object.defineProperty(exports,"__esModule",{value:true});exports.default=Styles},{"../styles":35,typestyle:163}],29:[function(require,module,exports){"use strict";var dom_1=require("@cycle/dom");var styles_1=require("./styles");var zeroWidthSpace="​";function renderLeftBracket(state){return dom_1.div(".leftBracket."+styles_1.default.leftBracket,{key:"leftBracket"+state.id})}function renderRightBracket(state){return dom_1.div(".rightBracket."+styles_1.default.rightBracket,{key:"rightBracket"+state.id})}function renderCellAsInput(cellValue,i,j){return dom_1.input(".cell."+styles_1.default.cell,{key:"cell"+i+"-"+j,attrs:{type:"text","data-row":i,"data-col":j,value:typeof cellValue==="number"?""+cellValue:void 0}})}function renderCellAsSpan(cellValue,i,j){return dom_1.span(".cell."+styles_1.default.cell,{attrs:{"data-row":i,"data-col":j}},typeof cellValue==="number"?[""+cellValue]:[zeroWidthSpace])}function renderAllCells(state){return state.values.rows.map(function(row,i){return dom_1.ul(".row."+styles_1.default.row,{key:"row"+i},row.map(function(cellValue,j){return dom_1.li(".col",{key:"col"+j},[state.editable?renderCellAsInput(cellValue,i,j):renderCellAsSpan(cellValue,i,j)])}))})}function view(state$){return state$.map(function(state){return dom_1.div(".matrix."+styles_1.default.matrix,{key:state.id},[renderLeftBracket(state)].concat(renderAllCells(state),[renderRightBracket(state)]))})}Object.defineProperty(exports,"__esModule",{value:true});exports.default=view},{"./styles":28,"@cycle/dom":49}],30:[function(require,module,exports){"use strict";var dom_1=require("@cycle/dom");var endIcon=dom_1.svg({attrs:{width:"20px",height:"20px",viewBox:"0 0 511.63 511.63",space:"preserve"}},[dom_1.svg.g([dom_1.svg.path({attrs:{d:"M506.203,41.968c-3.617-3.617-7.902-5.426-12.851-5.426H456.81c-4.948,0-9.232,1.809-12.847,5.426 c-3.62,3.619-5.427,7.902-5.427,12.851v193.572c-0.955-2.091-2.19-3.899-3.717-5.424L232.11,40.257 c-3.616-3.615-6.658-4.853-9.136-3.709c-2.474,1.141-3.711,4.187-3.711,9.135v202.708c-0.95-2.091-2.187-3.899-3.709-5.424 L12.847,40.257c-3.617-3.615-6.661-4.853-9.135-3.709C1.237,37.689,0,40.735,0,45.683v420.262c0,4.948,1.241,7.998,3.715,9.141 c2.474,1.14,5.518-0.099,9.135-3.72l202.707-202.708c1.52-1.708,2.76-3.519,3.709-5.421v202.708c0,4.948,1.237,7.994,3.711,9.134 s5.52-0.1,9.136-3.717l202.709-202.708c1.523-1.711,2.762-3.524,3.714-5.428v193.571c0,4.948,1.81,9.229,5.427,12.847 c3.614,3.617,7.898,5.425,12.847,5.425h36.546c4.944,0,9.232-1.808,12.85-5.425c3.614-3.617,5.425-7.898,5.425-12.847V54.819 C511.626,49.863,509.82,45.584,506.203,41.968z",fill:"#FFFFFF"}})])]);Object.defineProperty(exports,"__esModule",{value:true});exports.default=endIcon},{"@cycle/dom":49}],31:[function(require,module,exports){"use strict";var dom_1=require("@cycle/dom");var nextIcon=dom_1.svg({attrs:{width:"20px",height:"20px",viewBox:"0 0 440.25 440.25",space:"preserve"}},[dom_1.svg.g([dom_1.svg.path({attrs:{d:"M434.823,207.279L232.111,4.571c-3.609-3.617-6.655-4.856-9.133-3.713c-2.475,1.143-3.712,4.189-3.712,9.137v202.708 c-0.949-2.091-2.187-3.901-3.711-5.424L12.847,4.571C9.229,0.954,6.186-0.285,3.711,0.858C1.237,2.001,0,5.047,0,9.995v420.262 c0,4.948,1.237,7.994,3.711,9.138c2.474,1.14,5.518-0.1,9.135-3.721l202.708-202.701c1.521-1.711,2.762-3.524,3.711-5.428v202.712 c0,4.948,1.237,7.991,3.712,9.131c2.478,1.143,5.523-0.093,9.133-3.714l202.712-202.708c3.61-3.617,5.428-7.901,5.428-12.847 C440.248,215.178,438.433,210.896,434.823,207.279z",fill:"#FFFFFF"}})])]);Object.defineProperty(exports,"__esModule",{value:true});exports.default=nextIcon},{"@cycle/dom":49}],32:[function(require,module,exports){"use strict";var dom_1=require("@cycle/dom");var playIcon=dom_1.svg({attrs:{width:"20px",height:"20px",viewBox:"0 0 41.999 41.999",space:"preserve"}},[dom_1.svg.g([dom_1.svg.path({attrs:{d:"M36.068,20.176l-29-20C6.761-0.035,6.363-0.057,6.035,0.114C5.706,0.287,5.5,0.627,5.5,0.999v40 c0,0.372,0.206,0.713,0.535,0.886c0.146,0.076,0.306,0.114,0.465,0.114c0.199,0,0.397-0.06,0.568-0.177l29-20  c0.271-0.187,0.432-0.494,0.432-0.823S36.338,20.363,36.068,20.176z",fill:"#FFFFFF"}})])]);Object.defineProperty(exports,"__esModule",{value:true});exports.default=playIcon},{"@cycle/dom":49}],33:[function(require,module,exports){"use strict";var dom_1=require("@cycle/dom");var resetIcon=dom_1.svg({attrs:{width:"20px",height:"20px",viewBox:"0 0 438.536 438.536",space:"preserve"}},[dom_1.svg.g([dom_1.svg.path({attrs:{d:"M421.125,134.191c-11.608-27.03-27.217-50.347-46.819-69.949C354.7,44.639,331.384,29.033,304.353,17.42 C277.325,5.807,248.969,0.005,219.275,0.005c-27.978,0-55.052,5.277-81.227,15.843C111.879,26.412,88.61,41.305,68.243,60.531 l-37.12-36.835c-5.711-5.901-12.275-7.232-19.701-3.999C3.807,22.937,0,28.554,0,36.547v127.907c0,4.948,1.809,9.231,5.426,12.847 c3.619,3.617,7.902,5.426,12.85,5.426h127.907c7.996,0,13.61-3.807,16.846-11.421c3.234-7.423,1.903-13.988-3.999-19.701 l-39.115-39.398c13.328-12.563,28.553-22.222,45.683-28.98c17.131-6.757,35.021-10.138,53.675-10.138 c19.793,0,38.687,3.858,56.674,11.563c17.99,7.71,33.544,18.131,46.679,31.265c13.134,13.131,23.555,28.69,31.265,46.679   c7.703,17.987,11.56,36.875,11.56,56.674c0,19.798-3.856,38.686-11.56,56.672c-7.71,17.987-18.131,33.544-31.265,46.679 c-13.135,13.134-28.695,23.558-46.679,31.265c-17.987,7.707-36.881,11.561-56.674,11.561c-22.651,0-44.064-4.949-64.241-14.843 c-20.174-9.894-37.209-23.883-51.104-41.973c-1.331-1.902-3.521-3.046-6.567-3.429c-2.856,0-5.236,0.855-7.139,2.566 l-39.114,39.402c-1.521,1.53-2.33,3.478-2.426,5.853c-0.094,2.385,0.527,4.524,1.858,6.427 c20.749,25.125,45.871,44.587,75.373,58.382c29.502,13.798,60.625,20.701,93.362,20.701c29.694,0,58.05-5.808,85.078-17.416 c27.031-11.607,50.34-27.22,69.949-46.821c19.605-19.609,35.211-42.921,46.822-69.949s17.411-55.392,17.411-85.08 C438.536,189.569,432.732,161.22,421.125,134.191z",fill:"#FFFFFF"}})])]);Object.defineProperty(exports,"__esModule",{value:true});exports.default=resetIcon},{"@cycle/dom":49}],34:[function(require,module,exports){"use strict";var xstream_run_1=require("@cycle/xstream-run");var dom_1=require("@cycle/dom");var cycle_onionify_1=require("cycle-onionify");var index_1=require("./App/index");require("./styles");var main=cycle_onionify_1.default(index_1.default);requestAnimationFrame(function(){xstream_run_1.run(main,{DOM:dom_1.makeDOMDriver("#main-container")})})},{"./App/index":1,"./styles":35,"@cycle/dom":49,"@cycle/xstream-run":60,"cycle-onionify":62}],35:[function(require,module,exports){"use strict";var typestyle_1=require("typestyle");typestyle_1.cssRule("@font-face",{fontFamily:'"Source Sans Pro"',src:'url("./fonts/SourceSansPro-Regular.otf")',fontWeight:"normal"});typestyle_1.cssRule("@font-face",{fontFamily:'"Vesper Libre"',src:'url("./fonts/VesperLibre-Regular.ttf")',fontWeight:"normal"});exports.pallete={blue:"rgb(48, 141, 255)",blueWeak:"rgb(93, 166, 252)",orange:"rgb(255, 162, 48)",orangeWeak:"rgb(253, 180, 97)",white:"#FFFFFF",grayLight:"#EEEEEE",gray:"#C5C5C5",grayDark:"#686868",black:"#323232"}},{typestyle:163}],36:[function(require,module,exports){"use strict";var immutable_1=require("immutable");var MatrixValues=function(){function MatrixValues(){}MatrixValues.prototype.clone=function(){var mv=new MatrixValues;mv.numRows=this.numRows;mv.numCols=this.numCols;mv.values=this.values;return mv};MatrixValues.ofDimensions=function(rows,columns){var mv=new MatrixValues;mv.numRows=Math.max(1,rows);mv.numCols=Math.max(1,columns);mv.values=makeValues(rows,columns);return mv};MatrixValues.from=function(vals){var mv=new MatrixValues;mv.numRows=vals.length;mv.numCols=vals[0].length;mv.values=immutable_1.fromJS(vals);return mv};MatrixValues.prototype.resize=function(numRows,numColumns){var _a=this,oldNumRows=_a.numRows,oldNumCols=_a.numCols;var nR=Math.max(1,numRows);var nC=Math.max(1,numColumns);var mv=new MatrixValues;mv.numRows=nR;mv.numCols=nC;mv.values=this.values.setSize(nR).map(function(rows,rowIndex){if(rowIndex>=oldNumRows){return makeRow(nC)}else{return rows.setSize(nC).map(function(v,colIndex){return colIndex>=oldNumCols?1:v})}});return mv};MatrixValues.prototype.set=function(rowIndex,colIndex,value){var mv=this.clone();mv.values=mv.values.setIn([rowIndex,colIndex],value);return mv};MatrixValues.prototype.get=function(rowIndex,colIndex){return this.values.getIn([rowIndex,colIndex])};MatrixValues.prototype.setAll=function(value){var mv=new MatrixValues;mv.numRows=this.numRows;mv.numCols=this.numCols;mv.values=makeValues(mv.numRows,mv.numCols,value);return mv};Object.defineProperty(MatrixValues.prototype,"numberRows",{get:function(){return this.numRows},enumerable:true,configurable:true});Object.defineProperty(MatrixValues.prototype,"numberColumns",{get:function(){return this.numCols},enumerable:true,configurable:true});Object.defineProperty(MatrixValues.prototype,"rows",{get:function(){return this.values.toJS()},enumerable:true,configurable:true});return MatrixValues}();Object.defineProperty(exports,"__esModule",{value:true});exports.default=MatrixValues;function makeValues(numRows,numColumns,val){if(val===void 0){val=1}var vals=new Array(numRows);for(var i=0;i<numRows;i++){vals[i]=makeRow(numColumns,val)}return immutable_1.List(vals)}function makeRow(numColumns,val){if(val===void 0){val=1}var row=new Array(numColumns);for(var i=0;i<numColumns;i++){row[i]=val}return immutable_1.List(row)}},{immutable:117}],37:[function(require,module,exports){"use strict";function logToConsoleError(err){var target=err.stack||err;if(console&&console.error){console.error(target)}else if(console&&console.log){console.log(target)}}function makeSinkProxies(drivers,streamAdapter){var sinkProxies={};for(var name_1 in drivers){if(drivers.hasOwnProperty(name_1)){var holdSubject=streamAdapter.makeSubject();var driverStreamAdapter=drivers[name_1].streamAdapter||streamAdapter;var stream=driverStreamAdapter.adapt(holdSubject.stream,streamAdapter.streamSubscribe);sinkProxies[name_1]={stream:stream,observer:holdSubject.observer}}}return sinkProxies}function callDrivers(drivers,sinkProxies,streamAdapter){var sources={};for(var name_2 in drivers){if(drivers.hasOwnProperty(name_2)){var driverOutput=drivers[name_2](sinkProxies[name_2].stream,streamAdapter,name_2);var driverStreamAdapter=drivers[name_2].streamAdapter;if(driverStreamAdapter&&driverStreamAdapter.isValidStream(driverOutput)){sources[name_2]=streamAdapter.adapt(driverOutput,driverStreamAdapter.streamSubscribe)}else{sources[name_2]=driverOutput}if(sources[name_2]&&typeof sources[name_2]==="object"){sources[name_2]._isCycleSource=name_2}}}return sources}function replicateMany(sinks,sinkProxies,streamAdapter){var results=Object.keys(sinks).filter(function(name){return!!sinkProxies[name]}).map(function(name){return streamAdapter.streamSubscribe(sinks[name],{next:function(x){sinkProxies[name].observer.next(x)},error:function(err){logToConsoleError(err);sinkProxies[name].observer.error(err)},complete:function(x){sinkProxies[name].observer.complete(x)}})});var disposeFunctions=results.filter(function(dispose){return typeof dispose==="function"});return function(){disposeFunctions.forEach(function(dispose){return dispose()})}}function disposeSources(sources){for(var k in sources){if(sources.hasOwnProperty(k)&&sources[k]&&typeof sources[k].dispose==="function"){sources[k].dispose()}}}var isObjectEmpty=function(obj){return Object.keys(obj).length===0};function Cycle(main,drivers,options){if(typeof main!=="function"){throw new Error("First argument given to Cycle must be the 'main' "+"function.")}if(typeof drivers!=="object"||drivers===null){throw new Error("Second argument given to Cycle must be an object "+"with driver functions as properties.")}if(isObjectEmpty(drivers)){throw new Error("Second argument given to Cycle must be an object "+"with at least one driver function declared as a property.")}var streamAdapter=options.streamAdapter;if(!streamAdapter||isObjectEmpty(streamAdapter)){throw new Error("Third argument given to Cycle must be an options object "+"with the streamAdapter key supplied with a valid stream adapter.")}var sinkProxies=makeSinkProxies(drivers,streamAdapter);var sources=callDrivers(drivers,sinkProxies,streamAdapter);var sinks=main(sources);if(typeof window!=="undefined"){window.Cyclejs={sinks:sinks}}var run=function(){var disposeReplication=replicateMany(sinks,sinkProxies,streamAdapter);return function(){disposeSources(sources);disposeReplication()}};return{sinks:sinks,sources:sources,run:run}}Object.defineProperty(exports,"__esModule",{value:true});exports.default=Cycle},{}],38:[function(require,module,exports){"use strict";var xstream_1=require("xstream");var xstream_adapter_1=require("@cycle/xstream-adapter");var fromEvent_1=require("./fromEvent");var BodyDOMSource=function(){function BodyDOMSource(_runStreamAdapter,_name){this._runStreamAdapter=_runStreamAdapter;this._name=_name}BodyDOMSource.prototype.select=function(selector){return this};BodyDOMSource.prototype.elements=function(){var runSA=this._runStreamAdapter;var out=runSA.remember(runSA.adapt(xstream_1.default.of(document.body),xstream_adapter_1.default.streamSubscribe));out._isCycleSource=this._name;return out};BodyDOMSource.prototype.events=function(eventType,options){if(options===void 0){options={}}var stream;if(options&&typeof options.useCapture==="boolean"){stream=fromEvent_1.fromEvent(document.body,eventType,options.useCapture)}else{stream=fromEvent_1.fromEvent(document.body,eventType)}var out=this._runStreamAdapter.adapt(stream,xstream_adapter_1.default.streamSubscribe);out._isCycleSource=this._name;return out};return BodyDOMSource}();exports.BodyDOMSource=BodyDOMSource},{"./fromEvent":46,"@cycle/xstream-adapter":59,xstream:169}],39:[function(require,module,exports){"use strict";var xstream_1=require("xstream");var xstream_adapter_1=require("@cycle/xstream-adapter");var fromEvent_1=require("./fromEvent");var DocumentDOMSource=function(){function DocumentDOMSource(_runStreamAdapter,_name){this._runStreamAdapter=_runStreamAdapter;this._name=_name}DocumentDOMSource.prototype.select=function(selector){return this};DocumentDOMSource.prototype.elements=function(){var runSA=this._runStreamAdapter;var out=runSA.remember(runSA.adapt(xstream_1.default.of(document),xstream_adapter_1.default.streamSubscribe));out._isCycleSource=this._name;return out};DocumentDOMSource.prototype.events=function(eventType,options){if(options===void 0){options={}}var stream;if(options&&typeof options.useCapture==="boolean"){stream=fromEvent_1.fromEvent(document,eventType,options.useCapture)}else{stream=fromEvent_1.fromEvent(document,eventType)}var out=this._runStreamAdapter.adapt(stream,xstream_adapter_1.default.streamSubscribe);out._isCycleSource=this._name;return out};return DocumentDOMSource}();exports.DocumentDOMSource=DocumentDOMSource},{"./fromEvent":46,"@cycle/xstream-adapter":59,xstream:169}],40:[function(require,module,exports){"use strict";var ScopeChecker_1=require("./ScopeChecker");var utils_1=require("./utils");var matchesSelector;try{matchesSelector=require("matches-selector")}catch(e){matchesSelector=Function.prototype}function toElArray(input){return Array.prototype.slice.call(input)}var ElementFinder=function(){function ElementFinder(namespace,isolateModule){this.namespace=namespace;this.isolateModule=isolateModule}ElementFinder.prototype.call=function(rootElement){var namespace=this.namespace;if(namespace.join("")===""){return rootElement}var scope=utils_1.getScope(namespace);var scopeChecker=new ScopeChecker_1.ScopeChecker(scope,this.isolateModule);var selector=utils_1.getSelectors(namespace);var topNode=rootElement;var topNodeMatches=[];if(scope.length>0){topNode=this.isolateModule.getIsolatedElement(scope)||rootElement;if(selector&&matchesSelector(topNode,selector)){topNodeMatches.push(topNode)}}return toElArray(topNode.querySelectorAll(selector)).filter(scopeChecker.isStrictlyInRootScope,scopeChecker).concat(topNodeMatches)};return ElementFinder}();exports.ElementFinder=ElementFinder},{"./ScopeChecker":44,"./utils":57,"matches-selector":137}],41:[function(require,module,exports){"use strict";var ScopeChecker_1=require("./ScopeChecker");var utils_1=require("./utils");var matchesSelector;try{matchesSelector=require("matches-selector")}catch(e){matchesSelector=Function.prototype}var gDestinationId=0;function findDestinationId(arr,searchId){var minIndex=0;var maxIndex=arr.length-1;var currentIndex;var currentElement;while(minIndex<=maxIndex){currentIndex=(minIndex+maxIndex)/2|0;currentElement=arr[currentIndex];var currentId=currentElement.destinationId;if(currentId<searchId){minIndex=currentIndex+1}else if(currentId>searchId){maxIndex=currentIndex-1}else{return currentIndex}}return-1}var EventDelegator=function(){function EventDelegator(topElement,eventType,useCapture,isolateModule){var _this=this;this.topElement=topElement;this.eventType=eventType;this.useCapture=useCapture;this.isolateModule=isolateModule;this.destinations=[];this.roof=topElement.parentElement;if(useCapture){this.domListener=function(ev){return _this.capture(ev)}}else{this.domListener=function(ev){return _this.bubble(ev)}}topElement.addEventListener(eventType,this.domListener,useCapture)}EventDelegator.prototype.bubble=function(rawEvent){if(!document.body.contains(rawEvent.currentTarget)){return}var ev=this.patchEvent(rawEvent);for(var el=ev.target;el&&el!==this.roof;el=el.parentElement){if(!document.body.contains(el)){ev.stopPropagation()}if(ev.propagationHasBeenStopped){return}this.matchEventAgainstDestinations(el,ev)}};EventDelegator.prototype.matchEventAgainstDestinations=function(el,ev){for(var i=0,n=this.destinations.length;i<n;i++){var dest=this.destinations[i];if(!dest.scopeChecker.isStrictlyInRootScope(el)){continue}if(matchesSelector(el,dest.selector)){this.mutateEventCurrentTarget(ev,el);dest.subject._n(ev)}}};EventDelegator.prototype.capture=function(ev){for(var i=0,n=this.destinations.length;i<n;i++){var dest=this.destinations[i];if(matchesSelector(ev.target,dest.selector)){dest.subject._n(ev)}}};EventDelegator.prototype.addDestination=function(subject,namespace,destinationId){var scope=utils_1.getScope(namespace);var selector=utils_1.getSelectors(namespace);var scopeChecker=new ScopeChecker_1.ScopeChecker(scope,this.isolateModule);this.destinations.push({subject:subject,scopeChecker:scopeChecker,selector:selector,destinationId:destinationId})};EventDelegator.prototype.createDestinationId=function(){return gDestinationId++};EventDelegator.prototype.removeDestinationId=function(destinationId){var i=findDestinationId(this.destinations,destinationId);if(i>=0){this.destinations.splice(i,1)}};EventDelegator.prototype.patchEvent=function(event){var pEvent=event;pEvent.propagationHasBeenStopped=false;var oldStopPropagation=pEvent.stopPropagation;pEvent.stopPropagation=function stopPropagation(){oldStopPropagation.call(this);this.propagationHasBeenStopped=true};return pEvent};EventDelegator.prototype.mutateEventCurrentTarget=function(event,currentTargetElement){try{Object.defineProperty(event,"currentTarget",{value:currentTargetElement,configurable:true})}catch(err){console.log("please use event.ownerTarget")}event.ownerTarget=currentTargetElement};EventDelegator.prototype.updateTopElement=function(newTopElement){this.topElement.removeEventListener(this.eventType,this.domListener,this.useCapture);newTopElement.addEventListener(this.eventType,this.domListener,this.useCapture);this.topElement=newTopElement};return EventDelegator}();exports.EventDelegator=EventDelegator},{"./ScopeChecker":44,"./utils":57,"matches-selector":137}],42:[function(require,module,exports){"use strict";var xstream_1=require("xstream");var xstream_adapter_1=require("@cycle/xstream-adapter");var HTMLSource=function(){function HTMLSource(html$,runSA,_name){this.runSA=runSA;this._name=_name;this._html$=html$;this._empty$=runSA.adapt(xstream_1.default.empty(),xstream_adapter_1.default.streamSubscribe)}HTMLSource.prototype.elements=function(){var out=this.runSA.adapt(this._html$,xstream_adapter_1.default.streamSubscribe);out._isCycleSource=this._name;return out};HTMLSource.prototype.select=function(selector){return new HTMLSource(xstream_1.default.empty(),this.runSA,this._name)};HTMLSource.prototype.events=function(eventType,options){var out=this._empty$;out._isCycleSource=this._name;return out};return HTMLSource}();exports.HTMLSource=HTMLSource},{"@cycle/xstream-adapter":59,xstream:169}],43:[function(require,module,exports){"use strict";var xstream_adapter_1=require("@cycle/xstream-adapter");var DocumentDOMSource_1=require("./DocumentDOMSource");var BodyDOMSource_1=require("./BodyDOMSource");var xstream_1=require("xstream");var ElementFinder_1=require("./ElementFinder");var fromEvent_1=require("./fromEvent");var isolate_1=require("./isolate");var EventDelegator_1=require("./EventDelegator");var utils_1=require("./utils");var matchesSelector;try{matchesSelector=require("matches-selector")}catch(e){matchesSelector=Function.prototype}var eventTypesThatDontBubble=["blur","canplay","canplaythrough","change","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"];function determineUseCapture(eventType,options){var result=false;if(typeof options.useCapture==="boolean"){result=options.useCapture}if(eventTypesThatDontBubble.indexOf(eventType)!==-1){result=true}return result}function filterBasedOnIsolation(domSource,scope){return function filterBasedOnIsolationOperator(rootElement$){return rootElement$.fold(function shouldPass(state,element){var hasIsolated=!!domSource._isolateModule.getIsolatedElement(scope);var shouldPass=hasIsolated&&!state.hadIsolatedMutable;return{hadIsolatedMutable:hasIsolated,shouldPass:shouldPass,element:element}},{hadIsolatedMutable:false,shouldPass:false,element:null}).drop(1).filter(function(s){return s.shouldPass}).map(function(s){return s.element})}}var MainDOMSource=function(){function MainDOMSource(_rootElement$,_sanitation$,_runStreamAdapter,_namespace,_isolateModule,_delegators,_name){var _this=this;if(_namespace===void 0){_namespace=[]}this._rootElement$=_rootElement$;this._sanitation$=_sanitation$;this._runStreamAdapter=_runStreamAdapter;this._namespace=_namespace;this._isolateModule=_isolateModule;this._delegators=_delegators;this._name=_name;this.__JANI_EVAKALLIO_WE_WILL_MISS_YOU_PLEASE_COME_BACK_EVENTUALLY=false;this.__JANI_EVAKALLIO_WE_WILL_MISS_YOU_PLEASE_COME_BACK_EVENTUALLY=true;this.isolateSource=isolate_1.isolateSource;this.isolateSink=function(sink,scope){var existingScope=utils_1.getScope(_this._namespace);var deeperScope=[existingScope,scope].filter(function(x){return!!x}).join("-");return isolate_1.isolateSink(sink,deeperScope)}}MainDOMSource.prototype.elements=function(){var output$;if(this._namespace.length===0){output$=this._rootElement$}else{var elementFinder_1=new ElementFinder_1.ElementFinder(this._namespace,this._isolateModule);output$=this._rootElement$.map(function(el){return elementFinder_1.call(el)})}var runSA=this._runStreamAdapter;var out=runSA.remember(runSA.adapt(output$,xstream_adapter_1.default.streamSubscribe));out._isCycleSource=this._name;return out};Object.defineProperty(MainDOMSource.prototype,"namespace",{get:function(){return this._namespace},enumerable:true,configurable:true});MainDOMSource.prototype.select=function(selector){if(typeof selector!=="string"){throw new Error("DOM driver's select() expects the argument to be a "+"string as a CSS selector")}if(selector==="document"){return new DocumentDOMSource_1.DocumentDOMSource(this._runStreamAdapter,this._name)}if(selector==="body"){return new BodyDOMSource_1.BodyDOMSource(this._runStreamAdapter,this._name)}var trimmedSelector=selector.trim();var childNamespace=trimmedSelector===":root"?this._namespace:this._namespace.concat(trimmedSelector);return new MainDOMSource(this._rootElement$,this._sanitation$,this._runStreamAdapter,childNamespace,this._isolateModule,this._delegators,this._name)};MainDOMSource.prototype.events=function(eventType,options){if(options===void 0){options={}}if(typeof eventType!=="string"){throw new Error("DOM driver's events() expects argument to be a "+"string representing the event type to listen for.")}var useCapture=determineUseCapture(eventType,options);var namespace=this._namespace;var scope=utils_1.getScope(namespace);var keyParts=[eventType,useCapture];if(scope){keyParts.push(scope)}var key=keyParts.join("~");var domSource=this;var rootElement$;if(scope){rootElement$=this._rootElement$.compose(filterBasedOnIsolation(domSource,scope))}else{rootElement$=this._rootElement$.take(2)}var event$=rootElement$.map(function setupEventDelegatorOnTopElement(rootElement){if(!namespace||namespace.length===0){
return fromEvent_1.fromEvent(rootElement,eventType,useCapture)}var delegators=domSource._delegators;var top=domSource._isolateModule.getIsolatedElement(scope)||rootElement;var delegator;if(delegators.has(key)){delegator=delegators.get(key);delegator.updateTopElement(top)}else{delegator=new EventDelegator_1.EventDelegator(top,eventType,useCapture,domSource._isolateModule);delegators.set(key,delegator)}if(scope){domSource._isolateModule.addEventDelegator(scope,delegator)}var destinationId=delegator.createDestinationId();var subject=xstream_1.default.create({start:function(){},stop:function(){if("requestIdleCallback"in window){requestIdleCallback(function(){delegator.removeDestinationId(destinationId)})}else{delegator.removeDestinationId(destinationId)}}});delegator.addDestination(subject,namespace,destinationId);return subject}).flatten();var out=this._runStreamAdapter.adapt(event$,xstream_adapter_1.default.streamSubscribe);out._isCycleSource=domSource._name;return out};MainDOMSource.prototype.dispose=function(){this._sanitation$.shamefullySendNext("");this._isolateModule.reset()};return MainDOMSource}();exports.MainDOMSource=MainDOMSource},{"./BodyDOMSource":38,"./DocumentDOMSource":39,"./ElementFinder":40,"./EventDelegator":41,"./fromEvent":46,"./isolate":50,"./utils":57,"@cycle/xstream-adapter":59,"matches-selector":137,xstream:169}],44:[function(require,module,exports){"use strict";var ScopeChecker=function(){function ScopeChecker(scope,isolateModule){this.scope=scope;this.isolateModule=isolateModule}ScopeChecker.prototype.isStrictlyInRootScope=function(leaf){for(var el=leaf;el;el=el.parentElement){var scope=this.isolateModule.isIsolatedElement(el);if(scope&&scope!==this.scope){return false}if(scope){return true}}return true};return ScopeChecker}();exports.ScopeChecker=ScopeChecker},{}],45:[function(require,module,exports){"use strict";var hyperscript_1=require("./hyperscript");var classNameFromVNode_1=require("snabbdom-selector/lib/classNameFromVNode");var selectorParser_1=require("snabbdom-selector/lib/selectorParser");var VNodeWrapper=function(){function VNodeWrapper(rootElement){this.rootElement=rootElement}VNodeWrapper.prototype.call=function(vnode){var _a=selectorParser_1.default(vnode.sel),selectorTagName=_a.tagName,selectorId=_a.id;var vNodeClassName=classNameFromVNode_1.default(vnode);var vNodeData=vnode.data||{};var vNodeDataProps=vNodeData.props||{};var _b=vNodeDataProps.id,vNodeId=_b===void 0?selectorId:_b;var isVNodeAndRootElementIdentical=vNodeId.toUpperCase()===this.rootElement.id.toUpperCase()&&selectorTagName.toUpperCase()===this.rootElement.tagName.toUpperCase()&&vNodeClassName.toUpperCase()===this.rootElement.className.toUpperCase();if(isVNodeAndRootElementIdentical){return vnode}var _c=this.rootElement,tagName=_c.tagName,id=_c.id,className=_c.className;var elementId=id?"#"+id:"";var elementClassName=className?"."+className.split(" ").join("."):"";return hyperscript_1.h(""+tagName.toLowerCase()+elementId+elementClassName,{},[vnode])};return VNodeWrapper}();exports.VNodeWrapper=VNodeWrapper},{"./hyperscript":48,"snabbdom-selector/lib/classNameFromVNode":139,"snabbdom-selector/lib/selectorParser":140}],46:[function(require,module,exports){"use strict";var xstream_1=require("xstream");function fromEvent(element,eventName,useCapture){if(useCapture===void 0){useCapture=false}return xstream_1.Stream.create({element:element,next:null,start:function start(listener){this.next=function next(event){listener.next(event)};this.element.addEventListener(eventName,this.next,useCapture)},stop:function stop(){this.element.removeEventListener(eventName,this.next,useCapture)}})}exports.fromEvent=fromEvent},{xstream:169}],47:[function(require,module,exports){"use strict";var hyperscript_1=require("./hyperscript");function isValidString(param){return typeof param==="string"&&param.length>0}function isSelector(param){return isValidString(param)&&(param[0]==="."||param[0]==="#")}function createTagFunction(tagName){return function hyperscript(first,b,c){if(isSelector(first)){if(typeof b!=="undefined"&&typeof c!=="undefined"){return hyperscript_1.h(tagName+first,b,c)}else if(typeof b!=="undefined"){return hyperscript_1.h(tagName+first,b)}else{return hyperscript_1.h(tagName+first,{})}}else if(!!b){return hyperscript_1.h(tagName,first,b)}else if(!!first){return hyperscript_1.h(tagName,first)}else{return hyperscript_1.h(tagName,{})}}}var SVG_TAG_NAMES=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"];var svg=createTagFunction("svg");SVG_TAG_NAMES.forEach(function(tag){svg[tag]=createTagFunction(tag)});var TAG_NAMES=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","sup","table","tbody","td","textarea","tfoot","th","thead","title","tr","u","ul","video"];var exported={SVG_TAG_NAMES:SVG_TAG_NAMES,TAG_NAMES:TAG_NAMES,svg:svg,isSelector:isSelector,createTagFunction:createTagFunction};TAG_NAMES.forEach(function(n){exported[n]=createTagFunction(n)});Object.defineProperty(exports,"__esModule",{value:true});exports.default=exported},{"./hyperscript":48}],48:[function(require,module,exports){"use strict";var is=require("snabbdom/is");var vnode=require("snabbdom/vnode");function isGenericStream(x){return!Array.isArray(x)&&typeof x.map==="function"}function mutateStreamWithNS(vNode){addNS(vNode.data,vNode.children,vNode.sel);return vNode}function addNS(data,children,selector){data.ns="http://www.w3.org/2000/svg";if(selector!=="foreignObject"&&typeof children!=="undefined"&&is.array(children)){for(var i=0;i<children.length;++i){if(isGenericStream(children[i])){children[i]=children[i].map(mutateStreamWithNS)}else{addNS(children[i].data,children[i].children,children[i].sel)}}}}function h(sel,b,c){var data={};var children;var text;if(arguments.length===3){data=b;if(is.array(c)){children=c}else if(is.primitive(c)){text=c}}else if(arguments.length===2){if(is.array(b)){children=b}else if(is.primitive(b)){text=b}else{data=b}}if(is.array(children)){children=children.filter(function(x){return x});for(var i=0;i<children.length;++i){if(is.primitive(children[i])){children[i]=vnode(undefined,undefined,undefined,children[i])}}}if(sel[0]==="s"&&sel[1]==="v"&&sel[2]==="g"){addNS(data,children,sel)}return vnode(sel,data,children,text,undefined)}exports.h=h},{"snabbdom/is":150,"snabbdom/vnode":159}],49:[function(require,module,exports){"use strict";var thunk=require("snabbdom/thunk");exports.thunk=thunk;var makeDOMDriver_1=require("./makeDOMDriver");exports.makeDOMDriver=makeDOMDriver_1.makeDOMDriver;var makeHTMLDriver_1=require("./makeHTMLDriver");exports.makeHTMLDriver=makeHTMLDriver_1.makeHTMLDriver;var mockDOMSource_1=require("./mockDOMSource");exports.mockDOMSource=mockDOMSource_1.mockDOMSource;var hyperscript_1=require("./hyperscript");exports.h=hyperscript_1.h;var hyperscript_helpers_1=require("./hyperscript-helpers");exports.svg=hyperscript_helpers_1.default.svg;exports.a=hyperscript_helpers_1.default.a;exports.abbr=hyperscript_helpers_1.default.abbr;exports.address=hyperscript_helpers_1.default.address;exports.area=hyperscript_helpers_1.default.area;exports.article=hyperscript_helpers_1.default.article;exports.aside=hyperscript_helpers_1.default.aside;exports.audio=hyperscript_helpers_1.default.audio;exports.b=hyperscript_helpers_1.default.b;exports.base=hyperscript_helpers_1.default.base;exports.bdi=hyperscript_helpers_1.default.bdi;exports.bdo=hyperscript_helpers_1.default.bdo;exports.blockquote=hyperscript_helpers_1.default.blockquote;exports.body=hyperscript_helpers_1.default.body;exports.br=hyperscript_helpers_1.default.br;exports.button=hyperscript_helpers_1.default.button;exports.canvas=hyperscript_helpers_1.default.canvas;exports.caption=hyperscript_helpers_1.default.caption;exports.cite=hyperscript_helpers_1.default.cite;exports.code=hyperscript_helpers_1.default.code;exports.col=hyperscript_helpers_1.default.col;exports.colgroup=hyperscript_helpers_1.default.colgroup;exports.dd=hyperscript_helpers_1.default.dd;exports.del=hyperscript_helpers_1.default.del;exports.dfn=hyperscript_helpers_1.default.dfn;exports.dir=hyperscript_helpers_1.default.dir;exports.div=hyperscript_helpers_1.default.div;exports.dl=hyperscript_helpers_1.default.dl;exports.dt=hyperscript_helpers_1.default.dt;exports.em=hyperscript_helpers_1.default.em;exports.embed=hyperscript_helpers_1.default.embed;exports.fieldset=hyperscript_helpers_1.default.fieldset;exports.figcaption=hyperscript_helpers_1.default.figcaption;exports.figure=hyperscript_helpers_1.default.figure;exports.footer=hyperscript_helpers_1.default.footer;exports.form=hyperscript_helpers_1.default.form;exports.h1=hyperscript_helpers_1.default.h1;exports.h2=hyperscript_helpers_1.default.h2;exports.h3=hyperscript_helpers_1.default.h3;exports.h4=hyperscript_helpers_1.default.h4;exports.h5=hyperscript_helpers_1.default.h5;exports.h6=hyperscript_helpers_1.default.h6;exports.head=hyperscript_helpers_1.default.head;exports.header=hyperscript_helpers_1.default.header;exports.hgroup=hyperscript_helpers_1.default.hgroup;exports.hr=hyperscript_helpers_1.default.hr;exports.html=hyperscript_helpers_1.default.html;exports.i=hyperscript_helpers_1.default.i;exports.iframe=hyperscript_helpers_1.default.iframe;exports.img=hyperscript_helpers_1.default.img;exports.input=hyperscript_helpers_1.default.input;exports.ins=hyperscript_helpers_1.default.ins;exports.kbd=hyperscript_helpers_1.default.kbd;exports.keygen=hyperscript_helpers_1.default.keygen;exports.label=hyperscript_helpers_1.default.label;exports.legend=hyperscript_helpers_1.default.legend;exports.li=hyperscript_helpers_1.default.li;exports.link=hyperscript_helpers_1.default.link;exports.main=hyperscript_helpers_1.default.main;exports.map=hyperscript_helpers_1.default.map;exports.mark=hyperscript_helpers_1.default.mark;exports.menu=hyperscript_helpers_1.default.menu;exports.meta=hyperscript_helpers_1.default.meta;exports.nav=hyperscript_helpers_1.default.nav;exports.noscript=hyperscript_helpers_1.default.noscript;exports.object=hyperscript_helpers_1.default.object;exports.ol=hyperscript_helpers_1.default.ol;exports.optgroup=hyperscript_helpers_1.default.optgroup;exports.option=hyperscript_helpers_1.default.option;exports.p=hyperscript_helpers_1.default.p;exports.param=hyperscript_helpers_1.default.param;exports.pre=hyperscript_helpers_1.default.pre;exports.progress=hyperscript_helpers_1.default.progress;exports.q=hyperscript_helpers_1.default.q;exports.rp=hyperscript_helpers_1.default.rp;exports.rt=hyperscript_helpers_1.default.rt;exports.ruby=hyperscript_helpers_1.default.ruby;exports.s=hyperscript_helpers_1.default.s;exports.samp=hyperscript_helpers_1.default.samp;exports.script=hyperscript_helpers_1.default.script;exports.section=hyperscript_helpers_1.default.section;exports.select=hyperscript_helpers_1.default.select;exports.small=hyperscript_helpers_1.default.small;exports.source=hyperscript_helpers_1.default.source;exports.span=hyperscript_helpers_1.default.span;exports.strong=hyperscript_helpers_1.default.strong;exports.style=hyperscript_helpers_1.default.style;exports.sub=hyperscript_helpers_1.default.sub;exports.sup=hyperscript_helpers_1.default.sup;exports.table=hyperscript_helpers_1.default.table;exports.tbody=hyperscript_helpers_1.default.tbody;exports.td=hyperscript_helpers_1.default.td;exports.textarea=hyperscript_helpers_1.default.textarea;exports.tfoot=hyperscript_helpers_1.default.tfoot;exports.th=hyperscript_helpers_1.default.th;exports.thead=hyperscript_helpers_1.default.thead;exports.title=hyperscript_helpers_1.default.title;exports.tr=hyperscript_helpers_1.default.tr;exports.u=hyperscript_helpers_1.default.u;exports.ul=hyperscript_helpers_1.default.ul;exports.video=hyperscript_helpers_1.default.video},{"./hyperscript":48,"./hyperscript-helpers":47,"./makeDOMDriver":52,"./makeHTMLDriver":53,"./mockDOMSource":54,"snabbdom/thunk":158}],50:[function(require,module,exports){"use strict";var utils_1=require("./utils");function isolateSource(source,scope){return source.select(utils_1.SCOPE_PREFIX+scope)}exports.isolateSource=isolateSource;function isolateSink(sink,scope){return sink.map(function(vTree){if(vTree.data&&vTree.data.isolate){var existingScope=vTree.data.isolate.replace(/(cycle|\-)/g,"");var _scope=scope.replace(/(cycle|\-)/g,"");if(isNaN(parseInt(existingScope))||isNaN(parseInt(_scope))||existingScope>_scope){return vTree}}vTree.data=vTree.data||{};vTree.data.isolate=scope;if(typeof vTree.key==="undefined"){vTree.key=utils_1.SCOPE_PREFIX+scope}return vTree})}exports.isolateSink=isolateSink},{"./utils":57}],51:[function(require,module,exports){"use strict";var MapPolyfill=require("es6-map");var IsolateModule=function(){function IsolateModule(isolatedElements){this.isolatedElements=isolatedElements;this.eventDelegators=new MapPolyfill}IsolateModule.prototype.setScope=function(elm,scope){this.isolatedElements.set(scope,elm)};IsolateModule.prototype.removeScope=function(scope){this.isolatedElements.delete(scope)};IsolateModule.prototype.cleanupVNode=function(_a){var data=_a.data,elm=_a.elm;data=data||{};var scope=data.isolate||"";var isCurrentElm=this.isolatedElements.get(scope)===elm;if(scope&&isCurrentElm){this.removeScope(scope);if(this.eventDelegators.get(scope)){this.eventDelegators.set(scope,[])}}};IsolateModule.prototype.getIsolatedElement=function(scope){return this.isolatedElements.get(scope)};IsolateModule.prototype.isIsolatedElement=function(elm){var iterator=this.isolatedElements.entries();for(var result=iterator.next();!!result.value;result=iterator.next()){var _a=result.value,scope=_a[0],element=_a[1];if(elm===element){return scope}}return false};IsolateModule.prototype.addEventDelegator=function(scope,eventDelegator){var delegators=this.eventDelegators.get(scope);if(!delegators){delegators=[];this.eventDelegators.set(scope,delegators)}delegators[delegators.length]=eventDelegator};IsolateModule.prototype.reset=function(){this.isolatedElements.clear()};IsolateModule.prototype.createModule=function(){var self=this;return{create:function(oldVNode,vNode){var _a=oldVNode.data,oldData=_a===void 0?{}:_a;var elm=vNode.elm,_b=vNode.data,data=_b===void 0?{}:_b;var oldScope=oldData.isolate||"";var scope=data.isolate||"";if(scope){if(oldScope){self.removeScope(oldScope)}self.setScope(elm,scope);var delegators=self.eventDelegators.get(scope);if(delegators){for(var i=0,len=delegators.length;i<len;++i){delegators[i].updateTopElement(elm)}}else if(delegators===void 0){self.eventDelegators.set(scope,[])}}if(oldScope&&!scope){self.removeScope(scope)}},update:function(oldVNode,vNode){var _a=oldVNode.data,oldData=_a===void 0?{}:_a;var elm=vNode.elm,_b=vNode.data,data=_b===void 0?{}:_b;var oldScope=oldData.isolate||"";var scope=data.isolate||"";if(scope&&scope!==oldScope){if(oldScope){self.removeScope(oldScope)}self.setScope(elm,scope)}if(oldScope&&!scope){self.removeScope(scope)}},remove:function(vNode,cb){self.cleanupVNode(vNode);cb()},destroy:function(vNode){self.cleanupVNode(vNode)}}};return IsolateModule}();exports.IsolateModule=IsolateModule},{"es6-map":104}],52:[function(require,module,exports){"use strict";var snabbdom_1=require("snabbdom");var xstream_1=require("xstream");var MainDOMSource_1=require("./MainDOMSource");var VNodeWrapper_1=require("./VNodeWrapper");var utils_1=require("./utils");var modules_1=require("./modules");var isolateModule_1=require("./isolateModule");var transposition_1=require("./transposition");var xstream_adapter_1=require("@cycle/xstream-adapter");var MapPolyfill=require("es6-map");function makeDOMDriverInputGuard(modules){if(!Array.isArray(modules)){throw new Error("Optional modules option must be "+"an array for snabbdom modules")}}function domDriverInputGuard(view$){if(!view$||typeof view$.addListener!=="function"||typeof view$.fold!=="function"){throw new Error("The DOM driver function expects as input a Stream of "+"virtual DOM elements")}}function makeDOMDriver(container,options){if(!options){options={}}var transposition=options.transposition||false;var modules=options.modules||modules_1.default;var isolateModule=new isolateModule_1.IsolateModule(new MapPolyfill);var patch=snabbdom_1.init([isolateModule.createModule()].concat(modules));var rootElement=utils_1.getElement(container);var vnodeWrapper=new VNodeWrapper_1.VNodeWrapper(rootElement);var delegators=new MapPolyfill;makeDOMDriverInputGuard(modules);function DOMDriver(vnode$,runStreamAdapter,name){domDriverInputGuard(vnode$);var transposeVNode=transposition_1.makeTransposeVNode(runStreamAdapter);var preprocessedVNode$=transposition?vnode$.map(transposeVNode).flatten():vnode$;var sanitation$=xstream_1.default.create();var rootElement$=xstream_1.default.merge(preprocessedVNode$.endWhen(sanitation$),sanitation$).map(function(vnode){return vnodeWrapper.call(vnode)}).fold(patch,rootElement).drop(1).map(function unwrapElementFromVNode(vnode){return vnode.elm}).compose(function(stream){return xstream_1.default.merge(stream,xstream_1.default.never())}).startWith(rootElement);rootElement$.addListener({next:function(){},error:function(){},complete:function(){}});return new MainDOMSource_1.MainDOMSource(rootElement$,sanitation$,runStreamAdapter,[],isolateModule,delegators,name)}DOMDriver.streamAdapter=xstream_adapter_1.default;return DOMDriver}exports.makeDOMDriver=makeDOMDriver},{"./MainDOMSource":43,"./VNodeWrapper":45,"./isolateModule":51,"./modules":55,"./transposition":56,"./utils":57,"@cycle/xstream-adapter":59,"es6-map":104,snabbdom:157,xstream:169}],53:[function(require,module,exports){"use strict";var xstream_adapter_1=require("@cycle/xstream-adapter");var transposition_1=require("./transposition");var HTMLSource_1=require("./HTMLSource");var toHTML=require("snabbdom-to-html");var noop=function(){};function makeHTMLDriver(effect,options){if(!options){options={}}var transposition=options.transposition||false;function htmlDriver(vnode$,runStreamAdapter,name){var transposeVNode=transposition_1.makeTransposeVNode(runStreamAdapter);var preprocessedVNode$=transposition?vnode$.map(transposeVNode).flatten():vnode$;var html$=preprocessedVNode$.map(toHTML);html$.addListener({next:effect||noop,error:noop,complete:noop});return new HTMLSource_1.HTMLSource(html$,runStreamAdapter,name)}htmlDriver.streamAdapter=xstream_adapter_1.default;return htmlDriver}exports.makeHTMLDriver=makeHTMLDriver},{"./HTMLSource":42,"./transposition":56,"@cycle/xstream-adapter":59,"snabbdom-to-html":142}],54:[function(require,module,exports){"use strict";var xstream_adapter_1=require("@cycle/xstream-adapter");var xstream_1=require("xstream");var SCOPE_PREFIX="___";var MockedDOMSource=function(){function MockedDOMSource(_streamAdapter,_mockConfig){this._streamAdapter=_streamAdapter;this._mockConfig=_mockConfig;if(_mockConfig.elements){this._elements=_mockConfig.elements}else{this._elements=_streamAdapter.adapt(xstream_1.default.empty(),xstream_adapter_1.default.streamSubscribe)}}MockedDOMSource.prototype.elements=function(){var out=this._elements;out._isCycleSource="MockedDOM";return out};MockedDOMSource.prototype.events=function(eventType,options){var mockConfig=this._mockConfig;var keys=Object.keys(mockConfig);var keysLen=keys.length;for(var i=0;i<keysLen;i++){var key=keys[i];if(key===eventType){var out_1=mockConfig[key];out_1._isCycleSource="MockedDOM";return out_1}}var out=this._streamAdapter.adapt(xstream_1.default.empty(),xstream_adapter_1.default.streamSubscribe);out._isCycleSource="MockedDOM";return out};MockedDOMSource.prototype.select=function(selector){var mockConfig=this._mockConfig;var keys=Object.keys(mockConfig);var keysLen=keys.length;for(var i=0;i<keysLen;i++){var key=keys[i];if(key===selector){return new MockedDOMSource(this._streamAdapter,mockConfig[key])}}return new MockedDOMSource(this._streamAdapter,{})};MockedDOMSource.prototype.isolateSource=function(source,scope){return source.select("."+SCOPE_PREFIX+scope)};MockedDOMSource.prototype.isolateSink=function(sink,scope){return sink.map(function(vnode){if(vnode.sel&&vnode.sel.indexOf(SCOPE_PREFIX+scope)!==-1){return vnode}else{vnode.sel+="."+SCOPE_PREFIX+scope;return vnode}})};return MockedDOMSource}();exports.MockedDOMSource=MockedDOMSource;function mockDOMSource(streamAdapter,mockConfig){return new MockedDOMSource(streamAdapter,mockConfig)}exports.mockDOMSource=mockDOMSource},{"@cycle/xstream-adapter":59,xstream:169}],55:[function(require,module,exports){"use strict";var ClassModule=require("snabbdom/modules/class");exports.ClassModule=ClassModule;var PropsModule=require("snabbdom/modules/props");exports.PropsModule=PropsModule;var AttrsModule=require("snabbdom/modules/attributes");exports.AttrsModule=AttrsModule;var EventsModule=require("snabbdom/modules/eventlisteners");exports.EventsModule=EventsModule;var StyleModule=require("snabbdom/modules/style");exports.StyleModule=StyleModule;var HeroModule=require("snabbdom/modules/hero");exports.HeroModule=HeroModule;Object.defineProperty(exports,"__esModule",{value:true});exports.default=[StyleModule,ClassModule,PropsModule,AttrsModule]},{"snabbdom/modules/attributes":151,"snabbdom/modules/class":152,"snabbdom/modules/eventlisteners":153,"snabbdom/modules/hero":154,"snabbdom/modules/props":155,"snabbdom/modules/style":156}],56:[function(require,module,exports){"use strict";var xstream_adapter_1=require("@cycle/xstream-adapter");var xstream_1=require("xstream");function createVTree(vnode,children){return{sel:vnode.sel,data:vnode.data,text:vnode.text,elm:vnode.elm,key:vnode.key,children:children}}function makeTransposeVNode(runStreamAdapter){function internalTransposeVNode(vnode){if(!vnode){return null}else if(vnode&&vnode.data&&vnode.data.static){return xstream_1.default.of(vnode)}else if(runStreamAdapter.isValidStream(vnode)){var xsStream=xstream_adapter_1.default.adapt(vnode,runStreamAdapter.streamSubscribe);return xsStream.map(internalTransposeVNode).flatten()}else if(typeof vnode==="object"){if(!vnode.children||vnode.children.length===0){return xstream_1.default.of(vnode)}var vnodeChildren=vnode.children.map(internalTransposeVNode).filter(function(x){return x!==null});if(vnodeChildren.length===0){return xstream_1.default.of(createVTree(vnode,[]))}else{return xstream_1.default.combine.apply(xstream_1.default,vnodeChildren).map(function(children){return createVTree(vnode,children.slice())})}}else{throw new Error("Unhandled vTree Value")}}return function transposeVNode(vnode){return internalTransposeVNode(vnode)}}exports.makeTransposeVNode=makeTransposeVNode},{"@cycle/xstream-adapter":59,xstream:169}],57:[function(require,module,exports){"use strict";function isElement(obj){return typeof HTMLElement==="object"?obj instanceof HTMLElement||obj instanceof DocumentFragment:obj&&typeof obj==="object"&&obj!==null&&(obj.nodeType===1||obj.nodeType===11)&&typeof obj.nodeName==="string"}exports.SCOPE_PREFIX="$$CYCLEDOM$$-";function getElement(selectors){var domElement=typeof selectors==="string"?document.querySelector(selectors):selectors;if(typeof selectors==="string"&&domElement===null){throw new Error("Cannot render into unknown element `"+selectors+"`")}else if(!isElement(domElement)){throw new Error("Given container is not a DOM element neither a "+"selector string.")}return domElement}exports.getElement=getElement;function getScope(namespace){return namespace.filter(function(c){return c.indexOf(exports.SCOPE_PREFIX)>-1}).map(function(c){return c.replace(exports.SCOPE_PREFIX,"")}).join("-")}exports.getScope=getScope;function getSelectors(namespace){return namespace.filter(function(c){return c.indexOf(exports.SCOPE_PREFIX)===-1}).join(" ")}exports.getSelectors=getSelectors},{}],58:[function(require,module,exports){"use strict";var counter=0;function newScope(){return"cycle"+ ++counter}function checkIsolateArgs(dataflowComponent,scope){if(typeof dataflowComponent!=="function"){throw new Error("First argument given to isolate() must be a "+"'dataflowComponent' function")}if(scope===null){throw new Error("Second argument given to isolate() must not be null")}}function isolateAllSources(sources,scope){var scopedSources={};for(var key in sources){if(sources.hasOwnProperty(key)&&sources[key]&&typeof sources[key].isolateSource==="function"){scopedSources[key]=sources[key].isolateSource(sources[key],scope)}else if(sources.hasOwnProperty(key)){scopedSources[key]=sources[key]}}return scopedSources}function isolateAllSinks(sources,sinks,scope){var scopedSinks={};for(var key in sinks){if(sinks.hasOwnProperty(key)&&sources[key]&&typeof sources[key].isolateSink==="function"){scopedSinks[key]=sources[key].isolateSink(sinks[key],scope)}else if(sinks.hasOwnProperty(key)){scopedSinks[key]=sinks[key]}}return scopedSinks}function isolate(component,scope){if(scope===void 0){scope=newScope()}checkIsolateArgs(component,scope);var convertedScope=typeof scope==="string"?scope:scope.toString();return function scopedComponent(sources){var rest=[];for(var _i=1;_i<arguments.length;_i++){rest[_i-1]=arguments[_i]}var scopedSources=isolateAllSources(sources,convertedScope);var sinks=component.apply(void 0,[scopedSources].concat(rest));var scopedSinks=isolateAllSinks(sources,sinks,convertedScope);return scopedSinks}}isolate.reset=function(){return counter=0};Object.defineProperty(exports,"__esModule",{value:true});exports.default=isolate},{}],59:[function(require,module,exports){"use strict";var xstream_1=require("xstream");var XStreamAdapter={adapt:function(originStream,originStreamSubscribe){if(XStreamAdapter.isValidStream(originStream)){return originStream}var dispose=null;return xstream_1.default.create({start:function(out){var observer=out;dispose=originStreamSubscribe(originStream,observer)},stop:function(){if(typeof dispose==="function"){dispose()}}})},makeSubject:function(){var stream=xstream_1.default.create();var observer={next:function(x){stream.shamefullySendNext(x)},error:function(err){stream.shamefullySendError(err)},complete:function(){stream.shamefullySendComplete()}};return{observer:observer,stream:stream}},remember:function(stream){return stream.remember()},isValidStream:function(stream){return typeof stream.addListener==="function"&&typeof stream.shamefullySendNext==="function"},streamSubscribe:function(stream,observer){stream.addListener(observer);return function(){return stream.removeListener(observer)}}};Object.defineProperty(exports,"__esModule",{value:true});exports.default=XStreamAdapter},{xstream:169}],60:[function(require,module,exports){"use strict";var base_1=require("@cycle/base");var xstream_adapter_1=require("@cycle/xstream-adapter");function run(main,drivers){var _a=base_1.default(main,drivers,{streamAdapter:xstream_adapter_1.default}),run=_a.run,sinks=_a.sinks;if(typeof window!=="undefined"&&window["CyclejsDevTool_startGraphSerializer"]){window["CyclejsDevTool_startGraphSerializer"](sinks)}return run()}exports.run=run;var Cycle=function(main,drivers){var out=base_1.default(main,drivers,{streamAdapter:xstream_adapter_1.default});if(typeof window!=="undefined"&&window["CyclejsDevTool_startGraphSerializer"]){window["CyclejsDevTool_startGraphSerializer"](out.sinks)}return out};Cycle.run=run;Object.defineProperty(exports,"__esModule",{value:true});exports.default=Cycle},{"@cycle/base":37,"@cycle/xstream-adapter":59}],61:[function(require,module,exports){module.exports=function split(undef){var nativeSplit=String.prototype.split,compliantExecNpcg=/()??/.exec("")[1]===undef,self;self=function(str,separator,limit){if(Object.prototype.toString.call(separator)!=="[object RegExp]"){return nativeSplit.call(str,separator,limit)}var output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.extended?"x":"")+(separator.sticky?"y":""),lastLastIndex=0,separator=new RegExp(separator.source,flags+"g"),separator2,match,lastIndex,lastLength;str+="";if(!compliantExecNpcg){separator2=new RegExp("^"+separator.source+"$(?!\\s)",flags)}limit=limit===undef?-1>>>0:limit>>>0;while(match=separator.exec(str)){lastIndex=match.index+match[0].length;if(lastIndex>lastLastIndex){output.push(str.slice(lastLastIndex,match.index));if(!compliantExecNpcg&&match.length>1){match[0].replace(separator2,function(){for(var i=1;i<arguments.length-2;i++){if(arguments[i]===undef){match[i]=undef}}})}if(match.length>1&&match.index<str.length){Array.prototype.push.apply(output,match.slice(1))}lastLength=match[0].length;lastLastIndex=lastIndex;if(output.length>=limit){break}}if(separator.lastIndex===match.index){separator.lastIndex++}}if(lastLastIndex===str.length){if(lastLength||!separator.test("")){output.push("")}}else{output.push(str.slice(lastLastIndex))}return output.length>limit?output.slice(0,limit):output};return self}()},{}],62:[function(require,module,exports){"use strict";var xstream_1=require("xstream");var dropRepeats_1=require("xstream/extra/dropRepeats");function pick(selector){if(typeof selector==="string"){return function pickWithString(sinksArray$){return sinksArray$.map(function(sinksArray){return sinksArray.map(function(sinks){return sinks[selector]})})}}else{return function pickWithFunction(sinksArray$){return sinksArray$.map(function(sinksArray){return sinksArray.map(selector)})}}}exports.pick=pick;function mix(aggregator){return function mixOperator(streamArray$){return streamArray$.map(function(streamArray){return aggregator.apply(void 0,streamArray)}).flatten()}}exports.mix=mix;function updateArrayEntry(array,index,reducer){var newVal=reducer(array[index]);if(typeof newVal==="undefined"){return array.filter(function(val,i){return i!==index})}else if(newVal===array[index]){return array}else{return array.map(function(val,i){return i===index?newVal:val})}}function isolateSource(source,scope){return source.select(scope)}exports.isolateSource=isolateSource;function isolateSink(reducer$,scope){return reducer$.map(function(reducer){return function(state){var index=parseInt(scope);if(Array.isArray(state)&&typeof index==="number"){return updateArrayEntry(state,index,reducer)}else if(typeof state==="undefined"){return _a={},_a[scope]=reducer(void 0),_a}else{var prevPiece=state[scope];var nextPiece=reducer(prevPiece);if(prevPiece===nextPiece){return state}else{return Object.assign({},state,(_b={},_b[scope]=nextPiece,_b))}}var _a,_b}})}exports.isolateSink=isolateSink;var StateSource=function(){function StateSource(stream,name){this.isolateSource=isolateSource;this.isolateSink=isolateSink;this._name=name;this.state$=stream.remember();if(!name){return}this.state$._isCycleSource=name}StateSource.prototype.select=function(scope){return new StateSource(this.state$.map(function(state){return state[scope]}).filter(function(s){return!!s}),null)};return StateSource}();
exports.StateSource=StateSource;function onionify(main,name){if(name===void 0){name="onion"}return function augmentedMain(sources){var reducerMimic$=xstream_1.default.create();var state$=reducerMimic$.fold(function(state,reducer){return reducer(state)},void 0).drop(1).compose(dropRepeats_1.default());sources[name]=new StateSource(state$,name);var sinks=main(sources);reducerMimic$.imitate(sinks[name]);return sinks}}Object.defineProperty(exports,"__esModule",{value:true});exports.default=onionify},{xstream:169,"xstream/extra/dropRepeats":167}],63:[function(require,module,exports){"use strict";var copy=require("es5-ext/object/copy"),map=require("es5-ext/object/map"),callable=require("es5-ext/object/valid-callable"),validValue=require("es5-ext/object/valid-value"),bind=Function.prototype.bind,defineProperty=Object.defineProperty,hasOwnProperty=Object.prototype.hasOwnProperty,define;define=function(name,desc,bindTo){var value=validValue(desc)&&callable(desc.value),dgs;dgs=copy(desc);delete dgs.writable;delete dgs.value;dgs.get=function(){if(hasOwnProperty.call(this,name))return value;desc.value=bind.call(value,bindTo==null?this:this[bindTo]);defineProperty(this,name,desc);return this[name]};return dgs};module.exports=function(props){var bindTo=arguments[1];return map(props,function(desc,name){return define(name,desc,bindTo)})}},{"es5-ext/object/copy":77,"es5-ext/object/map":85,"es5-ext/object/valid-callable":91,"es5-ext/object/valid-value":92}],64:[function(require,module,exports){"use strict";var assign=require("es5-ext/object/assign"),normalizeOpts=require("es5-ext/object/normalize-options"),isCallable=require("es5-ext/object/is-callable"),contains=require("es5-ext/string/#/contains"),d;d=module.exports=function(dscr,value){var c,e,w,options,desc;if(arguments.length<2||typeof dscr!=="string"){options=value;value=dscr;dscr=null}else{options=arguments[2]}if(dscr==null){c=w=true;e=false}else{c=contains.call(dscr,"c");e=contains.call(dscr,"e");w=contains.call(dscr,"w")}desc={value:value,configurable:c,enumerable:e,writable:w};return!options?desc:assign(normalizeOpts(options),desc)};d.gs=function(dscr,get,set){var c,e,options,desc;if(typeof dscr!=="string"){options=set;set=get;get=dscr;dscr=null}else{options=arguments[3]}if(get==null){get=undefined}else if(!isCallable(get)){options=get;get=set=undefined}else if(set==null){set=undefined}else if(!isCallable(set)){options=set;set=undefined}if(dscr==null){c=true;e=false}else{c=contains.call(dscr,"c");e=contains.call(dscr,"e")}desc={get:get,set:set,configurable:c,enumerable:e};return!options?desc:assign(normalizeOpts(options),desc)}},{"es5-ext/object/assign":74,"es5-ext/object/is-callable":80,"es5-ext/object/normalize-options":86,"es5-ext/string/#/contains":93}],65:[function(require,module,exports){"use strict";var value=require("../../object/valid-value");module.exports=function(){value(this).length=0;return this}},{"../../object/valid-value":92}],66:[function(require,module,exports){"use strict";var toPosInt=require("../../number/to-pos-integer"),value=require("../../object/valid-value"),indexOf=Array.prototype.indexOf,hasOwnProperty=Object.prototype.hasOwnProperty,abs=Math.abs,floor=Math.floor;module.exports=function(searchElement){var i,l,fromIndex,val;if(searchElement===searchElement){return indexOf.apply(this,arguments)}l=toPosInt(value(this).length);fromIndex=arguments[1];if(isNaN(fromIndex))fromIndex=0;else if(fromIndex>=0)fromIndex=floor(fromIndex);else fromIndex=toPosInt(this.length)-floor(abs(fromIndex));for(i=fromIndex;i<l;++i){if(hasOwnProperty.call(this,i)){val=this[i];if(val!==val)return i}}return-1}},{"../../number/to-pos-integer":72,"../../object/valid-value":92}],67:[function(require,module,exports){"use strict";var toString=Object.prototype.toString,id=toString.call(function(){return arguments}());module.exports=function(x){return toString.call(x)===id}},{}],68:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Math.sign:require("./shim")},{"./is-implemented":69,"./shim":70}],69:[function(require,module,exports){"use strict";module.exports=function(){var sign=Math.sign;if(typeof sign!=="function")return false;return sign(10)===1&&sign(-20)===-1}},{}],70:[function(require,module,exports){"use strict";module.exports=function(value){value=Number(value);if(isNaN(value)||value===0)return value;return value>0?1:-1}},{}],71:[function(require,module,exports){"use strict";var sign=require("../math/sign"),abs=Math.abs,floor=Math.floor;module.exports=function(value){if(isNaN(value))return 0;value=Number(value);if(value===0||!isFinite(value))return value;return sign(value)*floor(abs(value))}},{"../math/sign":68}],72:[function(require,module,exports){"use strict";var toInteger=require("./to-integer"),max=Math.max;module.exports=function(value){return max(0,toInteger(value))}},{"./to-integer":71}],73:[function(require,module,exports){"use strict";var callable=require("./valid-callable"),value=require("./valid-value"),bind=Function.prototype.bind,call=Function.prototype.call,keys=Object.keys,propertyIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function(method,defVal){return function(obj,cb){var list,thisArg=arguments[2],compareFn=arguments[3];obj=Object(value(obj));callable(cb);list=keys(obj);if(compareFn){list.sort(typeof compareFn==="function"?bind.call(compareFn,obj):undefined)}if(typeof method!=="function")method=list[method];return call.call(method,list,function(key,index){if(!propertyIsEnumerable.call(obj,key))return defVal;return call.call(cb,thisArg,obj[key],key,obj,index)})}}},{"./valid-callable":91,"./valid-value":92}],74:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.assign:require("./shim")},{"./is-implemented":75,"./shim":76}],75:[function(require,module,exports){"use strict";module.exports=function(){var assign=Object.assign,obj;if(typeof assign!=="function")return false;obj={foo:"raz"};assign(obj,{bar:"dwa"},{trzy:"trzy"});return obj.foo+obj.bar+obj.trzy==="razdwatrzy"}},{}],76:[function(require,module,exports){"use strict";var keys=require("../keys"),value=require("../valid-value"),max=Math.max;module.exports=function(dest,src){var error,i,l=max(arguments.length,2),assign;dest=Object(value(dest));assign=function(key){try{dest[key]=src[key]}catch(e){if(!error)error=e}};for(i=1;i<l;++i){src=arguments[i];keys(src).forEach(assign)}if(error!==undefined)throw error;return dest}},{"../keys":82,"../valid-value":92}],77:[function(require,module,exports){"use strict";var assign=require("./assign"),value=require("./valid-value");module.exports=function(obj){var copy=Object(value(obj));if(copy!==obj)return copy;return assign({},obj)}},{"./assign":74,"./valid-value":92}],78:[function(require,module,exports){"use strict";var create=Object.create,shim;if(!require("./set-prototype-of/is-implemented")()){shim=require("./set-prototype-of/shim")}module.exports=function(){var nullObject,props,desc;if(!shim)return create;if(shim.level!==1)return create;nullObject={};props={};desc={configurable:false,enumerable:false,writable:true,value:undefined};Object.getOwnPropertyNames(Object.prototype).forEach(function(name){if(name==="__proto__"){props[name]={configurable:true,enumerable:false,writable:true,value:undefined};return}props[name]=desc});Object.defineProperties(nullObject,props);Object.defineProperty(shim,"nullPolyfill",{configurable:false,enumerable:false,writable:false,value:nullObject});return function(prototype,props){return create(prototype===null?nullObject:prototype,props)}}()},{"./set-prototype-of/is-implemented":89,"./set-prototype-of/shim":90}],79:[function(require,module,exports){"use strict";module.exports=require("./_iterate")("forEach")},{"./_iterate":73}],80:[function(require,module,exports){"use strict";module.exports=function(obj){return typeof obj==="function"}},{}],81:[function(require,module,exports){"use strict";var map={function:true,object:true};module.exports=function(x){return x!=null&&map[typeof x]||false}},{}],82:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.keys:require("./shim")},{"./is-implemented":83,"./shim":84}],83:[function(require,module,exports){"use strict";module.exports=function(){try{Object.keys("primitive");return true}catch(e){return false}}},{}],84:[function(require,module,exports){"use strict";var keys=Object.keys;module.exports=function(object){return keys(object==null?object:Object(object))}},{}],85:[function(require,module,exports){"use strict";var callable=require("./valid-callable"),forEach=require("./for-each"),call=Function.prototype.call;module.exports=function(obj,cb){var o={},thisArg=arguments[2];callable(cb);forEach(obj,function(value,key,obj,index){o[key]=call.call(cb,thisArg,value,key,obj,index)});return o}},{"./for-each":79,"./valid-callable":91}],86:[function(require,module,exports){"use strict";var forEach=Array.prototype.forEach,create=Object.create;var process=function(src,obj){var key;for(key in src)obj[key]=src[key]};module.exports=function(options){var result=create(null);forEach.call(arguments,function(options){if(options==null)return;process(Object(options),result)});return result}},{}],87:[function(require,module,exports){"use strict";var forEach=Array.prototype.forEach,create=Object.create;module.exports=function(arg){var set=create(null);forEach.call(arguments,function(name){set[name]=true});return set}},{}],88:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.setPrototypeOf:require("./shim")},{"./is-implemented":89,"./shim":90}],89:[function(require,module,exports){"use strict";var create=Object.create,getPrototypeOf=Object.getPrototypeOf,x={};module.exports=function(){var setPrototypeOf=Object.setPrototypeOf,customCreate=arguments[0]||create;if(typeof setPrototypeOf!=="function")return false;return getPrototypeOf(setPrototypeOf(customCreate(null),x))===x}},{}],90:[function(require,module,exports){"use strict";var isObject=require("../is-object"),value=require("../valid-value"),isPrototypeOf=Object.prototype.isPrototypeOf,defineProperty=Object.defineProperty,nullDesc={configurable:true,enumerable:false,writable:true,value:undefined},validate;validate=function(obj,prototype){value(obj);if(prototype===null||isObject(prototype))return obj;throw new TypeError("Prototype must be null or an object")};module.exports=function(status){var fn,set;if(!status)return null;if(status.level===2){if(status.set){set=status.set;fn=function(obj,prototype){set.call(validate(obj,prototype),prototype);return obj}}else{fn=function(obj,prototype){validate(obj,prototype).__proto__=prototype;return obj}}}else{fn=function self(obj,prototype){var isNullBase;validate(obj,prototype);isNullBase=isPrototypeOf.call(self.nullPolyfill,obj);if(isNullBase)delete self.nullPolyfill.__proto__;if(prototype===null)prototype=self.nullPolyfill;obj.__proto__=prototype;if(isNullBase)defineProperty(self.nullPolyfill,"__proto__",nullDesc);return obj}}return Object.defineProperty(fn,"level",{configurable:false,enumerable:false,writable:false,value:status.level})}(function(){var x=Object.create(null),y={},set,desc=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(desc){try{set=desc.set;set.call(x,y)}catch(ignore){}if(Object.getPrototypeOf(x)===y)return{set:set,level:2}}x.__proto__=y;if(Object.getPrototypeOf(x)===y)return{level:2};x={};x.__proto__=y;if(Object.getPrototypeOf(x)===y)return{level:1};return false}());require("../create")},{"../create":78,"../is-object":81,"../valid-value":92}],91:[function(require,module,exports){"use strict";module.exports=function(fn){if(typeof fn!=="function")throw new TypeError(fn+" is not a function");return fn}},{}],92:[function(require,module,exports){"use strict";module.exports=function(value){if(value==null)throw new TypeError("Cannot use null or undefined");return value}},{}],93:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?String.prototype.contains:require("./shim")},{"./is-implemented":94,"./shim":95}],94:[function(require,module,exports){"use strict";var str="razdwatrzy";module.exports=function(){if(typeof str.contains!=="function")return false;return str.contains("dwa")===true&&str.contains("foo")===false}},{}],95:[function(require,module,exports){"use strict";var indexOf=String.prototype.indexOf;module.exports=function(searchString){return indexOf.call(this,searchString,arguments[1])>-1}},{}],96:[function(require,module,exports){"use strict";var toString=Object.prototype.toString,id=toString.call("");module.exports=function(x){return typeof x==="string"||x&&typeof x==="object"&&(x instanceof String||toString.call(x)===id)||false}},{}],97:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),contains=require("es5-ext/string/#/contains"),d=require("d"),Iterator=require("./"),defineProperty=Object.defineProperty,ArrayIterator;ArrayIterator=module.exports=function(arr,kind){if(!(this instanceof ArrayIterator))return new ArrayIterator(arr,kind);Iterator.call(this,arr);if(!kind)kind="value";else if(contains.call(kind,"key+value"))kind="key+value";else if(contains.call(kind,"key"))kind="key";else kind="value";defineProperty(this,"__kind__",d("",kind))};if(setPrototypeOf)setPrototypeOf(ArrayIterator,Iterator);ArrayIterator.prototype=Object.create(Iterator.prototype,{constructor:d(ArrayIterator),_resolve:d(function(i){if(this.__kind__==="value")return this.__list__[i];if(this.__kind__==="key+value")return[i,this.__list__[i]];return i}),toString:d(function(){return"[object Array Iterator]"})})},{"./":100,d:64,"es5-ext/object/set-prototype-of":88,"es5-ext/string/#/contains":93}],98:[function(require,module,exports){"use strict";var isArguments=require("es5-ext/function/is-arguments"),callable=require("es5-ext/object/valid-callable"),isString=require("es5-ext/string/is-string"),get=require("./get"),isArray=Array.isArray,call=Function.prototype.call,some=Array.prototype.some;module.exports=function(iterable,cb){var mode,thisArg=arguments[2],result,doBreak,broken,i,l,char,code;if(isArray(iterable)||isArguments(iterable))mode="array";else if(isString(iterable))mode="string";else iterable=get(iterable);callable(cb);doBreak=function(){broken=true};if(mode==="array"){some.call(iterable,function(value){call.call(cb,thisArg,value,doBreak);if(broken)return true});return}if(mode==="string"){l=iterable.length;for(i=0;i<l;++i){char=iterable[i];if(i+1<l){code=char.charCodeAt(0);if(code>=55296&&code<=56319)char+=iterable[++i]}call.call(cb,thisArg,char,doBreak);if(broken)break}return}result=iterable.next();while(!result.done){call.call(cb,thisArg,result.value,doBreak);if(broken)return;result=iterable.next()}}},{"./get":99,"es5-ext/function/is-arguments":67,"es5-ext/object/valid-callable":91,"es5-ext/string/is-string":96}],99:[function(require,module,exports){"use strict";var isArguments=require("es5-ext/function/is-arguments"),isString=require("es5-ext/string/is-string"),ArrayIterator=require("./array"),StringIterator=require("./string"),iterable=require("./valid-iterable"),iteratorSymbol=require("es6-symbol").iterator;module.exports=function(obj){if(typeof iterable(obj)[iteratorSymbol]==="function")return obj[iteratorSymbol]();if(isArguments(obj))return new ArrayIterator(obj);if(isString(obj))return new StringIterator(obj);return new ArrayIterator(obj)}},{"./array":97,"./string":102,"./valid-iterable":103,"es5-ext/function/is-arguments":67,"es5-ext/string/is-string":96,"es6-symbol":110}],100:[function(require,module,exports){"use strict";var clear=require("es5-ext/array/#/clear"),assign=require("es5-ext/object/assign"),callable=require("es5-ext/object/valid-callable"),value=require("es5-ext/object/valid-value"),d=require("d"),autoBind=require("d/auto-bind"),Symbol=require("es6-symbol"),defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,Iterator;module.exports=Iterator=function(list,context){if(!(this instanceof Iterator))return new Iterator(list,context);defineProperties(this,{__list__:d("w",value(list)),__context__:d("w",context),__nextIndex__:d("w",0)});if(!context)return;callable(context.on);context.on("_add",this._onAdd);context.on("_delete",this._onDelete);context.on("_clear",this._onClear)};defineProperties(Iterator.prototype,assign({constructor:d(Iterator),_next:d(function(){var i;if(!this.__list__)return;if(this.__redo__){i=this.__redo__.shift();if(i!==undefined)return i}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}),next:d(function(){return this._createResult(this._next())}),_createResult:d(function(i){if(i===undefined)return{done:true,value:undefined};return{done:false,value:this._resolve(i)}}),_resolve:d(function(i){return this.__list__[i]}),_unBind:d(function(){this.__list__=null;delete this.__redo__;if(!this.__context__)return;this.__context__.off("_add",this._onAdd);this.__context__.off("_delete",this._onDelete);this.__context__.off("_clear",this._onClear);this.__context__=null}),toString:d(function(){return"[object Iterator]"})},autoBind({_onAdd:d(function(index){if(index>=this.__nextIndex__)return;++this.__nextIndex__;if(!this.__redo__){defineProperty(this,"__redo__",d("c",[index]));return}this.__redo__.forEach(function(redo,i){if(redo>=index)this.__redo__[i]=++redo},this);this.__redo__.push(index)}),_onDelete:d(function(index){var i;if(index>=this.__nextIndex__)return;--this.__nextIndex__;if(!this.__redo__)return;i=this.__redo__.indexOf(index);if(i!==-1)this.__redo__.splice(i,1);this.__redo__.forEach(function(redo,i){if(redo>index)this.__redo__[i]=--redo},this)}),_onClear:d(function(){if(this.__redo__)clear.call(this.__redo__);this.__nextIndex__=0})})));defineProperty(Iterator.prototype,Symbol.iterator,d(function(){return this}));defineProperty(Iterator.prototype,Symbol.toStringTag,d("","Iterator"))},{d:64,"d/auto-bind":63,"es5-ext/array/#/clear":65,"es5-ext/object/assign":74,"es5-ext/object/valid-callable":91,"es5-ext/object/valid-value":92,"es6-symbol":110}],101:[function(require,module,exports){"use strict";var isArguments=require("es5-ext/function/is-arguments"),isString=require("es5-ext/string/is-string"),iteratorSymbol=require("es6-symbol").iterator,isArray=Array.isArray;module.exports=function(value){if(value==null)return false;if(isArray(value))return true;if(isString(value))return true;if(isArguments(value))return true;return typeof value[iteratorSymbol]==="function"}},{"es5-ext/function/is-arguments":67,"es5-ext/string/is-string":96,"es6-symbol":110}],102:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),d=require("d"),Iterator=require("./"),defineProperty=Object.defineProperty,StringIterator;StringIterator=module.exports=function(str){if(!(this instanceof StringIterator))return new StringIterator(str);str=String(str);Iterator.call(this,str);defineProperty(this,"__length__",d("",str.length))};if(setPrototypeOf)setPrototypeOf(StringIterator,Iterator);StringIterator.prototype=Object.create(Iterator.prototype,{constructor:d(StringIterator),_next:d(function(){if(!this.__list__)return;if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}),_resolve:d(function(i){var char=this.__list__[i],code;if(this.__nextIndex__===this.__length__)return char;code=char.charCodeAt(0);if(code>=55296&&code<=56319)return char+this.__list__[this.__nextIndex__++];return char}),toString:d(function(){return"[object String Iterator]"})})},{"./":100,d:64,"es5-ext/object/set-prototype-of":88}],103:[function(require,module,exports){"use strict";var isIterable=require("./is-iterable");module.exports=function(value){if(!isIterable(value))throw new TypeError(value+" is not iterable");return value}},{"./is-iterable":101}],104:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Map:require("./polyfill")},{"./is-implemented":105,"./polyfill":109}],105:[function(require,module,exports){"use strict";module.exports=function(){var map,iterator,result;if(typeof Map!=="function")return false;try{map=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return false}if(String(map)!=="[object Map]")return false;if(map.size!==3)return false;if(typeof map.clear!=="function")return false;if(typeof map.delete!=="function")return false;if(typeof map.entries!=="function")return false;if(typeof map.forEach!=="function")return false;if(typeof map.get!=="function")return false;if(typeof map.has!=="function")return false;if(typeof map.keys!=="function")return false;if(typeof map.set!=="function")return false;if(typeof map.values!=="function")return false;iterator=map.entries();result=iterator.next();if(result.done!==false)return false;if(!result.value)return false;if(result.value[0]!=="raz")return false;if(result.value[1]!=="one")return false;return true}},{}],106:[function(require,module,exports){"use strict";module.exports=function(){if(typeof Map==="undefined")return false;return Object.prototype.toString.call(new Map)==="[object Map]"}()},{}],107:[function(require,module,exports){"use strict";module.exports=require("es5-ext/object/primitive-set")("key","value","key+value")},{"es5-ext/object/primitive-set":87}],108:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),d=require("d"),Iterator=require("es6-iterator"),toStringTagSymbol=require("es6-symbol").toStringTag,kinds=require("./iterator-kinds"),defineProperties=Object.defineProperties,unBind=Iterator.prototype._unBind,MapIterator;MapIterator=module.exports=function(map,kind){if(!(this instanceof MapIterator))return new MapIterator(map,kind);Iterator.call(this,map.__mapKeysData__,map);if(!kind||!kinds[kind])kind="key+value";defineProperties(this,{__kind__:d("",kind),__values__:d("w",map.__mapValuesData__)})};if(setPrototypeOf)setPrototypeOf(MapIterator,Iterator);MapIterator.prototype=Object.create(Iterator.prototype,{constructor:d(MapIterator),_resolve:d(function(i){if(this.__kind__==="value")return this.__values__[i];if(this.__kind__==="key")return this.__list__[i];return[this.__list__[i],this.__values__[i]]}),_unBind:d(function(){this.__values__=null;unBind.call(this)}),toString:d(function(){return"[object Map Iterator]"})});Object.defineProperty(MapIterator.prototype,toStringTagSymbol,d("c","Map Iterator"))},{"./iterator-kinds":107,d:64,"es5-ext/object/set-prototype-of":88,"es6-iterator":100,"es6-symbol":110}],109:[function(require,module,exports){"use strict";var clear=require("es5-ext/array/#/clear"),eIndexOf=require("es5-ext/array/#/e-index-of"),setPrototypeOf=require("es5-ext/object/set-prototype-of"),callable=require("es5-ext/object/valid-callable"),validValue=require("es5-ext/object/valid-value"),d=require("d"),ee=require("event-emitter"),Symbol=require("es6-symbol"),iterator=require("es6-iterator/valid-iterable"),forOf=require("es6-iterator/for-of"),Iterator=require("./lib/iterator"),isNative=require("./is-native-implemented"),call=Function.prototype.call,defineProperties=Object.defineProperties,getPrototypeOf=Object.getPrototypeOf,MapPoly;module.exports=MapPoly=function(){var iterable=arguments[0],keys,values,self;if(!(this instanceof MapPoly))throw new TypeError("Constructor requires 'new'");if(isNative&&setPrototypeOf&&Map!==MapPoly){self=setPrototypeOf(new Map,getPrototypeOf(this))}else{self=this}if(iterable!=null)iterator(iterable);defineProperties(self,{__mapKeysData__:d("c",keys=[]),__mapValuesData__:d("c",values=[])});if(!iterable)return self;forOf(iterable,function(value){var key=validValue(value)[0];value=value[1];if(eIndexOf.call(keys,key)!==-1)return;keys.push(key);values.push(value)},self);return self};if(isNative){if(setPrototypeOf)setPrototypeOf(MapPoly,Map);MapPoly.prototype=Object.create(Map.prototype,{constructor:d(MapPoly)})}ee(defineProperties(MapPoly.prototype,{clear:d(function(){if(!this.__mapKeysData__.length)return;clear.call(this.__mapKeysData__);clear.call(this.__mapValuesData__);this.emit("_clear")}),delete:d(function(key){var index=eIndexOf.call(this.__mapKeysData__,key);if(index===-1)return false;this.__mapKeysData__.splice(index,1);this.__mapValuesData__.splice(index,1);this.emit("_delete",index,key);return true}),entries:d(function(){return new Iterator(this,"key+value")}),forEach:d(function(cb){var thisArg=arguments[1],iterator,result;callable(cb);iterator=this.entries();result=iterator._next();while(result!==undefined){call.call(cb,thisArg,this.__mapValuesData__[result],this.__mapKeysData__[result],this);result=iterator._next()}}),get:d(function(key){var index=eIndexOf.call(this.__mapKeysData__,key);if(index===-1)return;return this.__mapValuesData__[index]}),has:d(function(key){return eIndexOf.call(this.__mapKeysData__,key)!==-1}),keys:d(function(){return new Iterator(this,"key")}),set:d(function(key,value){var index=eIndexOf.call(this.__mapKeysData__,key),emit;if(index===-1){index=this.__mapKeysData__.push(key)-1;emit=true}this.__mapValuesData__[index]=value;if(emit)this.emit("_add",index,key);return this}),size:d.gs(function(){return this.__mapKeysData__.length}),values:d(function(){return new Iterator(this,"value")}),toString:d(function(){return"[object Map]"})}));Object.defineProperty(MapPoly.prototype,Symbol.iterator,d(function(){return this.entries()}));Object.defineProperty(MapPoly.prototype,Symbol.toStringTag,d("c","Map"))},{"./is-native-implemented":106,"./lib/iterator":108,d:64,"es5-ext/array/#/clear":65,"es5-ext/array/#/e-index-of":66,"es5-ext/object/set-prototype-of":88,"es5-ext/object/valid-callable":91,"es5-ext/object/valid-value":92,"es6-iterator/for-of":98,"es6-iterator/valid-iterable":103,"es6-symbol":110,"event-emitter":115}],110:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Symbol:require("./polyfill")},{"./is-implemented":111,"./polyfill":113}],111:[function(require,module,exports){"use strict";var validTypes={object:true,symbol:true};module.exports=function(){var symbol;if(typeof Symbol!=="function")return false;symbol=Symbol("test symbol");try{String(symbol)}catch(e){return false}if(!validTypes[typeof Symbol.iterator])return false;if(!validTypes[typeof Symbol.toPrimitive])return false;if(!validTypes[typeof Symbol.toStringTag])return false;return true}},{}],112:[function(require,module,exports){"use strict";module.exports=function(x){if(!x)return false;if(typeof x==="symbol")return true;if(!x.constructor)return false;if(x.constructor.name!=="Symbol")return false;return x[x.constructor.toStringTag]==="Symbol"}},{}],113:[function(require,module,exports){"use strict";var d=require("d"),validateSymbol=require("./validate-symbol"),create=Object.create,defineProperties=Object.defineProperties,defineProperty=Object.defineProperty,objPrototype=Object.prototype,NativeSymbol,SymbolPolyfill,HiddenSymbol,globalSymbols=create(null),isNativeSafe;if(typeof Symbol==="function"){NativeSymbol=Symbol;try{String(NativeSymbol());isNativeSafe=true}catch(ignore){}}var generateName=function(){var created=create(null);return function(desc){var postfix=0,name,ie11BugWorkaround;while(created[desc+(postfix||"")])++postfix;desc+=postfix||"";created[desc]=true;name="@@"+desc;defineProperty(objPrototype,name,d.gs(null,function(value){if(ie11BugWorkaround)return;ie11BugWorkaround=true;defineProperty(this,name,d(value));ie11BugWorkaround=false}));return name}}();HiddenSymbol=function Symbol(description){if(this instanceof HiddenSymbol)throw new TypeError("TypeError: Symbol is not a constructor");return SymbolPolyfill(description)};module.exports=SymbolPolyfill=function Symbol(description){var symbol;if(this instanceof Symbol)throw new TypeError("TypeError: Symbol is not a constructor");if(isNativeSafe)return NativeSymbol(description);symbol=create(HiddenSymbol.prototype);description=description===undefined?"":String(description);return defineProperties(symbol,{__description__:d("",description),__name__:d("",generateName(description))})};defineProperties(SymbolPolyfill,{for:d(function(key){if(globalSymbols[key])return globalSymbols[key];return globalSymbols[key]=SymbolPolyfill(String(key))}),keyFor:d(function(s){var key;validateSymbol(s);for(key in globalSymbols)if(globalSymbols[key]===s)return key}),hasInstance:d("",NativeSymbol&&NativeSymbol.hasInstance||SymbolPolyfill("hasInstance")),isConcatSpreadable:d("",NativeSymbol&&NativeSymbol.isConcatSpreadable||SymbolPolyfill("isConcatSpreadable")),iterator:d("",NativeSymbol&&NativeSymbol.iterator||SymbolPolyfill("iterator")),match:d("",NativeSymbol&&NativeSymbol.match||SymbolPolyfill("match")),replace:d("",NativeSymbol&&NativeSymbol.replace||SymbolPolyfill("replace")),search:d("",NativeSymbol&&NativeSymbol.search||SymbolPolyfill("search")),species:d("",NativeSymbol&&NativeSymbol.species||SymbolPolyfill("species")),split:d("",NativeSymbol&&NativeSymbol.split||SymbolPolyfill("split")),toPrimitive:d("",NativeSymbol&&NativeSymbol.toPrimitive||SymbolPolyfill("toPrimitive")),toStringTag:d("",NativeSymbol&&NativeSymbol.toStringTag||SymbolPolyfill("toStringTag")),unscopables:d("",NativeSymbol&&NativeSymbol.unscopables||SymbolPolyfill("unscopables"))});defineProperties(HiddenSymbol.prototype,{constructor:d(SymbolPolyfill),toString:d("",function(){return this.__name__})});defineProperties(SymbolPolyfill.prototype,{toString:d(function(){return"Symbol ("+validateSymbol(this).__description__+")"}),valueOf:d(function(){return validateSymbol(this)})});defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toPrimitive,d("",function(){var symbol=validateSymbol(this);if(typeof symbol==="symbol")return symbol;return symbol.toString()}));defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toStringTag,d("c","Symbol"));defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toStringTag,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toStringTag]));defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toPrimitive,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive]))},{"./validate-symbol":114,d:64}],114:[function(require,module,exports){"use strict";var isSymbol=require("./is-symbol");module.exports=function(value){if(!isSymbol(value))throw new TypeError(value+" is not a symbol");return value}},{"./is-symbol":112}],115:[function(require,module,exports){"use strict";var d=require("d"),callable=require("es5-ext/object/valid-callable"),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,hasOwnProperty=Object.prototype.hasOwnProperty,descriptor={configurable:true,enumerable:false,writable:true},on,once,off,emit,methods,descriptors,base;on=function(type,listener){var data;callable(listener);if(!hasOwnProperty.call(this,"__ee__")){data=descriptor.value=create(null);defineProperty(this,"__ee__",descriptor);descriptor.value=null}else{data=this.__ee__}if(!data[type])data[type]=listener;else if(typeof data[type]==="object")data[type].push(listener);else data[type]=[data[type],listener];return this};once=function(type,listener){var once,self;callable(listener);self=this;on.call(this,type,once=function(){off.call(self,type,once);apply.call(listener,this,arguments)});once.__eeOnceListener__=listener;return this};off=function(type,listener){var data,listeners,candidate,i;callable(listener);if(!hasOwnProperty.call(this,"__ee__"))return this;data=this.__ee__;if(!data[type])return this;listeners=data[type];if(typeof listeners==="object"){for(i=0;candidate=listeners[i];++i){if(candidate===listener||candidate.__eeOnceListener__===listener){if(listeners.length===2)data[type]=listeners[i?0:1];else listeners.splice(i,1)}}}else{if(listeners===listener||listeners.__eeOnceListener__===listener){delete data[type]}}return this};emit=function(type){var i,l,listener,listeners,args;if(!hasOwnProperty.call(this,"__ee__"))return;listeners=this.__ee__[type];if(!listeners)return;if(typeof listeners==="object"){l=arguments.length;
args=new Array(l-1);for(i=1;i<l;++i)args[i-1]=arguments[i];listeners=listeners.slice();for(i=0;listener=listeners[i];++i){apply.call(listener,this,args)}}else{switch(arguments.length){case 1:call.call(listeners,this);break;case 2:call.call(listeners,this,arguments[1]);break;case 3:call.call(listeners,this,arguments[1],arguments[2]);break;default:l=arguments.length;args=new Array(l-1);for(i=1;i<l;++i){args[i-1]=arguments[i]}apply.call(listeners,this,args)}}};methods={on:on,once:once,off:off,emit:emit};descriptors={on:d(on),once:d(once),off:d(off),emit:d(emit)};base=defineProperties({},descriptors);module.exports=exports=function(o){return o==null?create(base):defineProperties(Object(o),descriptors)};exports.methods=methods},{d:64,"es5-ext/object/valid-callable":91}],116:[function(require,module,exports){(function(process){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var instanceId=0;var CSS_NUMBER={"box-flex":true,"box-flex-group":true,"column-count":true,flex:true,"flex-grow":true,"flex-positive":true,"flex-shrink":true,"flex-negative":true,"font-weight":true,"line-clamp":true,"line-height":true,opacity:true,order:true,orphans:true,"tab-size":true,widows:true,"z-index":true,zoom:true,"fill-opacity":true,"stroke-dashoffset":true,"stroke-opacity":true,"stroke-width":true};for(var _i=0,_a=["-webkit-","-ms-","-moz-","-o-"];_i<_a.length;_i++){var prefix=_a[_i];for(var _b=0,_c=Object.keys(CSS_NUMBER);_b<_c.length;_b++){var property=_c[_b];CSS_NUMBER[prefix+property]=true}}function hyphenate(propertyName){return propertyName.replace(/([A-Z])/g,"-$1").replace(/^ms-/,"-ms-").toLowerCase()}function isAtRule(propertyName){return propertyName.charAt(0)==="@"}function isNestedStyle(value){return value!=null&&typeof value==="object"&&!Array.isArray(value)}function stringHash(str){var value=5381;var i=str.length;while(i){value=value*33^str.charCodeAt(--i)}return(value>>>0).toString(36)}exports.stringHash=stringHash;function styleToString(name,value){if(typeof value==="number"&&value!==0&&!CSS_NUMBER[name]){value+="px"}return name+":"+String(value).replace(/([\{\}\[\]])/g,"\\$1")}function sortTuples(value){return value.sort(function(a,b){return a[0]>b[0]?1:-1})}function parseUserStyles(styles,hasNestedStyles){var properties=[];var nestedStyles=[];for(var _i=0,_a=Object.keys(styles);_i<_a.length;_i++){var key=_a[_i];var value=styles[key];if(isNestedStyle(value)){nestedStyles.push([key.trim(),value])}else{properties.push([hyphenate(key.trim()),value])}}return{properties:sortTuples(properties),nestedStyles:hasNestedStyles?nestedStyles:sortTuples(nestedStyles)}}function stringifyProperties(properties){var result=[];var _loop_1=function(name_1,value){if(value!=null){if(Array.isArray(value)){result.push(value.filter(function(x){return x!=null}).map(function(x){return styleToString(name_1,x)}).join(";"))}else{result.push(styleToString(name_1,value))}}};for(var _i=0,properties_1=properties;_i<properties_1.length;_i++){var _a=properties_1[_i],name_1=_a[0],value=_a[1];_loop_1(name_1,value)}return result.join(";")}function interpolate(selector,parent){if(selector.indexOf("&")>-1){return selector.replace(/&/g,parent)}return parent+" "+selector}function collectHashedStyles(container,userStyles,isStyle,displayName){var styles=[];function stylize(cache,userStyles,selector){var _a=parseUserStyles(userStyles,isStyle),properties=_a.properties,nestedStyles=_a.nestedStyles;var styleString=stringifyProperties(properties);var pid=styleString;if(styleString){var style=new Style(styleString,cache.hash);cache.add(style);styles.push([cache,selector,style])}for(var _i=0,nestedStyles_1=nestedStyles;_i<nestedStyles_1.length;_i++){var _b=nestedStyles_1[_i],name_2=_b[0],value=_b[1];pid+=name_2;if(isAtRule(name_2)){var rule=cache.add(new Rule(name_2,undefined,cache.hash));pid+=stylize(rule,value,selector)}else{pid+=stylize(cache,value,isStyle?interpolate(name_2,selector):name_2)}}return pid}var cache=new Cache(container.hash);var pid=stylize(cache,userStyles,"&");var hash="f"+cache.hash(pid);var id=displayName?displayName+"_"+hash:hash;for(var _i=0,styles_1=styles;_i<styles_1.length;_i++){var _a=styles_1[_i],cache_1=_a[0],selector=_a[1],style=_a[2];var key=isStyle?interpolate(selector,"."+id):selector;cache_1.get(style).add(new Selector(key,style.hash,undefined,pid))}container.merge(cache);return{pid:pid,id:id}}function registerUserStyles(container,styles,displayName){return collectHashedStyles(container,styles,true,displayName).id}function registerUserRule(container,selector,styles){var _a=parseUserStyles(styles,false),properties=_a.properties,nestedStyles=_a.nestedStyles;if(properties.length&&nestedStyles.length){throw new TypeError("Registering a CSS rule can not use properties with nested styles")}var styleString=stringifyProperties(properties);var rule=new Rule(selector,styleString,container.hash);for(var _i=0,nestedStyles_2=nestedStyles;_i<nestedStyles_2.length;_i++){var _b=nestedStyles_2[_i],name_3=_b[0],value=_b[1];registerUserRule(rule,name_3,value)}container.add(rule)}function registerUserHashedRule(container,prefix,styles,displayName){var bucket=new Cache(container.hash);var _a=collectHashedStyles(bucket,styles,false,displayName),pid=_a.pid,id=_a.id;var atRule=new Rule(prefix+" "+id,undefined,container.hash,undefined,pid);atRule.merge(bucket);container.add(atRule);return id}function getStyles(container){return container.values().map(function(style){return style.getStyles()}).join("")}var Cache=function(){function Cache(hash){this.hash=hash;this.changeId=0;this._children={};this._keys=[];this._counts={}}Cache.prototype.values=function(){var _this=this;return this._keys.map(function(x){return _this._children[x]})};Cache.prototype.add=function(style){var count=this._counts[style.id]||0;var item=this._children[style.id]||style.clone();this._counts[style.id]=count+1;if(count===0){this._keys.push(item.id);this._children[item.id]=item;this.changeId++}else{if(item.getIdentifier()!==style.getIdentifier()){throw new TypeError("Hash collision: "+style.getStyles()+" === "+item.getStyles())}this._keys.splice(this._keys.indexOf(style.id),1);this._keys.push(style.id);if(item instanceof Cache&&style instanceof Cache){var prevChangeId=item.changeId;item.merge(style);if(item.changeId!==prevChangeId){this.changeId++}}}return item};Cache.prototype.remove=function(style){var count=this._counts[style.id];if(count>0){this._counts[style.id]=count-1;var item=this._children[style.id];if(count===1){delete this._counts[style.id];delete this._children[style.id];this._keys.splice(this._keys.indexOf(style.id),1);this.changeId++}else if(item instanceof Cache&&style instanceof Cache){var prevChangeId=item.changeId;item.unmerge(style);if(item.changeId!==prevChangeId){this.changeId++}}}};Cache.prototype.get=function(container){return this._children[container.id]};Cache.prototype.merge=function(cache){for(var _i=0,_a=cache.values();_i<_a.length;_i++){var value=_a[_i];this.add(value)}return this};Cache.prototype.unmerge=function(cache){for(var _i=0,_a=cache.values();_i<_a.length;_i++){var value=_a[_i];this.remove(value)}return this};Cache.prototype.clone=function(){return new Cache(this.hash).merge(this)};return Cache}();exports.Cache=Cache;var Selector=function(){function Selector(selector,hash,id,pid){if(id===void 0){id="s"+hash(selector)}if(pid===void 0){pid=""}this.selector=selector;this.hash=hash;this.id=id;this.pid=pid}Selector.prototype.getStyles=function(){return this.selector};Selector.prototype.getIdentifier=function(){return this.pid+"."+this.selector};Selector.prototype.clone=function(){return new Selector(this.selector,this.hash,this.id,this.pid)};return Selector}();exports.Selector=Selector;var Style=function(_super){__extends(Style,_super);function Style(style,hash,id){if(id===void 0){id="c"+hash(style)}_super.call(this,hash);this.style=style;this.hash=hash;this.id=id}Style.prototype.getStyles=function(){return this.values().map(function(x){return x.selector}).join(",")+"{"+this.style+"}"};Style.prototype.getIdentifier=function(){return this.style};Style.prototype.clone=function(){return new Style(this.style,this.hash,this.id).merge(this)};return Style}(Cache);exports.Style=Style;var Rule=function(_super){__extends(Rule,_super);function Rule(rule,style,hash,id,pid){if(style===void 0){style=""}if(id===void 0){id="a"+hash(rule+"."+style)}if(pid===void 0){pid=""}_super.call(this,hash);this.rule=rule;this.style=style;this.hash=hash;this.id=id;this.pid=pid}Rule.prototype.getStyles=function(){return this.rule+"{"+this.style+getStyles(this)+"}"};Rule.prototype.getIdentifier=function(){return this.pid+"."+this.rule+"."+this.style};Rule.prototype.clone=function(){return new Rule(this.rule,this.style,this.hash,this.id,this.pid).merge(this)};return Rule}(Cache);exports.Rule=Rule;var FreeStyle=function(_super){__extends(FreeStyle,_super);function FreeStyle(hash,debug,id){if(id===void 0){id="f"+(++instanceId).toString(36)}_super.call(this,hash);this.hash=hash;this.debug=debug;this.id=id}FreeStyle.prototype.registerStyle=function(styles,displayName){return registerUserStyles(this,styles,this.debug?displayName:undefined)};FreeStyle.prototype.registerKeyframes=function(keyframes,displayName){return registerUserHashedRule(this,"@keyframes",keyframes,this.debug?displayName:undefined)};FreeStyle.prototype.registerRule=function(rule,styles){return registerUserRule(this,rule,styles)};FreeStyle.prototype.getStyles=function(){return getStyles(this)};FreeStyle.prototype.getIdentifier=function(){return this.id};FreeStyle.prototype.clone=function(){return new FreeStyle(this.hash,this.debug,this.id).merge(this)};return FreeStyle}(Cache);exports.FreeStyle=FreeStyle;function create(hash,debug){if(hash===void 0){hash=stringHash}if(debug===void 0){debug=process.env.NODE_ENV!=="production"}return new FreeStyle(hash,debug)}exports.create=create}).call(this,require("_process"))},{_process:138}],117:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.Immutable=factory()})(this,function(){"use strict";var SLICE$0=Array.prototype.slice;function createClass(ctor,superClass){if(superClass){ctor.prototype=Object.create(superClass.prototype)}ctor.prototype.constructor=ctor}function Iterable(value){return isIterable(value)?value:Seq(value)}createClass(KeyedIterable,Iterable);function KeyedIterable(value){return isKeyed(value)?value:KeyedSeq(value)}createClass(IndexedIterable,Iterable);function IndexedIterable(value){return isIndexed(value)?value:IndexedSeq(value)}createClass(SetIterable,Iterable);function SetIterable(value){return isIterable(value)&&!isAssociative(value)?value:SetSeq(value)}function isIterable(maybeIterable){return!!(maybeIterable&&maybeIterable[IS_ITERABLE_SENTINEL])}function isKeyed(maybeKeyed){return!!(maybeKeyed&&maybeKeyed[IS_KEYED_SENTINEL])}function isIndexed(maybeIndexed){return!!(maybeIndexed&&maybeIndexed[IS_INDEXED_SENTINEL])}function isAssociative(maybeAssociative){return isKeyed(maybeAssociative)||isIndexed(maybeAssociative)}function isOrdered(maybeOrdered){return!!(maybeOrdered&&maybeOrdered[IS_ORDERED_SENTINEL])}Iterable.isIterable=isIterable;Iterable.isKeyed=isKeyed;Iterable.isIndexed=isIndexed;Iterable.isAssociative=isAssociative;Iterable.isOrdered=isOrdered;Iterable.Keyed=KeyedIterable;Iterable.Indexed=IndexedIterable;Iterable.Set=SetIterable;var IS_ITERABLE_SENTINEL="@@__IMMUTABLE_ITERABLE__@@";var IS_KEYED_SENTINEL="@@__IMMUTABLE_KEYED__@@";var IS_INDEXED_SENTINEL="@@__IMMUTABLE_INDEXED__@@";var IS_ORDERED_SENTINEL="@@__IMMUTABLE_ORDERED__@@";var DELETE="delete";var SHIFT=5;var SIZE=1<<SHIFT;var MASK=SIZE-1;var NOT_SET={};var CHANGE_LENGTH={value:false};var DID_ALTER={value:false};function MakeRef(ref){ref.value=false;return ref}function SetRef(ref){ref&&(ref.value=true)}function OwnerID(){}function arrCopy(arr,offset){offset=offset||0;var len=Math.max(0,arr.length-offset);var newArr=new Array(len);for(var ii=0;ii<len;ii++){newArr[ii]=arr[ii+offset]}return newArr}function ensureSize(iter){if(iter.size===undefined){iter.size=iter.__iterate(returnTrue)}return iter.size}function wrapIndex(iter,index){if(typeof index!=="number"){var uint32Index=index>>>0;if(""+uint32Index!==index||uint32Index===4294967295){return NaN}index=uint32Index}return index<0?ensureSize(iter)+index:index}function returnTrue(){return true}function wholeSlice(begin,end,size){return(begin===0||size!==undefined&&begin<=-size)&&(end===undefined||size!==undefined&&end>=size)}function resolveBegin(begin,size){return resolveIndex(begin,size,0)}function resolveEnd(end,size){return resolveIndex(end,size,size)}function resolveIndex(index,size,defaultIndex){return index===undefined?defaultIndex:index<0?Math.max(0,size+index):size===undefined?index:Math.min(size,index)}var ITERATE_KEYS=0;var ITERATE_VALUES=1;var ITERATE_ENTRIES=2;var REAL_ITERATOR_SYMBOL=typeof Symbol==="function"&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL="@@iterator";var ITERATOR_SYMBOL=REAL_ITERATOR_SYMBOL||FAUX_ITERATOR_SYMBOL;function Iterator(next){this.next=next}Iterator.prototype.toString=function(){return"[Iterator]"};Iterator.KEYS=ITERATE_KEYS;Iterator.VALUES=ITERATE_VALUES;Iterator.ENTRIES=ITERATE_ENTRIES;Iterator.prototype.inspect=Iterator.prototype.toSource=function(){return this.toString()};Iterator.prototype[ITERATOR_SYMBOL]=function(){return this};function iteratorValue(type,k,v,iteratorResult){var value=type===0?k:type===1?v:[k,v];iteratorResult?iteratorResult.value=value:iteratorResult={value:value,done:false};return iteratorResult}function iteratorDone(){return{value:undefined,done:true}}function hasIterator(maybeIterable){return!!getIteratorFn(maybeIterable)}function isIterator(maybeIterator){return maybeIterator&&typeof maybeIterator.next==="function"}function getIterator(iterable){var iteratorFn=getIteratorFn(iterable);return iteratorFn&&iteratorFn.call(iterable)}function getIteratorFn(iterable){var iteratorFn=iterable&&(REAL_ITERATOR_SYMBOL&&iterable[REAL_ITERATOR_SYMBOL]||iterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==="function"){return iteratorFn}}function isArrayLike(value){return value&&typeof value.length==="number"}createClass(Seq,Iterable);function Seq(value){return value===null||value===undefined?emptySequence():isIterable(value)?value.toSeq():seqFromValue(value)}Seq.of=function(){return Seq(arguments)};Seq.prototype.toSeq=function(){return this};Seq.prototype.toString=function(){return this.__toString("Seq {","}")};Seq.prototype.cacheResult=function(){if(!this._cache&&this.__iterateUncached){this._cache=this.entrySeq().toArray();this.size=this._cache.length}return this};Seq.prototype.__iterate=function(fn,reverse){return seqIterate(this,fn,reverse,true)};Seq.prototype.__iterator=function(type,reverse){return seqIterator(this,type,reverse,true)};createClass(KeyedSeq,Seq);function KeyedSeq(value){return value===null||value===undefined?emptySequence().toKeyedSeq():isIterable(value)?isKeyed(value)?value.toSeq():value.fromEntrySeq():keyedSeqFromValue(value)}KeyedSeq.prototype.toKeyedSeq=function(){return this};createClass(IndexedSeq,Seq);function IndexedSeq(value){return value===null||value===undefined?emptySequence():!isIterable(value)?indexedSeqFromValue(value):isKeyed(value)?value.entrySeq():value.toIndexedSeq()}IndexedSeq.of=function(){return IndexedSeq(arguments)};IndexedSeq.prototype.toIndexedSeq=function(){return this};IndexedSeq.prototype.toString=function(){return this.__toString("Seq [","]")};IndexedSeq.prototype.__iterate=function(fn,reverse){return seqIterate(this,fn,reverse,false)};IndexedSeq.prototype.__iterator=function(type,reverse){return seqIterator(this,type,reverse,false)};createClass(SetSeq,Seq);function SetSeq(value){return(value===null||value===undefined?emptySequence():!isIterable(value)?indexedSeqFromValue(value):isKeyed(value)?value.entrySeq():value).toSetSeq()}SetSeq.of=function(){return SetSeq(arguments)};SetSeq.prototype.toSetSeq=function(){return this};Seq.isSeq=isSeq;Seq.Keyed=KeyedSeq;Seq.Set=SetSeq;Seq.Indexed=IndexedSeq;var IS_SEQ_SENTINEL="@@__IMMUTABLE_SEQ__@@";Seq.prototype[IS_SEQ_SENTINEL]=true;createClass(ArraySeq,IndexedSeq);function ArraySeq(array){this._array=array;this.size=array.length}ArraySeq.prototype.get=function(index,notSetValue){return this.has(index)?this._array[wrapIndex(this,index)]:notSetValue};ArraySeq.prototype.__iterate=function(fn,reverse){var array=this._array;var maxIndex=array.length-1;for(var ii=0;ii<=maxIndex;ii++){if(fn(array[reverse?maxIndex-ii:ii],ii,this)===false){return ii+1}}return ii};ArraySeq.prototype.__iterator=function(type,reverse){var array=this._array;var maxIndex=array.length-1;var ii=0;return new Iterator(function(){return ii>maxIndex?iteratorDone():iteratorValue(type,ii,array[reverse?maxIndex-ii++:ii++])})};createClass(ObjectSeq,KeyedSeq);function ObjectSeq(object){var keys=Object.keys(object);this._object=object;this._keys=keys;this.size=keys.length}ObjectSeq.prototype.get=function(key,notSetValue){if(notSetValue!==undefined&&!this.has(key)){return notSetValue}return this._object[key]};ObjectSeq.prototype.has=function(key){return this._object.hasOwnProperty(key)};ObjectSeq.prototype.__iterate=function(fn,reverse){var object=this._object;var keys=this._keys;var maxIndex=keys.length-1;for(var ii=0;ii<=maxIndex;ii++){var key=keys[reverse?maxIndex-ii:ii];if(fn(object[key],key,this)===false){return ii+1}}return ii};ObjectSeq.prototype.__iterator=function(type,reverse){var object=this._object;var keys=this._keys;var maxIndex=keys.length-1;var ii=0;return new Iterator(function(){var key=keys[reverse?maxIndex-ii:ii];return ii++>maxIndex?iteratorDone():iteratorValue(type,key,object[key])})};ObjectSeq.prototype[IS_ORDERED_SENTINEL]=true;createClass(IterableSeq,IndexedSeq);function IterableSeq(iterable){this._iterable=iterable;this.size=iterable.length||iterable.size}IterableSeq.prototype.__iterateUncached=function(fn,reverse){if(reverse){return this.cacheResult().__iterate(fn,reverse)}var iterable=this._iterable;var iterator=getIterator(iterable);var iterations=0;if(isIterator(iterator)){var step;while(!(step=iterator.next()).done){if(fn(step.value,iterations++,this)===false){break}}}return iterations};IterableSeq.prototype.__iteratorUncached=function(type,reverse){if(reverse){return this.cacheResult().__iterator(type,reverse)}var iterable=this._iterable;var iterator=getIterator(iterable);if(!isIterator(iterator)){return new Iterator(iteratorDone)}var iterations=0;return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,iterations++,step.value)})};createClass(IteratorSeq,IndexedSeq);function IteratorSeq(iterator){this._iterator=iterator;this._iteratorCache=[]}IteratorSeq.prototype.__iterateUncached=function(fn,reverse){if(reverse){return this.cacheResult().__iterate(fn,reverse)}var iterator=this._iterator;var cache=this._iteratorCache;var iterations=0;while(iterations<cache.length){if(fn(cache[iterations],iterations++,this)===false){return iterations}}var step;while(!(step=iterator.next()).done){var val=step.value;cache[iterations]=val;if(fn(val,iterations++,this)===false){break}}return iterations};IteratorSeq.prototype.__iteratorUncached=function(type,reverse){if(reverse){return this.cacheResult().__iterator(type,reverse)}var iterator=this._iterator;var cache=this._iteratorCache;var iterations=0;return new Iterator(function(){if(iterations>=cache.length){var step=iterator.next();if(step.done){return step}cache[iterations]=step.value}return iteratorValue(type,iterations,cache[iterations++])})};function isSeq(maybeSeq){return!!(maybeSeq&&maybeSeq[IS_SEQ_SENTINEL])}var EMPTY_SEQ;function emptySequence(){return EMPTY_SEQ||(EMPTY_SEQ=new ArraySeq([]))}function keyedSeqFromValue(value){var seq=Array.isArray(value)?new ArraySeq(value).fromEntrySeq():isIterator(value)?new IteratorSeq(value).fromEntrySeq():hasIterator(value)?new IterableSeq(value).fromEntrySeq():typeof value==="object"?new ObjectSeq(value):undefined;if(!seq){throw new TypeError("Expected Array or iterable object of [k, v] entries, "+"or keyed object: "+value)}return seq}function indexedSeqFromValue(value){var seq=maybeIndexedSeqFromValue(value);if(!seq){throw new TypeError("Expected Array or iterable object of values: "+value)}return seq}function seqFromValue(value){var seq=maybeIndexedSeqFromValue(value)||typeof value==="object"&&new ObjectSeq(value);if(!seq){throw new TypeError("Expected Array or iterable object of values, or keyed object: "+value)}return seq}function maybeIndexedSeqFromValue(value){return isArrayLike(value)?new ArraySeq(value):isIterator(value)?new IteratorSeq(value):hasIterator(value)?new IterableSeq(value):undefined}function seqIterate(seq,fn,reverse,useKeys){var cache=seq._cache;if(cache){var maxIndex=cache.length-1;for(var ii=0;ii<=maxIndex;ii++){var entry=cache[reverse?maxIndex-ii:ii];if(fn(entry[1],useKeys?entry[0]:ii,seq)===false){return ii+1}}return ii}return seq.__iterateUncached(fn,reverse)}function seqIterator(seq,type,reverse,useKeys){var cache=seq._cache;if(cache){var maxIndex=cache.length-1;var ii=0;return new Iterator(function(){var entry=cache[reverse?maxIndex-ii:ii];return ii++>maxIndex?iteratorDone():iteratorValue(type,useKeys?entry[0]:ii-1,entry[1])})}return seq.__iteratorUncached(type,reverse)}function fromJS(json,converter){return converter?fromJSWith(converter,json,"",{"":json}):fromJSDefault(json)}function fromJSWith(converter,json,key,parentJSON){if(Array.isArray(json)){return converter.call(parentJSON,key,IndexedSeq(json).map(function(v,k){return fromJSWith(converter,v,k,json)}))}if(isPlainObj(json)){return converter.call(parentJSON,key,KeyedSeq(json).map(function(v,k){return fromJSWith(converter,v,k,json)}))}return json}function fromJSDefault(json){if(Array.isArray(json)){return IndexedSeq(json).map(fromJSDefault).toList()}if(isPlainObj(json)){return KeyedSeq(json).map(fromJSDefault).toMap()}return json}function isPlainObj(value){return value&&(value.constructor===Object||value.constructor===undefined)}function is(valueA,valueB){if(valueA===valueB||valueA!==valueA&&valueB!==valueB){return true}if(!valueA||!valueB){return false}if(typeof valueA.valueOf==="function"&&typeof valueB.valueOf==="function"){valueA=valueA.valueOf();valueB=valueB.valueOf();if(valueA===valueB||valueA!==valueA&&valueB!==valueB){return true}if(!valueA||!valueB){return false}}if(typeof valueA.equals==="function"&&typeof valueB.equals==="function"&&valueA.equals(valueB)){return true}return false}function deepEqual(a,b){if(a===b){return true}if(!isIterable(b)||a.size!==undefined&&b.size!==undefined&&a.size!==b.size||a.__hash!==undefined&&b.__hash!==undefined&&a.__hash!==b.__hash||isKeyed(a)!==isKeyed(b)||isIndexed(a)!==isIndexed(b)||isOrdered(a)!==isOrdered(b)){return false}if(a.size===0&&b.size===0){return true}var notAssociative=!isAssociative(a);if(isOrdered(a)){var entries=a.entries();return b.every(function(v,k){var entry=entries.next().value;return entry&&is(entry[1],v)&&(notAssociative||is(entry[0],k))})&&entries.next().done}var flipped=false;if(a.size===undefined){if(b.size===undefined){if(typeof a.cacheResult==="function"){a.cacheResult()}}else{flipped=true;var _=a;a=b;b=_}}var allEqual=true;var bSize=b.__iterate(function(v,k){if(notAssociative?!a.has(v):flipped?!is(v,a.get(k,NOT_SET)):!is(a.get(k,NOT_SET),v)){allEqual=false;return false}});return allEqual&&a.size===bSize}createClass(Repeat,IndexedSeq);function Repeat(value,times){if(!(this instanceof Repeat)){return new Repeat(value,times)}this._value=value;this.size=times===undefined?Infinity:Math.max(0,times);if(this.size===0){if(EMPTY_REPEAT){return EMPTY_REPEAT}EMPTY_REPEAT=this}}Repeat.prototype.toString=function(){if(this.size===0){return"Repeat []"}return"Repeat [ "+this._value+" "+this.size+" times ]"};Repeat.prototype.get=function(index,notSetValue){return this.has(index)?this._value:notSetValue};Repeat.prototype.includes=function(searchValue){return is(this._value,searchValue)};Repeat.prototype.slice=function(begin,end){var size=this.size;return wholeSlice(begin,end,size)?this:new Repeat(this._value,resolveEnd(end,size)-resolveBegin(begin,size))};Repeat.prototype.reverse=function(){return this};Repeat.prototype.indexOf=function(searchValue){if(is(this._value,searchValue)){return 0}return-1};Repeat.prototype.lastIndexOf=function(searchValue){if(is(this._value,searchValue)){return this.size}return-1};Repeat.prototype.__iterate=function(fn,reverse){for(var ii=0;ii<this.size;ii++){if(fn(this._value,ii,this)===false){return ii+1}}return ii};Repeat.prototype.__iterator=function(type,reverse){var this$0=this;var ii=0;return new Iterator(function(){return ii<this$0.size?iteratorValue(type,ii++,this$0._value):iteratorDone()})};Repeat.prototype.equals=function(other){return other instanceof Repeat?is(this._value,other._value):deepEqual(other)};var EMPTY_REPEAT;function invariant(condition,error){if(!condition)throw new Error(error)}createClass(Range,IndexedSeq);function Range(start,end,step){if(!(this instanceof Range)){return new Range(start,end,step)}invariant(step!==0,"Cannot step a Range by 0");start=start||0;if(end===undefined){end=Infinity}step=step===undefined?1:Math.abs(step);if(end<start){step=-step}this._start=start;this._end=end;this._step=step;this.size=Math.max(0,Math.ceil((end-start)/step-1)+1);if(this.size===0){if(EMPTY_RANGE){return EMPTY_RANGE}EMPTY_RANGE=this}}Range.prototype.toString=function(){if(this.size===0){return"Range []"}return"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"};Range.prototype.get=function(index,notSetValue){return this.has(index)?this._start+wrapIndex(this,index)*this._step:notSetValue};Range.prototype.includes=function(searchValue){var possibleIndex=(searchValue-this._start)/this._step;return possibleIndex>=0&&possibleIndex<this.size&&possibleIndex===Math.floor(possibleIndex)};Range.prototype.slice=function(begin,end){if(wholeSlice(begin,end,this.size)){return this}begin=resolveBegin(begin,this.size);end=resolveEnd(end,this.size);if(end<=begin){return new Range(0,0)}return new Range(this.get(begin,this._end),this.get(end,this._end),this._step)};Range.prototype.indexOf=function(searchValue){var offsetValue=searchValue-this._start;if(offsetValue%this._step===0){var index=offsetValue/this._step;if(index>=0&&index<this.size){return index}}return-1};Range.prototype.lastIndexOf=function(searchValue){return this.indexOf(searchValue)};Range.prototype.__iterate=function(fn,reverse){var maxIndex=this.size-1;var step=this._step;var value=reverse?this._start+maxIndex*step:this._start;for(var ii=0;ii<=maxIndex;ii++){if(fn(value,ii,this)===false){return ii+1}value+=reverse?-step:step}return ii};Range.prototype.__iterator=function(type,reverse){var maxIndex=this.size-1;var step=this._step;var value=reverse?this._start+maxIndex*step:this._start;var ii=0;return new Iterator(function(){var v=value;value+=reverse?-step:step;return ii>maxIndex?iteratorDone():iteratorValue(type,ii++,v)})};Range.prototype.equals=function(other){return other instanceof Range?this._start===other._start&&this._end===other._end&&this._step===other._step:deepEqual(this,other)};var EMPTY_RANGE;createClass(Collection,Iterable);function Collection(){throw TypeError("Abstract")}createClass(KeyedCollection,Collection);function KeyedCollection(){}createClass(IndexedCollection,Collection);function IndexedCollection(){}createClass(SetCollection,Collection);function SetCollection(){}Collection.Keyed=KeyedCollection;Collection.Indexed=IndexedCollection;Collection.Set=SetCollection;var imul=typeof Math.imul==="function"&&Math.imul(4294967295,2)===-2?Math.imul:function imul(a,b){a=a|0;b=b|0;var c=a&65535;var d=b&65535;return c*d+((a>>>16)*d+c*(b>>>16)<<16>>>0)|0};function smi(i32){return i32>>>1&1073741824|i32&3221225471}function hash(o){if(o===false||o===null||o===undefined){return 0}if(typeof o.valueOf==="function"){o=o.valueOf();if(o===false||o===null||o===undefined){return 0}}if(o===true){return 1}var type=typeof o;if(type==="number"){if(o!==o||o===Infinity){return 0}var h=o|0;if(h!==o){h^=o*4294967295}while(o>4294967295){o/=4294967295;h^=o}return smi(h)}if(type==="string"){return o.length>STRING_HASH_CACHE_MIN_STRLEN?cachedHashString(o):hashString(o)}if(typeof o.hashCode==="function"){return o.hashCode()}if(type==="object"){return hashJSObj(o)}if(typeof o.toString==="function"){return hashString(o.toString())}throw new Error("Value type "+type+" cannot be hashed.")}function cachedHashString(string){var hash=stringHashCache[string];if(hash===undefined){hash=hashString(string);if(STRING_HASH_CACHE_SIZE===STRING_HASH_CACHE_MAX_SIZE){STRING_HASH_CACHE_SIZE=0;stringHashCache={}}STRING_HASH_CACHE_SIZE++;stringHashCache[string]=hash}return hash}function hashString(string){var hash=0;for(var ii=0;ii<string.length;ii++){hash=31*hash+string.charCodeAt(ii)|0}return smi(hash)}function hashJSObj(obj){var hash;if(usingWeakMap){hash=weakMap.get(obj);if(hash!==undefined){return hash}}hash=obj[UID_HASH_KEY];if(hash!==undefined){return hash}if(!canDefineProperty){hash=obj.propertyIsEnumerable&&obj.propertyIsEnumerable[UID_HASH_KEY];if(hash!==undefined){return hash}hash=getIENodeHash(obj);if(hash!==undefined){return hash}}hash=++objHashUID;if(objHashUID&1073741824){objHashUID=0}if(usingWeakMap){weakMap.set(obj,hash)}else if(isExtensible!==undefined&&isExtensible(obj)===false){throw new Error("Non-extensible objects are not allowed as keys.")}else if(canDefineProperty){Object.defineProperty(obj,UID_HASH_KEY,{enumerable:false,configurable:false,writable:false,value:hash})}else if(obj.propertyIsEnumerable!==undefined&&obj.propertyIsEnumerable===obj.constructor.prototype.propertyIsEnumerable){obj.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)};obj.propertyIsEnumerable[UID_HASH_KEY]=hash}else if(obj.nodeType!==undefined){obj[UID_HASH_KEY]=hash}else{throw new Error("Unable to set a non-enumerable property on object.")}return hash}var isExtensible=Object.isExtensible;var canDefineProperty=function(){try{Object.defineProperty({},"@",{});return true}catch(e){return false}}();function getIENodeHash(node){if(node&&node.nodeType>0){switch(node.nodeType){case 1:return node.uniqueID;case 9:return node.documentElement&&node.documentElement.uniqueID}}}var usingWeakMap=typeof WeakMap==="function";var weakMap;if(usingWeakMap){weakMap=new WeakMap}var objHashUID=0;var UID_HASH_KEY="__immutablehash__";if(typeof Symbol==="function"){UID_HASH_KEY=Symbol(UID_HASH_KEY)}var STRING_HASH_CACHE_MIN_STRLEN=16;var STRING_HASH_CACHE_MAX_SIZE=255;var STRING_HASH_CACHE_SIZE=0;var stringHashCache={};function assertNotInfinite(size){invariant(size!==Infinity,"Cannot perform this action with an infinite size.")}createClass(Map,KeyedCollection);function Map(value){return value===null||value===undefined?emptyMap():isMap(value)&&!isOrdered(value)?value:emptyMap().withMutations(function(map){var iter=KeyedIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v,k){return map.set(k,v)})})}Map.of=function(){var keyValues=SLICE$0.call(arguments,0);return emptyMap().withMutations(function(map){for(var i=0;i<keyValues.length;i+=2){if(i+1>=keyValues.length){throw new Error("Missing value for key: "+keyValues[i])}map.set(keyValues[i],keyValues[i+1])}})};Map.prototype.toString=function(){return this.__toString("Map {","}")};Map.prototype.get=function(k,notSetValue){return this._root?this._root.get(0,undefined,k,notSetValue):notSetValue};Map.prototype.set=function(k,v){return updateMap(this,k,v)};Map.prototype.setIn=function(keyPath,v){return this.updateIn(keyPath,NOT_SET,function(){return v})};Map.prototype.remove=function(k){return updateMap(this,k,NOT_SET)};Map.prototype.deleteIn=function(keyPath){
return this.updateIn(keyPath,function(){return NOT_SET})};Map.prototype.update=function(k,notSetValue,updater){return arguments.length===1?k(this):this.updateIn([k],notSetValue,updater)};Map.prototype.updateIn=function(keyPath,notSetValue,updater){if(!updater){updater=notSetValue;notSetValue=undefined}var updatedValue=updateInDeepMap(this,forceIterator(keyPath),notSetValue,updater);return updatedValue===NOT_SET?undefined:updatedValue};Map.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=0;this._root=null;this.__hash=undefined;this.__altered=true;return this}return emptyMap()};Map.prototype.merge=function(){return mergeIntoMapWith(this,undefined,arguments)};Map.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoMapWith(this,merger,iters)};Map.prototype.mergeIn=function(keyPath){var iters=SLICE$0.call(arguments,1);return this.updateIn(keyPath,emptyMap(),function(m){return typeof m.merge==="function"?m.merge.apply(m,iters):iters[iters.length-1]})};Map.prototype.mergeDeep=function(){return mergeIntoMapWith(this,deepMerger,arguments)};Map.prototype.mergeDeepWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoMapWith(this,deepMergerWith(merger),iters)};Map.prototype.mergeDeepIn=function(keyPath){var iters=SLICE$0.call(arguments,1);return this.updateIn(keyPath,emptyMap(),function(m){return typeof m.mergeDeep==="function"?m.mergeDeep.apply(m,iters):iters[iters.length-1]})};Map.prototype.sort=function(comparator){return OrderedMap(sortFactory(this,comparator))};Map.prototype.sortBy=function(mapper,comparator){return OrderedMap(sortFactory(this,comparator,mapper))};Map.prototype.withMutations=function(fn){var mutable=this.asMutable();fn(mutable);return mutable.wasAltered()?mutable.__ensureOwner(this.__ownerID):this};Map.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new OwnerID)};Map.prototype.asImmutable=function(){return this.__ensureOwner()};Map.prototype.wasAltered=function(){return this.__altered};Map.prototype.__iterator=function(type,reverse){return new MapIterator(this,type,reverse)};Map.prototype.__iterate=function(fn,reverse){var this$0=this;var iterations=0;this._root&&this._root.iterate(function(entry){iterations++;return fn(entry[1],entry[0],this$0)},reverse);return iterations};Map.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}if(!ownerID){this.__ownerID=ownerID;this.__altered=false;return this}return makeMap(this.size,this._root,ownerID,this.__hash)};function isMap(maybeMap){return!!(maybeMap&&maybeMap[IS_MAP_SENTINEL])}Map.isMap=isMap;var IS_MAP_SENTINEL="@@__IMMUTABLE_MAP__@@";var MapPrototype=Map.prototype;MapPrototype[IS_MAP_SENTINEL]=true;MapPrototype[DELETE]=MapPrototype.remove;MapPrototype.removeIn=MapPrototype.deleteIn;function ArrayMapNode(ownerID,entries){this.ownerID=ownerID;this.entries=entries}ArrayMapNode.prototype.get=function(shift,keyHash,key,notSetValue){var entries=this.entries;for(var ii=0,len=entries.length;ii<len;ii++){if(is(key,entries[ii][0])){return entries[ii][1]}}return notSetValue};ArrayMapNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){var removed=value===NOT_SET;var entries=this.entries;var idx=0;for(var len=entries.length;idx<len;idx++){if(is(key,entries[idx][0])){break}}var exists=idx<len;if(exists?entries[idx][1]===value:removed){return this}SetRef(didAlter);(removed||!exists)&&SetRef(didChangeSize);if(removed&&entries.length===1){return}if(!exists&&!removed&&entries.length>=MAX_ARRAY_MAP_SIZE){return createNodes(ownerID,entries,key,value)}var isEditable=ownerID&&ownerID===this.ownerID;var newEntries=isEditable?entries:arrCopy(entries);if(exists){if(removed){idx===len-1?newEntries.pop():newEntries[idx]=newEntries.pop()}else{newEntries[idx]=[key,value]}}else{newEntries.push([key,value])}if(isEditable){this.entries=newEntries;return this}return new ArrayMapNode(ownerID,newEntries)};function BitmapIndexedNode(ownerID,bitmap,nodes){this.ownerID=ownerID;this.bitmap=bitmap;this.nodes=nodes}BitmapIndexedNode.prototype.get=function(shift,keyHash,key,notSetValue){if(keyHash===undefined){keyHash=hash(key)}var bit=1<<((shift===0?keyHash:keyHash>>>shift)&MASK);var bitmap=this.bitmap;return(bitmap&bit)===0?notSetValue:this.nodes[popCount(bitmap&bit-1)].get(shift+SHIFT,keyHash,key,notSetValue)};BitmapIndexedNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(keyHash===undefined){keyHash=hash(key)}var keyHashFrag=(shift===0?keyHash:keyHash>>>shift)&MASK;var bit=1<<keyHashFrag;var bitmap=this.bitmap;var exists=(bitmap&bit)!==0;if(!exists&&value===NOT_SET){return this}var idx=popCount(bitmap&bit-1);var nodes=this.nodes;var node=exists?nodes[idx]:undefined;var newNode=updateNode(node,ownerID,shift+SHIFT,keyHash,key,value,didChangeSize,didAlter);if(newNode===node){return this}if(!exists&&newNode&&nodes.length>=MAX_BITMAP_INDEXED_SIZE){return expandNodes(ownerID,nodes,bitmap,keyHashFrag,newNode)}if(exists&&!newNode&&nodes.length===2&&isLeafNode(nodes[idx^1])){return nodes[idx^1]}if(exists&&newNode&&nodes.length===1&&isLeafNode(newNode)){return newNode}var isEditable=ownerID&&ownerID===this.ownerID;var newBitmap=exists?newNode?bitmap:bitmap^bit:bitmap|bit;var newNodes=exists?newNode?setIn(nodes,idx,newNode,isEditable):spliceOut(nodes,idx,isEditable):spliceIn(nodes,idx,newNode,isEditable);if(isEditable){this.bitmap=newBitmap;this.nodes=newNodes;return this}return new BitmapIndexedNode(ownerID,newBitmap,newNodes)};function HashArrayMapNode(ownerID,count,nodes){this.ownerID=ownerID;this.count=count;this.nodes=nodes}HashArrayMapNode.prototype.get=function(shift,keyHash,key,notSetValue){if(keyHash===undefined){keyHash=hash(key)}var idx=(shift===0?keyHash:keyHash>>>shift)&MASK;var node=this.nodes[idx];return node?node.get(shift+SHIFT,keyHash,key,notSetValue):notSetValue};HashArrayMapNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(keyHash===undefined){keyHash=hash(key)}var idx=(shift===0?keyHash:keyHash>>>shift)&MASK;var removed=value===NOT_SET;var nodes=this.nodes;var node=nodes[idx];if(removed&&!node){return this}var newNode=updateNode(node,ownerID,shift+SHIFT,keyHash,key,value,didChangeSize,didAlter);if(newNode===node){return this}var newCount=this.count;if(!node){newCount++}else if(!newNode){newCount--;if(newCount<MIN_HASH_ARRAY_MAP_SIZE){return packNodes(ownerID,nodes,newCount,idx)}}var isEditable=ownerID&&ownerID===this.ownerID;var newNodes=setIn(nodes,idx,newNode,isEditable);if(isEditable){this.count=newCount;this.nodes=newNodes;return this}return new HashArrayMapNode(ownerID,newCount,newNodes)};function HashCollisionNode(ownerID,keyHash,entries){this.ownerID=ownerID;this.keyHash=keyHash;this.entries=entries}HashCollisionNode.prototype.get=function(shift,keyHash,key,notSetValue){var entries=this.entries;for(var ii=0,len=entries.length;ii<len;ii++){if(is(key,entries[ii][0])){return entries[ii][1]}}return notSetValue};HashCollisionNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(keyHash===undefined){keyHash=hash(key)}var removed=value===NOT_SET;if(keyHash!==this.keyHash){if(removed){return this}SetRef(didAlter);SetRef(didChangeSize);return mergeIntoNode(this,ownerID,shift,keyHash,[key,value])}var entries=this.entries;var idx=0;for(var len=entries.length;idx<len;idx++){if(is(key,entries[idx][0])){break}}var exists=idx<len;if(exists?entries[idx][1]===value:removed){return this}SetRef(didAlter);(removed||!exists)&&SetRef(didChangeSize);if(removed&&len===2){return new ValueNode(ownerID,this.keyHash,entries[idx^1])}var isEditable=ownerID&&ownerID===this.ownerID;var newEntries=isEditable?entries:arrCopy(entries);if(exists){if(removed){idx===len-1?newEntries.pop():newEntries[idx]=newEntries.pop()}else{newEntries[idx]=[key,value]}}else{newEntries.push([key,value])}if(isEditable){this.entries=newEntries;return this}return new HashCollisionNode(ownerID,this.keyHash,newEntries)};function ValueNode(ownerID,keyHash,entry){this.ownerID=ownerID;this.keyHash=keyHash;this.entry=entry}ValueNode.prototype.get=function(shift,keyHash,key,notSetValue){return is(key,this.entry[0])?this.entry[1]:notSetValue};ValueNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){var removed=value===NOT_SET;var keyMatch=is(key,this.entry[0]);if(keyMatch?value===this.entry[1]:removed){return this}SetRef(didAlter);if(removed){SetRef(didChangeSize);return}if(keyMatch){if(ownerID&&ownerID===this.ownerID){this.entry[1]=value;return this}return new ValueNode(ownerID,this.keyHash,[key,value])}SetRef(didChangeSize);return mergeIntoNode(this,ownerID,shift,hash(key),[key,value])};ArrayMapNode.prototype.iterate=HashCollisionNode.prototype.iterate=function(fn,reverse){var entries=this.entries;for(var ii=0,maxIndex=entries.length-1;ii<=maxIndex;ii++){if(fn(entries[reverse?maxIndex-ii:ii])===false){return false}}};BitmapIndexedNode.prototype.iterate=HashArrayMapNode.prototype.iterate=function(fn,reverse){var nodes=this.nodes;for(var ii=0,maxIndex=nodes.length-1;ii<=maxIndex;ii++){var node=nodes[reverse?maxIndex-ii:ii];if(node&&node.iterate(fn,reverse)===false){return false}}};ValueNode.prototype.iterate=function(fn,reverse){return fn(this.entry)};createClass(MapIterator,Iterator);function MapIterator(map,type,reverse){this._type=type;this._reverse=reverse;this._stack=map._root&&mapIteratorFrame(map._root)}MapIterator.prototype.next=function(){var type=this._type;var stack=this._stack;while(stack){var node=stack.node;var index=stack.index++;var maxIndex;if(node.entry){if(index===0){return mapIteratorValue(type,node.entry)}}else if(node.entries){maxIndex=node.entries.length-1;if(index<=maxIndex){return mapIteratorValue(type,node.entries[this._reverse?maxIndex-index:index])}}else{maxIndex=node.nodes.length-1;if(index<=maxIndex){var subNode=node.nodes[this._reverse?maxIndex-index:index];if(subNode){if(subNode.entry){return mapIteratorValue(type,subNode.entry)}stack=this._stack=mapIteratorFrame(subNode,stack)}continue}}stack=this._stack=this._stack.__prev}return iteratorDone()};function mapIteratorValue(type,entry){return iteratorValue(type,entry[0],entry[1])}function mapIteratorFrame(node,prev){return{node:node,index:0,__prev:prev}}function makeMap(size,root,ownerID,hash){var map=Object.create(MapPrototype);map.size=size;map._root=root;map.__ownerID=ownerID;map.__hash=hash;map.__altered=false;return map}var EMPTY_MAP;function emptyMap(){return EMPTY_MAP||(EMPTY_MAP=makeMap(0))}function updateMap(map,k,v){var newRoot;var newSize;if(!map._root){if(v===NOT_SET){return map}newSize=1;newRoot=new ArrayMapNode(map.__ownerID,[[k,v]])}else{var didChangeSize=MakeRef(CHANGE_LENGTH);var didAlter=MakeRef(DID_ALTER);newRoot=updateNode(map._root,map.__ownerID,0,undefined,k,v,didChangeSize,didAlter);if(!didAlter.value){return map}newSize=map.size+(didChangeSize.value?v===NOT_SET?-1:1:0)}if(map.__ownerID){map.size=newSize;map._root=newRoot;map.__hash=undefined;map.__altered=true;return map}return newRoot?makeMap(newSize,newRoot):emptyMap()}function updateNode(node,ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(!node){if(value===NOT_SET){return node}SetRef(didAlter);SetRef(didChangeSize);return new ValueNode(ownerID,keyHash,[key,value])}return node.update(ownerID,shift,keyHash,key,value,didChangeSize,didAlter)}function isLeafNode(node){return node.constructor===ValueNode||node.constructor===HashCollisionNode}function mergeIntoNode(node,ownerID,shift,keyHash,entry){if(node.keyHash===keyHash){return new HashCollisionNode(ownerID,keyHash,[node.entry,entry])}var idx1=(shift===0?node.keyHash:node.keyHash>>>shift)&MASK;var idx2=(shift===0?keyHash:keyHash>>>shift)&MASK;var newNode;var nodes=idx1===idx2?[mergeIntoNode(node,ownerID,shift+SHIFT,keyHash,entry)]:(newNode=new ValueNode(ownerID,keyHash,entry),idx1<idx2?[node,newNode]:[newNode,node]);return new BitmapIndexedNode(ownerID,1<<idx1|1<<idx2,nodes)}function createNodes(ownerID,entries,key,value){if(!ownerID){ownerID=new OwnerID}var node=new ValueNode(ownerID,hash(key),[key,value]);for(var ii=0;ii<entries.length;ii++){var entry=entries[ii];node=node.update(ownerID,0,undefined,entry[0],entry[1])}return node}function packNodes(ownerID,nodes,count,excluding){var bitmap=0;var packedII=0;var packedNodes=new Array(count);for(var ii=0,bit=1,len=nodes.length;ii<len;ii++,bit<<=1){var node=nodes[ii];if(node!==undefined&&ii!==excluding){bitmap|=bit;packedNodes[packedII++]=node}}return new BitmapIndexedNode(ownerID,bitmap,packedNodes)}function expandNodes(ownerID,nodes,bitmap,including,node){var count=0;var expandedNodes=new Array(SIZE);for(var ii=0;bitmap!==0;ii++,bitmap>>>=1){expandedNodes[ii]=bitmap&1?nodes[count++]:undefined}expandedNodes[including]=node;return new HashArrayMapNode(ownerID,count+1,expandedNodes)}function mergeIntoMapWith(map,merger,iterables){var iters=[];for(var ii=0;ii<iterables.length;ii++){var value=iterables[ii];var iter=KeyedIterable(value);if(!isIterable(value)){iter=iter.map(function(v){return fromJS(v)})}iters.push(iter)}return mergeIntoCollectionWith(map,merger,iters)}function deepMerger(existing,value,key){return existing&&existing.mergeDeep&&isIterable(value)?existing.mergeDeep(value):is(existing,value)?existing:value}function deepMergerWith(merger){return function(existing,value,key){if(existing&&existing.mergeDeepWith&&isIterable(value)){return existing.mergeDeepWith(merger,value)}var nextValue=merger(existing,value,key);return is(existing,nextValue)?existing:nextValue}}function mergeIntoCollectionWith(collection,merger,iters){iters=iters.filter(function(x){return x.size!==0});if(iters.length===0){return collection}if(collection.size===0&&!collection.__ownerID&&iters.length===1){return collection.constructor(iters[0])}return collection.withMutations(function(collection){var mergeIntoMap=merger?function(value,key){collection.update(key,NOT_SET,function(existing){return existing===NOT_SET?value:merger(existing,value,key)})}:function(value,key){collection.set(key,value)};for(var ii=0;ii<iters.length;ii++){iters[ii].forEach(mergeIntoMap)}})}function updateInDeepMap(existing,keyPathIter,notSetValue,updater){var isNotSet=existing===NOT_SET;var step=keyPathIter.next();if(step.done){var existingValue=isNotSet?notSetValue:existing;var newValue=updater(existingValue);return newValue===existingValue?existing:newValue}invariant(isNotSet||existing&&existing.set,"invalid keyPath");var key=step.value;var nextExisting=isNotSet?NOT_SET:existing.get(key,NOT_SET);var nextUpdated=updateInDeepMap(nextExisting,keyPathIter,notSetValue,updater);return nextUpdated===nextExisting?existing:nextUpdated===NOT_SET?existing.remove(key):(isNotSet?emptyMap():existing).set(key,nextUpdated)}function popCount(x){x=x-(x>>1&1431655765);x=(x&858993459)+(x>>2&858993459);x=x+(x>>4)&252645135;x=x+(x>>8);x=x+(x>>16);return x&127}function setIn(array,idx,val,canEdit){var newArray=canEdit?array:arrCopy(array);newArray[idx]=val;return newArray}function spliceIn(array,idx,val,canEdit){var newLen=array.length+1;if(canEdit&&idx+1===newLen){array[idx]=val;return array}var newArray=new Array(newLen);var after=0;for(var ii=0;ii<newLen;ii++){if(ii===idx){newArray[ii]=val;after=-1}else{newArray[ii]=array[ii+after]}}return newArray}function spliceOut(array,idx,canEdit){var newLen=array.length-1;if(canEdit&&idx===newLen){array.pop();return array}var newArray=new Array(newLen);var after=0;for(var ii=0;ii<newLen;ii++){if(ii===idx){after=1}newArray[ii]=array[ii+after]}return newArray}var MAX_ARRAY_MAP_SIZE=SIZE/4;var MAX_BITMAP_INDEXED_SIZE=SIZE/2;var MIN_HASH_ARRAY_MAP_SIZE=SIZE/4;createClass(List,IndexedCollection);function List(value){var empty=emptyList();if(value===null||value===undefined){return empty}if(isList(value)){return value}var iter=IndexedIterable(value);var size=iter.size;if(size===0){return empty}assertNotInfinite(size);if(size>0&&size<SIZE){return makeList(0,size,SHIFT,null,new VNode(iter.toArray()))}return empty.withMutations(function(list){list.setSize(size);iter.forEach(function(v,i){return list.set(i,v)})})}List.of=function(){return this(arguments)};List.prototype.toString=function(){return this.__toString("List [","]")};List.prototype.get=function(index,notSetValue){index=wrapIndex(this,index);if(index>=0&&index<this.size){index+=this._origin;var node=listNodeFor(this,index);return node&&node.array[index&MASK]}return notSetValue};List.prototype.set=function(index,value){return updateList(this,index,value)};List.prototype.remove=function(index){return!this.has(index)?this:index===0?this.shift():index===this.size-1?this.pop():this.splice(index,1)};List.prototype.insert=function(index,value){return this.splice(index,0,value)};List.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=this._origin=this._capacity=0;this._level=SHIFT;this._root=this._tail=null;this.__hash=undefined;this.__altered=true;return this}return emptyList()};List.prototype.push=function(){var values=arguments;var oldSize=this.size;return this.withMutations(function(list){setListBounds(list,0,oldSize+values.length);for(var ii=0;ii<values.length;ii++){list.set(oldSize+ii,values[ii])}})};List.prototype.pop=function(){return setListBounds(this,0,-1)};List.prototype.unshift=function(){var values=arguments;return this.withMutations(function(list){setListBounds(list,-values.length);for(var ii=0;ii<values.length;ii++){list.set(ii,values[ii])}})};List.prototype.shift=function(){return setListBounds(this,1)};List.prototype.merge=function(){return mergeIntoListWith(this,undefined,arguments)};List.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoListWith(this,merger,iters)};List.prototype.mergeDeep=function(){return mergeIntoListWith(this,deepMerger,arguments)};List.prototype.mergeDeepWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoListWith(this,deepMergerWith(merger),iters)};List.prototype.setSize=function(size){return setListBounds(this,0,size)};List.prototype.slice=function(begin,end){var size=this.size;if(wholeSlice(begin,end,size)){return this}return setListBounds(this,resolveBegin(begin,size),resolveEnd(end,size))};List.prototype.__iterator=function(type,reverse){var index=0;var values=iterateList(this,reverse);return new Iterator(function(){var value=values();return value===DONE?iteratorDone():iteratorValue(type,index++,value)})};List.prototype.__iterate=function(fn,reverse){var index=0;var values=iterateList(this,reverse);var value;while((value=values())!==DONE){if(fn(value,index++,this)===false){break}}return index};List.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}if(!ownerID){this.__ownerID=ownerID;return this}return makeList(this._origin,this._capacity,this._level,this._root,this._tail,ownerID,this.__hash)};function isList(maybeList){return!!(maybeList&&maybeList[IS_LIST_SENTINEL])}List.isList=isList;var IS_LIST_SENTINEL="@@__IMMUTABLE_LIST__@@";var ListPrototype=List.prototype;ListPrototype[IS_LIST_SENTINEL]=true;ListPrototype[DELETE]=ListPrototype.remove;ListPrototype.setIn=MapPrototype.setIn;ListPrototype.deleteIn=ListPrototype.removeIn=MapPrototype.removeIn;ListPrototype.update=MapPrototype.update;ListPrototype.updateIn=MapPrototype.updateIn;ListPrototype.mergeIn=MapPrototype.mergeIn;ListPrototype.mergeDeepIn=MapPrototype.mergeDeepIn;ListPrototype.withMutations=MapPrototype.withMutations;ListPrototype.asMutable=MapPrototype.asMutable;ListPrototype.asImmutable=MapPrototype.asImmutable;ListPrototype.wasAltered=MapPrototype.wasAltered;function VNode(array,ownerID){this.array=array;this.ownerID=ownerID}VNode.prototype.removeBefore=function(ownerID,level,index){if(index===level?1<<level:0||this.array.length===0){return this}var originIndex=index>>>level&MASK;if(originIndex>=this.array.length){return new VNode([],ownerID)}var removingFirst=originIndex===0;var newChild;if(level>0){var oldChild=this.array[originIndex];newChild=oldChild&&oldChild.removeBefore(ownerID,level-SHIFT,index);if(newChild===oldChild&&removingFirst){return this}}if(removingFirst&&!newChild){return this}var editable=editableVNode(this,ownerID);if(!removingFirst){for(var ii=0;ii<originIndex;ii++){editable.array[ii]=undefined}}if(newChild){editable.array[originIndex]=newChild}return editable};VNode.prototype.removeAfter=function(ownerID,level,index){if(index===(level?1<<level:0)||this.array.length===0){return this}var sizeIndex=index-1>>>level&MASK;if(sizeIndex>=this.array.length){return this}var newChild;if(level>0){var oldChild=this.array[sizeIndex];newChild=oldChild&&oldChild.removeAfter(ownerID,level-SHIFT,index);if(newChild===oldChild&&sizeIndex===this.array.length-1){return this}}var editable=editableVNode(this,ownerID);editable.array.splice(sizeIndex+1);if(newChild){editable.array[sizeIndex]=newChild}return editable};var DONE={};function iterateList(list,reverse){var left=list._origin;var right=list._capacity;var tailPos=getTailOffset(right);var tail=list._tail;return iterateNodeOrLeaf(list._root,list._level,0);function iterateNodeOrLeaf(node,level,offset){return level===0?iterateLeaf(node,offset):iterateNode(node,level,offset)}function iterateLeaf(node,offset){var array=offset===tailPos?tail&&tail.array:node&&node.array;var from=offset>left?0:left-offset;var to=right-offset;if(to>SIZE){to=SIZE}return function(){if(from===to){return DONE}var idx=reverse?--to:from++;return array&&array[idx]}}function iterateNode(node,level,offset){var values;var array=node&&node.array;var from=offset>left?0:left-offset>>level;var to=(right-offset>>level)+1;if(to>SIZE){to=SIZE}return function(){do{if(values){var value=values();if(value!==DONE){return value}values=null}if(from===to){return DONE}var idx=reverse?--to:from++;values=iterateNodeOrLeaf(array&&array[idx],level-SHIFT,offset+(idx<<level))}while(true)}}}function makeList(origin,capacity,level,root,tail,ownerID,hash){var list=Object.create(ListPrototype);list.size=capacity-origin;list._origin=origin;list._capacity=capacity;list._level=level;list._root=root;list._tail=tail;list.__ownerID=ownerID;list.__hash=hash;list.__altered=false;return list}var EMPTY_LIST;function emptyList(){return EMPTY_LIST||(EMPTY_LIST=makeList(0,0,SHIFT))}function updateList(list,index,value){index=wrapIndex(list,index);if(index!==index){return list}if(index>=list.size||index<0){return list.withMutations(function(list){index<0?setListBounds(list,index).set(0,value):setListBounds(list,0,index+1).set(index,value)})}index+=list._origin;var newTail=list._tail;var newRoot=list._root;var didAlter=MakeRef(DID_ALTER);if(index>=getTailOffset(list._capacity)){newTail=updateVNode(newTail,list.__ownerID,0,index,value,didAlter)}else{newRoot=updateVNode(newRoot,list.__ownerID,list._level,index,value,didAlter)}if(!didAlter.value){return list}if(list.__ownerID){list._root=newRoot;list._tail=newTail;list.__hash=undefined;list.__altered=true;return list}return makeList(list._origin,list._capacity,list._level,newRoot,newTail)}function updateVNode(node,ownerID,level,index,value,didAlter){var idx=index>>>level&MASK;var nodeHas=node&&idx<node.array.length;if(!nodeHas&&value===undefined){return node}var newNode;if(level>0){var lowerNode=node&&node.array[idx];var newLowerNode=updateVNode(lowerNode,ownerID,level-SHIFT,index,value,didAlter);if(newLowerNode===lowerNode){return node}newNode=editableVNode(node,ownerID);newNode.array[idx]=newLowerNode;return newNode}if(nodeHas&&node.array[idx]===value){return node}SetRef(didAlter);newNode=editableVNode(node,ownerID);if(value===undefined&&idx===newNode.array.length-1){newNode.array.pop()}else{newNode.array[idx]=value}return newNode}function editableVNode(node,ownerID){if(ownerID&&node&&ownerID===node.ownerID){return node}return new VNode(node?node.array.slice():[],ownerID)}function listNodeFor(list,rawIndex){if(rawIndex>=getTailOffset(list._capacity)){return list._tail}if(rawIndex<1<<list._level+SHIFT){var node=list._root;var level=list._level;while(node&&level>0){node=node.array[rawIndex>>>level&MASK];level-=SHIFT}return node}}function setListBounds(list,begin,end){if(begin!==undefined){begin=begin|0}if(end!==undefined){end=end|0}var owner=list.__ownerID||new OwnerID;var oldOrigin=list._origin;var oldCapacity=list._capacity;var newOrigin=oldOrigin+begin;var newCapacity=end===undefined?oldCapacity:end<0?oldCapacity+end:oldOrigin+end;if(newOrigin===oldOrigin&&newCapacity===oldCapacity){return list}if(newOrigin>=newCapacity){return list.clear()}var newLevel=list._level;var newRoot=list._root;var offsetShift=0;while(newOrigin+offsetShift<0){newRoot=new VNode(newRoot&&newRoot.array.length?[undefined,newRoot]:[],owner);newLevel+=SHIFT;offsetShift+=1<<newLevel}if(offsetShift){newOrigin+=offsetShift;oldOrigin+=offsetShift;newCapacity+=offsetShift;oldCapacity+=offsetShift}var oldTailOffset=getTailOffset(oldCapacity);var newTailOffset=getTailOffset(newCapacity);while(newTailOffset>=1<<newLevel+SHIFT){newRoot=new VNode(newRoot&&newRoot.array.length?[newRoot]:[],owner);newLevel+=SHIFT}var oldTail=list._tail;var newTail=newTailOffset<oldTailOffset?listNodeFor(list,newCapacity-1):newTailOffset>oldTailOffset?new VNode([],owner):oldTail;if(oldTail&&newTailOffset>oldTailOffset&&newOrigin<oldCapacity&&oldTail.array.length){newRoot=editableVNode(newRoot,owner);var node=newRoot;for(var level=newLevel;level>SHIFT;level-=SHIFT){var idx=oldTailOffset>>>level&MASK;node=node.array[idx]=editableVNode(node.array[idx],owner)}node.array[oldTailOffset>>>SHIFT&MASK]=oldTail}if(newCapacity<oldCapacity){newTail=newTail&&newTail.removeAfter(owner,0,newCapacity)}if(newOrigin>=newTailOffset){newOrigin-=newTailOffset;newCapacity-=newTailOffset;newLevel=SHIFT;newRoot=null;newTail=newTail&&newTail.removeBefore(owner,0,newOrigin)}else if(newOrigin>oldOrigin||newTailOffset<oldTailOffset){offsetShift=0;while(newRoot){var beginIndex=newOrigin>>>newLevel&MASK;if(beginIndex!==newTailOffset>>>newLevel&MASK){break}if(beginIndex){offsetShift+=(1<<newLevel)*beginIndex}newLevel-=SHIFT;newRoot=newRoot.array[beginIndex]}if(newRoot&&newOrigin>oldOrigin){newRoot=newRoot.removeBefore(owner,newLevel,newOrigin-offsetShift)}if(newRoot&&newTailOffset<oldTailOffset){newRoot=newRoot.removeAfter(owner,newLevel,newTailOffset-offsetShift)}if(offsetShift){newOrigin-=offsetShift;newCapacity-=offsetShift}}if(list.__ownerID){list.size=newCapacity-newOrigin;list._origin=newOrigin;list._capacity=newCapacity;list._level=newLevel;list._root=newRoot;list._tail=newTail;list.__hash=undefined;list.__altered=true;return list}return makeList(newOrigin,newCapacity,newLevel,newRoot,newTail)}function mergeIntoListWith(list,merger,iterables){var iters=[];var maxSize=0;for(var ii=0;ii<iterables.length;ii++){var value=iterables[ii];var iter=IndexedIterable(value);if(iter.size>maxSize){maxSize=iter.size}if(!isIterable(value)){iter=iter.map(function(v){return fromJS(v)})}iters.push(iter)}if(maxSize>list.size){list=list.setSize(maxSize)}return mergeIntoCollectionWith(list,merger,iters)}function getTailOffset(size){return size<SIZE?0:size-1>>>SHIFT<<SHIFT}createClass(OrderedMap,Map);function OrderedMap(value){return value===null||value===undefined?emptyOrderedMap():isOrderedMap(value)?value:emptyOrderedMap().withMutations(function(map){var iter=KeyedIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v,k){return map.set(k,v)})})}OrderedMap.of=function(){return this(arguments)};OrderedMap.prototype.toString=function(){return this.__toString("OrderedMap {","}")};OrderedMap.prototype.get=function(k,notSetValue){var index=this._map.get(k);return index!==undefined?this._list.get(index)[1]:notSetValue};OrderedMap.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=0;this._map.clear();this._list.clear();return this}return emptyOrderedMap()};OrderedMap.prototype.set=function(k,v){return updateOrderedMap(this,k,v)};OrderedMap.prototype.remove=function(k){return updateOrderedMap(this,k,NOT_SET)};OrderedMap.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()};OrderedMap.prototype.__iterate=function(fn,reverse){var this$0=this;return this._list.__iterate(function(entry){return entry&&fn(entry[1],entry[0],this$0)},reverse)};OrderedMap.prototype.__iterator=function(type,reverse){return this._list.fromEntrySeq().__iterator(type,reverse)};OrderedMap.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}var newMap=this._map.__ensureOwner(ownerID);var newList=this._list.__ensureOwner(ownerID);if(!ownerID){this.__ownerID=ownerID;this._map=newMap;this._list=newList;return this}return makeOrderedMap(newMap,newList,ownerID,this.__hash)};function isOrderedMap(maybeOrderedMap){return isMap(maybeOrderedMap)&&isOrdered(maybeOrderedMap)}OrderedMap.isOrderedMap=isOrderedMap;OrderedMap.prototype[IS_ORDERED_SENTINEL]=true;OrderedMap.prototype[DELETE]=OrderedMap.prototype.remove;function makeOrderedMap(map,list,ownerID,hash){var omap=Object.create(OrderedMap.prototype);omap.size=map?map.size:0;omap._map=map;omap._list=list;omap.__ownerID=ownerID;omap.__hash=hash;return omap}var EMPTY_ORDERED_MAP;function emptyOrderedMap(){return EMPTY_ORDERED_MAP||(EMPTY_ORDERED_MAP=makeOrderedMap(emptyMap(),emptyList()))}function updateOrderedMap(omap,k,v){var map=omap._map;var list=omap._list;var i=map.get(k);var has=i!==undefined;var newMap;var newList;if(v===NOT_SET){if(!has){return omap}if(list.size>=SIZE&&list.size>=map.size*2){newList=list.filter(function(entry,idx){return entry!==undefined&&i!==idx});newMap=newList.toKeyedSeq().map(function(entry){return entry[0]}).flip().toMap();if(omap.__ownerID){newMap.__ownerID=newList.__ownerID=omap.__ownerID}}else{newMap=map.remove(k);newList=i===list.size-1?list.pop():list.set(i,undefined)}}else{if(has){if(v===list.get(i)[1]){return omap}newMap=map;newList=list.set(i,[k,v])}else{newMap=map.set(k,list.size);newList=list.set(list.size,[k,v])}}if(omap.__ownerID){omap.size=newMap.size;omap._map=newMap;omap._list=newList;omap.__hash=undefined;return omap}return makeOrderedMap(newMap,newList)}createClass(ToKeyedSequence,KeyedSeq);function ToKeyedSequence(indexed,useKeys){this._iter=indexed;this._useKeys=useKeys;this.size=indexed.size}ToKeyedSequence.prototype.get=function(key,notSetValue){return this._iter.get(key,notSetValue)};ToKeyedSequence.prototype.has=function(key){return this._iter.has(key)};ToKeyedSequence.prototype.valueSeq=function(){return this._iter.valueSeq()};ToKeyedSequence.prototype.reverse=function(){var this$0=this;var reversedSequence=reverseFactory(this,true);if(!this._useKeys){reversedSequence.valueSeq=function(){return this$0._iter.toSeq().reverse()}}return reversedSequence};ToKeyedSequence.prototype.map=function(mapper,context){var this$0=this;var mappedSequence=mapFactory(this,mapper,context);if(!this._useKeys){mappedSequence.valueSeq=function(){return this$0._iter.toSeq().map(mapper,context)}}return mappedSequence};ToKeyedSequence.prototype.__iterate=function(fn,reverse){var this$0=this;var ii;return this._iter.__iterate(this._useKeys?function(v,k){return fn(v,k,this$0)}:(ii=reverse?resolveSize(this):0,function(v){return fn(v,reverse?--ii:ii++,this$0)}),reverse)};ToKeyedSequence.prototype.__iterator=function(type,reverse){if(this._useKeys){return this._iter.__iterator(type,reverse)}var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);var ii=reverse?resolveSize(this):0;return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,reverse?--ii:ii++,step.value,step)})};ToKeyedSequence.prototype[IS_ORDERED_SENTINEL]=true;createClass(ToIndexedSequence,IndexedSeq);function ToIndexedSequence(iter){this._iter=iter;this.size=iter.size}ToIndexedSequence.prototype.includes=function(value){return this._iter.includes(value)};ToIndexedSequence.prototype.__iterate=function(fn,reverse){var this$0=this;var iterations=0;return this._iter.__iterate(function(v){return fn(v,iterations++,this$0);
},reverse)};ToIndexedSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);var iterations=0;return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,iterations++,step.value,step)})};createClass(ToSetSequence,SetSeq);function ToSetSequence(iter){this._iter=iter;this.size=iter.size}ToSetSequence.prototype.has=function(key){return this._iter.includes(key)};ToSetSequence.prototype.__iterate=function(fn,reverse){var this$0=this;return this._iter.__iterate(function(v){return fn(v,v,this$0)},reverse)};ToSetSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,step.value,step.value,step)})};createClass(FromEntriesSequence,KeyedSeq);function FromEntriesSequence(entries){this._iter=entries;this.size=entries.size}FromEntriesSequence.prototype.entrySeq=function(){return this._iter.toSeq()};FromEntriesSequence.prototype.__iterate=function(fn,reverse){var this$0=this;return this._iter.__iterate(function(entry){if(entry){validateEntry(entry);var indexedIterable=isIterable(entry);return fn(indexedIterable?entry.get(1):entry[1],indexedIterable?entry.get(0):entry[0],this$0)}},reverse)};FromEntriesSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);return new Iterator(function(){while(true){var step=iterator.next();if(step.done){return step}var entry=step.value;if(entry){validateEntry(entry);var indexedIterable=isIterable(entry);return iteratorValue(type,indexedIterable?entry.get(0):entry[0],indexedIterable?entry.get(1):entry[1],step)}}})};ToIndexedSequence.prototype.cacheResult=ToKeyedSequence.prototype.cacheResult=ToSetSequence.prototype.cacheResult=FromEntriesSequence.prototype.cacheResult=cacheResultThrough;function flipFactory(iterable){var flipSequence=makeSequence(iterable);flipSequence._iter=iterable;flipSequence.size=iterable.size;flipSequence.flip=function(){return iterable};flipSequence.reverse=function(){var reversedSequence=iterable.reverse.apply(this);reversedSequence.flip=function(){return iterable.reverse()};return reversedSequence};flipSequence.has=function(key){return iterable.includes(key)};flipSequence.includes=function(key){return iterable.has(key)};flipSequence.cacheResult=cacheResultThrough;flipSequence.__iterateUncached=function(fn,reverse){var this$0=this;return iterable.__iterate(function(v,k){return fn(k,v,this$0)!==false},reverse)};flipSequence.__iteratorUncached=function(type,reverse){if(type===ITERATE_ENTRIES){var iterator=iterable.__iterator(type,reverse);return new Iterator(function(){var step=iterator.next();if(!step.done){var k=step.value[0];step.value[0]=step.value[1];step.value[1]=k}return step})}return iterable.__iterator(type===ITERATE_VALUES?ITERATE_KEYS:ITERATE_VALUES,reverse)};return flipSequence}function mapFactory(iterable,mapper,context){var mappedSequence=makeSequence(iterable);mappedSequence.size=iterable.size;mappedSequence.has=function(key){return iterable.has(key)};mappedSequence.get=function(key,notSetValue){var v=iterable.get(key,NOT_SET);return v===NOT_SET?notSetValue:mapper.call(context,v,key,iterable)};mappedSequence.__iterateUncached=function(fn,reverse){var this$0=this;return iterable.__iterate(function(v,k,c){return fn(mapper.call(context,v,k,c),k,this$0)!==false},reverse)};mappedSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);return new Iterator(function(){var step=iterator.next();if(step.done){return step}var entry=step.value;var key=entry[0];return iteratorValue(type,key,mapper.call(context,entry[1],key,iterable),step)})};return mappedSequence}function reverseFactory(iterable,useKeys){var reversedSequence=makeSequence(iterable);reversedSequence._iter=iterable;reversedSequence.size=iterable.size;reversedSequence.reverse=function(){return iterable};if(iterable.flip){reversedSequence.flip=function(){var flipSequence=flipFactory(iterable);flipSequence.reverse=function(){return iterable.flip()};return flipSequence}}reversedSequence.get=function(key,notSetValue){return iterable.get(useKeys?key:-1-key,notSetValue)};reversedSequence.has=function(key){return iterable.has(useKeys?key:-1-key)};reversedSequence.includes=function(value){return iterable.includes(value)};reversedSequence.cacheResult=cacheResultThrough;reversedSequence.__iterate=function(fn,reverse){var this$0=this;return iterable.__iterate(function(v,k){return fn(v,k,this$0)},!reverse)};reversedSequence.__iterator=function(type,reverse){return iterable.__iterator(type,!reverse)};return reversedSequence}function filterFactory(iterable,predicate,context,useKeys){var filterSequence=makeSequence(iterable);if(useKeys){filterSequence.has=function(key){var v=iterable.get(key,NOT_SET);return v!==NOT_SET&&!!predicate.call(context,v,key,iterable)};filterSequence.get=function(key,notSetValue){var v=iterable.get(key,NOT_SET);return v!==NOT_SET&&predicate.call(context,v,key,iterable)?v:notSetValue}}filterSequence.__iterateUncached=function(fn,reverse){var this$0=this;var iterations=0;iterable.__iterate(function(v,k,c){if(predicate.call(context,v,k,c)){iterations++;return fn(v,useKeys?k:iterations-1,this$0)}},reverse);return iterations};filterSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);var iterations=0;return new Iterator(function(){while(true){var step=iterator.next();if(step.done){return step}var entry=step.value;var key=entry[0];var value=entry[1];if(predicate.call(context,value,key,iterable)){return iteratorValue(type,useKeys?key:iterations++,value,step)}}})};return filterSequence}function countByFactory(iterable,grouper,context){var groups=Map().asMutable();iterable.__iterate(function(v,k){groups.update(grouper.call(context,v,k,iterable),0,function(a){return a+1})});return groups.asImmutable()}function groupByFactory(iterable,grouper,context){var isKeyedIter=isKeyed(iterable);var groups=(isOrdered(iterable)?OrderedMap():Map()).asMutable();iterable.__iterate(function(v,k){groups.update(grouper.call(context,v,k,iterable),function(a){return a=a||[],a.push(isKeyedIter?[k,v]:v),a})});var coerce=iterableClass(iterable);return groups.map(function(arr){return reify(iterable,coerce(arr))})}function sliceFactory(iterable,begin,end,useKeys){var originalSize=iterable.size;if(begin!==undefined){begin=begin|0}if(end!==undefined){if(end===Infinity){end=originalSize}else{end=end|0}}if(wholeSlice(begin,end,originalSize)){return iterable}var resolvedBegin=resolveBegin(begin,originalSize);var resolvedEnd=resolveEnd(end,originalSize);if(resolvedBegin!==resolvedBegin||resolvedEnd!==resolvedEnd){return sliceFactory(iterable.toSeq().cacheResult(),begin,end,useKeys)}var resolvedSize=resolvedEnd-resolvedBegin;var sliceSize;if(resolvedSize===resolvedSize){sliceSize=resolvedSize<0?0:resolvedSize}var sliceSeq=makeSequence(iterable);sliceSeq.size=sliceSize===0?sliceSize:iterable.size&&sliceSize||undefined;if(!useKeys&&isSeq(iterable)&&sliceSize>=0){sliceSeq.get=function(index,notSetValue){index=wrapIndex(this,index);return index>=0&&index<sliceSize?iterable.get(index+resolvedBegin,notSetValue):notSetValue}}sliceSeq.__iterateUncached=function(fn,reverse){var this$0=this;if(sliceSize===0){return 0}if(reverse){return this.cacheResult().__iterate(fn,reverse)}var skipped=0;var isSkipping=true;var iterations=0;iterable.__iterate(function(v,k){if(!(isSkipping&&(isSkipping=skipped++<resolvedBegin))){iterations++;return fn(v,useKeys?k:iterations-1,this$0)!==false&&iterations!==sliceSize}});return iterations};sliceSeq.__iteratorUncached=function(type,reverse){if(sliceSize!==0&&reverse){return this.cacheResult().__iterator(type,reverse)}var iterator=sliceSize!==0&&iterable.__iterator(type,reverse);var skipped=0;var iterations=0;return new Iterator(function(){while(skipped++<resolvedBegin){iterator.next()}if(++iterations>sliceSize){return iteratorDone()}var step=iterator.next();if(useKeys||type===ITERATE_VALUES){return step}else if(type===ITERATE_KEYS){return iteratorValue(type,iterations-1,undefined,step)}else{return iteratorValue(type,iterations-1,step.value[1],step)}})};return sliceSeq}function takeWhileFactory(iterable,predicate,context){var takeSequence=makeSequence(iterable);takeSequence.__iterateUncached=function(fn,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterate(fn,reverse)}var iterations=0;iterable.__iterate(function(v,k,c){return predicate.call(context,v,k,c)&&++iterations&&fn(v,k,this$0)});return iterations};takeSequence.__iteratorUncached=function(type,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterator(type,reverse)}var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);var iterating=true;return new Iterator(function(){if(!iterating){return iteratorDone()}var step=iterator.next();if(step.done){return step}var entry=step.value;var k=entry[0];var v=entry[1];if(!predicate.call(context,v,k,this$0)){iterating=false;return iteratorDone()}return type===ITERATE_ENTRIES?step:iteratorValue(type,k,v,step)})};return takeSequence}function skipWhileFactory(iterable,predicate,context,useKeys){var skipSequence=makeSequence(iterable);skipSequence.__iterateUncached=function(fn,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterate(fn,reverse)}var isSkipping=true;var iterations=0;iterable.__iterate(function(v,k,c){if(!(isSkipping&&(isSkipping=predicate.call(context,v,k,c)))){iterations++;return fn(v,useKeys?k:iterations-1,this$0)}});return iterations};skipSequence.__iteratorUncached=function(type,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterator(type,reverse)}var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);var skipping=true;var iterations=0;return new Iterator(function(){var step,k,v;do{step=iterator.next();if(step.done){if(useKeys||type===ITERATE_VALUES){return step}else if(type===ITERATE_KEYS){return iteratorValue(type,iterations++,undefined,step)}else{return iteratorValue(type,iterations++,step.value[1],step)}}var entry=step.value;k=entry[0];v=entry[1];skipping&&(skipping=predicate.call(context,v,k,this$0))}while(skipping);return type===ITERATE_ENTRIES?step:iteratorValue(type,k,v,step)})};return skipSequence}function concatFactory(iterable,values){var isKeyedIterable=isKeyed(iterable);var iters=[iterable].concat(values).map(function(v){if(!isIterable(v)){v=isKeyedIterable?keyedSeqFromValue(v):indexedSeqFromValue(Array.isArray(v)?v:[v])}else if(isKeyedIterable){v=KeyedIterable(v)}return v}).filter(function(v){return v.size!==0});if(iters.length===0){return iterable}if(iters.length===1){var singleton=iters[0];if(singleton===iterable||isKeyedIterable&&isKeyed(singleton)||isIndexed(iterable)&&isIndexed(singleton)){return singleton}}var concatSeq=new ArraySeq(iters);if(isKeyedIterable){concatSeq=concatSeq.toKeyedSeq()}else if(!isIndexed(iterable)){concatSeq=concatSeq.toSetSeq()}concatSeq=concatSeq.flatten(true);concatSeq.size=iters.reduce(function(sum,seq){if(sum!==undefined){var size=seq.size;if(size!==undefined){return sum+size}}},0);return concatSeq}function flattenFactory(iterable,depth,useKeys){var flatSequence=makeSequence(iterable);flatSequence.__iterateUncached=function(fn,reverse){var iterations=0;var stopped=false;function flatDeep(iter,currentDepth){var this$0=this;iter.__iterate(function(v,k){if((!depth||currentDepth<depth)&&isIterable(v)){flatDeep(v,currentDepth+1)}else if(fn(v,useKeys?k:iterations++,this$0)===false){stopped=true}return!stopped},reverse)}flatDeep(iterable,0);return iterations};flatSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(type,reverse);var stack=[];var iterations=0;return new Iterator(function(){while(iterator){var step=iterator.next();if(step.done!==false){iterator=stack.pop();continue}var v=step.value;if(type===ITERATE_ENTRIES){v=v[1]}if((!depth||stack.length<depth)&&isIterable(v)){stack.push(iterator);iterator=v.__iterator(type,reverse)}else{return useKeys?step:iteratorValue(type,iterations++,v,step)}}return iteratorDone()})};return flatSequence}function flatMapFactory(iterable,mapper,context){var coerce=iterableClass(iterable);return iterable.toSeq().map(function(v,k){return coerce(mapper.call(context,v,k,iterable))}).flatten(true)}function interposeFactory(iterable,separator){var interposedSequence=makeSequence(iterable);interposedSequence.size=iterable.size&&iterable.size*2-1;interposedSequence.__iterateUncached=function(fn,reverse){var this$0=this;var iterations=0;iterable.__iterate(function(v,k){return(!iterations||fn(separator,iterations++,this$0)!==false)&&fn(v,iterations++,this$0)!==false},reverse);return iterations};interposedSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(ITERATE_VALUES,reverse);var iterations=0;var step;return new Iterator(function(){if(!step||iterations%2){step=iterator.next();if(step.done){return step}}return iterations%2?iteratorValue(type,iterations++,separator):iteratorValue(type,iterations++,step.value,step)})};return interposedSequence}function sortFactory(iterable,comparator,mapper){if(!comparator){comparator=defaultComparator}var isKeyedIterable=isKeyed(iterable);var index=0;var entries=iterable.toSeq().map(function(v,k){return[k,v,index++,mapper?mapper(v,k,iterable):v]}).toArray();entries.sort(function(a,b){return comparator(a[3],b[3])||a[2]-b[2]}).forEach(isKeyedIterable?function(v,i){entries[i].length=2}:function(v,i){entries[i]=v[1]});return isKeyedIterable?KeyedSeq(entries):isIndexed(iterable)?IndexedSeq(entries):SetSeq(entries)}function maxFactory(iterable,comparator,mapper){if(!comparator){comparator=defaultComparator}if(mapper){var entry=iterable.toSeq().map(function(v,k){return[v,mapper(v,k,iterable)]}).reduce(function(a,b){return maxCompare(comparator,a[1],b[1])?b:a});return entry&&entry[0]}else{return iterable.reduce(function(a,b){return maxCompare(comparator,a,b)?b:a})}}function maxCompare(comparator,a,b){var comp=comparator(b,a);return comp===0&&b!==a&&(b===undefined||b===null||b!==b)||comp>0}function zipWithFactory(keyIter,zipper,iters){var zipSequence=makeSequence(keyIter);zipSequence.size=new ArraySeq(iters).map(function(i){return i.size}).min();zipSequence.__iterate=function(fn,reverse){var iterator=this.__iterator(ITERATE_VALUES,reverse);var step;var iterations=0;while(!(step=iterator.next()).done){if(fn(step.value,iterations++,this)===false){break}}return iterations};zipSequence.__iteratorUncached=function(type,reverse){var iterators=iters.map(function(i){return i=Iterable(i),getIterator(reverse?i.reverse():i)});var iterations=0;var isDone=false;return new Iterator(function(){var steps;if(!isDone){steps=iterators.map(function(i){return i.next()});isDone=steps.some(function(s){return s.done})}if(isDone){return iteratorDone()}return iteratorValue(type,iterations++,zipper.apply(null,steps.map(function(s){return s.value})))})};return zipSequence}function reify(iter,seq){return isSeq(iter)?seq:iter.constructor(seq)}function validateEntry(entry){if(entry!==Object(entry)){throw new TypeError("Expected [K, V] tuple: "+entry)}}function resolveSize(iter){assertNotInfinite(iter.size);return ensureSize(iter)}function iterableClass(iterable){return isKeyed(iterable)?KeyedIterable:isIndexed(iterable)?IndexedIterable:SetIterable}function makeSequence(iterable){return Object.create((isKeyed(iterable)?KeyedSeq:isIndexed(iterable)?IndexedSeq:SetSeq).prototype)}function cacheResultThrough(){if(this._iter.cacheResult){this._iter.cacheResult();this.size=this._iter.size;return this}else{return Seq.prototype.cacheResult.call(this)}}function defaultComparator(a,b){return a>b?1:a<b?-1:0}function forceIterator(keyPath){var iter=getIterator(keyPath);if(!iter){if(!isArrayLike(keyPath)){throw new TypeError("Expected iterable or array-like: "+keyPath)}iter=getIterator(Iterable(keyPath))}return iter}createClass(Record,KeyedCollection);function Record(defaultValues,name){var hasInitialized;var RecordType=function Record(values){if(values instanceof RecordType){return values}if(!(this instanceof RecordType)){return new RecordType(values)}if(!hasInitialized){hasInitialized=true;var keys=Object.keys(defaultValues);setProps(RecordTypePrototype,keys);RecordTypePrototype.size=keys.length;RecordTypePrototype._name=name;RecordTypePrototype._keys=keys;RecordTypePrototype._defaultValues=defaultValues}this._map=Map(values)};var RecordTypePrototype=RecordType.prototype=Object.create(RecordPrototype);RecordTypePrototype.constructor=RecordType;return RecordType}Record.prototype.toString=function(){return this.__toString(recordName(this)+" {","}")};Record.prototype.has=function(k){return this._defaultValues.hasOwnProperty(k)};Record.prototype.get=function(k,notSetValue){if(!this.has(k)){return notSetValue}var defaultVal=this._defaultValues[k];return this._map?this._map.get(k,defaultVal):defaultVal};Record.prototype.clear=function(){if(this.__ownerID){this._map&&this._map.clear();return this}var RecordType=this.constructor;return RecordType._empty||(RecordType._empty=makeRecord(this,emptyMap()))};Record.prototype.set=function(k,v){if(!this.has(k)){throw new Error('Cannot set unknown key "'+k+'" on '+recordName(this))}if(this._map&&!this._map.has(k)){var defaultVal=this._defaultValues[k];if(v===defaultVal){return this}}var newMap=this._map&&this._map.set(k,v);if(this.__ownerID||newMap===this._map){return this}return makeRecord(this,newMap)};Record.prototype.remove=function(k){if(!this.has(k)){return this}var newMap=this._map&&this._map.remove(k);if(this.__ownerID||newMap===this._map){return this}return makeRecord(this,newMap)};Record.prototype.wasAltered=function(){return this._map.wasAltered()};Record.prototype.__iterator=function(type,reverse){var this$0=this;return KeyedIterable(this._defaultValues).map(function(_,k){return this$0.get(k)}).__iterator(type,reverse)};Record.prototype.__iterate=function(fn,reverse){var this$0=this;return KeyedIterable(this._defaultValues).map(function(_,k){return this$0.get(k)}).__iterate(fn,reverse)};Record.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}var newMap=this._map&&this._map.__ensureOwner(ownerID);if(!ownerID){this.__ownerID=ownerID;this._map=newMap;return this}return makeRecord(this,newMap,ownerID)};var RecordPrototype=Record.prototype;RecordPrototype[DELETE]=RecordPrototype.remove;RecordPrototype.deleteIn=RecordPrototype.removeIn=MapPrototype.removeIn;RecordPrototype.merge=MapPrototype.merge;RecordPrototype.mergeWith=MapPrototype.mergeWith;RecordPrototype.mergeIn=MapPrototype.mergeIn;RecordPrototype.mergeDeep=MapPrototype.mergeDeep;RecordPrototype.mergeDeepWith=MapPrototype.mergeDeepWith;RecordPrototype.mergeDeepIn=MapPrototype.mergeDeepIn;RecordPrototype.setIn=MapPrototype.setIn;RecordPrototype.update=MapPrototype.update;RecordPrototype.updateIn=MapPrototype.updateIn;RecordPrototype.withMutations=MapPrototype.withMutations;RecordPrototype.asMutable=MapPrototype.asMutable;RecordPrototype.asImmutable=MapPrototype.asImmutable;function makeRecord(likeRecord,map,ownerID){var record=Object.create(Object.getPrototypeOf(likeRecord));record._map=map;record.__ownerID=ownerID;return record}function recordName(record){return record._name||record.constructor.name||"Record"}function setProps(prototype,names){try{names.forEach(setProp.bind(undefined,prototype))}catch(error){}}function setProp(prototype,name){Object.defineProperty(prototype,name,{get:function(){return this.get(name)},set:function(value){invariant(this.__ownerID,"Cannot set on an immutable record.");this.set(name,value)}})}createClass(Set,SetCollection);function Set(value){return value===null||value===undefined?emptySet():isSet(value)&&!isOrdered(value)?value:emptySet().withMutations(function(set){var iter=SetIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v){return set.add(v)})})}Set.of=function(){return this(arguments)};Set.fromKeys=function(value){return this(KeyedIterable(value).keySeq())};Set.prototype.toString=function(){return this.__toString("Set {","}")};Set.prototype.has=function(value){return this._map.has(value)};Set.prototype.add=function(value){return updateSet(this,this._map.set(value,true))};Set.prototype.remove=function(value){return updateSet(this,this._map.remove(value))};Set.prototype.clear=function(){return updateSet(this,this._map.clear())};Set.prototype.union=function(){var iters=SLICE$0.call(arguments,0);iters=iters.filter(function(x){return x.size!==0});if(iters.length===0){return this}if(this.size===0&&!this.__ownerID&&iters.length===1){return this.constructor(iters[0])}return this.withMutations(function(set){for(var ii=0;ii<iters.length;ii++){SetIterable(iters[ii]).forEach(function(value){return set.add(value)})}})};Set.prototype.intersect=function(){var iters=SLICE$0.call(arguments,0);if(iters.length===0){return this}iters=iters.map(function(iter){return SetIterable(iter)});var originalSet=this;return this.withMutations(function(set){originalSet.forEach(function(value){if(!iters.every(function(iter){return iter.includes(value)})){set.remove(value)}})})};Set.prototype.subtract=function(){var iters=SLICE$0.call(arguments,0);if(iters.length===0){return this}iters=iters.map(function(iter){return SetIterable(iter)});var originalSet=this;return this.withMutations(function(set){originalSet.forEach(function(value){if(iters.some(function(iter){return iter.includes(value)})){set.remove(value)}})})};Set.prototype.merge=function(){return this.union.apply(this,arguments)};Set.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return this.union.apply(this,iters)};Set.prototype.sort=function(comparator){return OrderedSet(sortFactory(this,comparator))};Set.prototype.sortBy=function(mapper,comparator){return OrderedSet(sortFactory(this,comparator,mapper))};Set.prototype.wasAltered=function(){return this._map.wasAltered()};Set.prototype.__iterate=function(fn,reverse){var this$0=this;return this._map.__iterate(function(_,k){return fn(k,k,this$0)},reverse)};Set.prototype.__iterator=function(type,reverse){return this._map.map(function(_,k){return k}).__iterator(type,reverse)};Set.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}var newMap=this._map.__ensureOwner(ownerID);if(!ownerID){this.__ownerID=ownerID;this._map=newMap;return this}return this.__make(newMap,ownerID)};function isSet(maybeSet){return!!(maybeSet&&maybeSet[IS_SET_SENTINEL])}Set.isSet=isSet;var IS_SET_SENTINEL="@@__IMMUTABLE_SET__@@";var SetPrototype=Set.prototype;SetPrototype[IS_SET_SENTINEL]=true;SetPrototype[DELETE]=SetPrototype.remove;SetPrototype.mergeDeep=SetPrototype.merge;SetPrototype.mergeDeepWith=SetPrototype.mergeWith;SetPrototype.withMutations=MapPrototype.withMutations;SetPrototype.asMutable=MapPrototype.asMutable;SetPrototype.asImmutable=MapPrototype.asImmutable;SetPrototype.__empty=emptySet;SetPrototype.__make=makeSet;function updateSet(set,newMap){if(set.__ownerID){set.size=newMap.size;set._map=newMap;return set}return newMap===set._map?set:newMap.size===0?set.__empty():set.__make(newMap)}function makeSet(map,ownerID){var set=Object.create(SetPrototype);set.size=map?map.size:0;set._map=map;set.__ownerID=ownerID;return set}var EMPTY_SET;function emptySet(){return EMPTY_SET||(EMPTY_SET=makeSet(emptyMap()))}createClass(OrderedSet,Set);function OrderedSet(value){return value===null||value===undefined?emptyOrderedSet():isOrderedSet(value)?value:emptyOrderedSet().withMutations(function(set){var iter=SetIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v){return set.add(v)})})}OrderedSet.of=function(){return this(arguments)};OrderedSet.fromKeys=function(value){return this(KeyedIterable(value).keySeq())};OrderedSet.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function isOrderedSet(maybeOrderedSet){return isSet(maybeOrderedSet)&&isOrdered(maybeOrderedSet)}OrderedSet.isOrderedSet=isOrderedSet;var OrderedSetPrototype=OrderedSet.prototype;OrderedSetPrototype[IS_ORDERED_SENTINEL]=true;OrderedSetPrototype.__empty=emptyOrderedSet;OrderedSetPrototype.__make=makeOrderedSet;function makeOrderedSet(map,ownerID){var set=Object.create(OrderedSetPrototype);set.size=map?map.size:0;set._map=map;set.__ownerID=ownerID;return set}var EMPTY_ORDERED_SET;function emptyOrderedSet(){return EMPTY_ORDERED_SET||(EMPTY_ORDERED_SET=makeOrderedSet(emptyOrderedMap()))}createClass(Stack,IndexedCollection);function Stack(value){return value===null||value===undefined?emptyStack():isStack(value)?value:emptyStack().unshiftAll(value)}Stack.of=function(){return this(arguments)};Stack.prototype.toString=function(){return this.__toString("Stack [","]")};Stack.prototype.get=function(index,notSetValue){var head=this._head;index=wrapIndex(this,index);while(head&&index--){head=head.next}return head?head.value:notSetValue};Stack.prototype.peek=function(){return this._head&&this._head.value};Stack.prototype.push=function(){if(arguments.length===0){return this}var newSize=this.size+arguments.length;var head=this._head;for(var ii=arguments.length-1;ii>=0;ii--){head={value:arguments[ii],next:head}}if(this.__ownerID){this.size=newSize;this._head=head;this.__hash=undefined;this.__altered=true;return this}return makeStack(newSize,head)};Stack.prototype.pushAll=function(iter){iter=IndexedIterable(iter);if(iter.size===0){return this}assertNotInfinite(iter.size);var newSize=this.size;var head=this._head;iter.reverse().forEach(function(value){newSize++;head={value:value,next:head}});if(this.__ownerID){this.size=newSize;this._head=head;this.__hash=undefined;this.__altered=true;return this}return makeStack(newSize,head)};Stack.prototype.pop=function(){return this.slice(1)};Stack.prototype.unshift=function(){return this.push.apply(this,arguments)};Stack.prototype.unshiftAll=function(iter){return this.pushAll(iter)};Stack.prototype.shift=function(){return this.pop.apply(this,arguments)};Stack.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=0;this._head=undefined;this.__hash=undefined;this.__altered=true;return this}return emptyStack()};Stack.prototype.slice=function(begin,end){if(wholeSlice(begin,end,this.size)){return this}var resolvedBegin=resolveBegin(begin,this.size);var resolvedEnd=resolveEnd(end,this.size);if(resolvedEnd!==this.size){return IndexedCollection.prototype.slice.call(this,begin,end)}var newSize=this.size-resolvedBegin;var head=this._head;while(resolvedBegin--){head=head.next}if(this.__ownerID){this.size=newSize;this._head=head;this.__hash=undefined;this.__altered=true;return this}return makeStack(newSize,head)};Stack.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}if(!ownerID){this.__ownerID=ownerID;this.__altered=false;return this}return makeStack(this.size,this._head,ownerID,this.__hash)};Stack.prototype.__iterate=function(fn,reverse){if(reverse){return this.reverse().__iterate(fn)}var iterations=0;var node=this._head;while(node){if(fn(node.value,iterations++,this)===false){break}node=node.next}return iterations};Stack.prototype.__iterator=function(type,reverse){if(reverse){return this.reverse().__iterator(type)}var iterations=0;var node=this._head;return new Iterator(function(){if(node){var value=node.value;node=node.next;return iteratorValue(type,iterations++,value)}return iteratorDone()})};function isStack(maybeStack){return!!(maybeStack&&maybeStack[IS_STACK_SENTINEL])}Stack.isStack=isStack;var IS_STACK_SENTINEL="@@__IMMUTABLE_STACK__@@";var StackPrototype=Stack.prototype;StackPrototype[IS_STACK_SENTINEL]=true;StackPrototype.withMutations=MapPrototype.withMutations;StackPrototype.asMutable=MapPrototype.asMutable;StackPrototype.asImmutable=MapPrototype.asImmutable;StackPrototype.wasAltered=MapPrototype.wasAltered;function makeStack(size,head,ownerID,hash){var map=Object.create(StackPrototype);map.size=size;map._head=head;map.__ownerID=ownerID;map.__hash=hash;map.__altered=false;return map}var EMPTY_STACK;function emptyStack(){return EMPTY_STACK||(EMPTY_STACK=makeStack(0))}function mixin(ctor,methods){var keyCopier=function(key){ctor.prototype[key]=methods[key]};Object.keys(methods).forEach(keyCopier);Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(methods).forEach(keyCopier);return ctor}Iterable.Iterator=Iterator;mixin(Iterable,{toArray:function(){assertNotInfinite(this.size);var array=new Array(this.size||0);this.valueSeq().__iterate(function(v,i){array[i]=v});return array},toIndexedSeq:function(){return new ToIndexedSequence(this)},toJS:function(){return this.toSeq().map(function(value){return value&&typeof value.toJS==="function"?value.toJS():value}).__toJS()},toJSON:function(){return this.toSeq().map(function(value){return value&&typeof value.toJSON==="function"?value.toJSON():value}).__toJS()},toKeyedSeq:function(){return new ToKeyedSequence(this,true)},toMap:function(){return Map(this.toKeyedSeq())},toObject:function(){assertNotInfinite(this.size);var object={};this.__iterate(function(v,k){object[k]=v});return object},toOrderedMap:function(){return OrderedMap(this.toKeyedSeq())},toOrderedSet:function(){return OrderedSet(isKeyed(this)?this.valueSeq():this)},toSet:function(){return Set(isKeyed(this)?this.valueSeq():this)},toSetSeq:function(){return new ToSetSequence(this)},toSeq:function(){return isIndexed(this)?this.toIndexedSeq():isKeyed(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Stack(isKeyed(this)?this.valueSeq():this)},toList:function(){return List(isKeyed(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(head,tail){if(this.size===0){return head+tail}return head+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+tail},concat:function(){var values=SLICE$0.call(arguments,0);return reify(this,concatFactory(this,values))},includes:function(searchValue){return this.some(function(value){return is(value,searchValue)})},entries:function(){return this.__iterator(ITERATE_ENTRIES)},every:function(predicate,context){assertNotInfinite(this.size);var returnValue=true;this.__iterate(function(v,k,c){if(!predicate.call(context,v,k,c)){returnValue=false;return false}});return returnValue},filter:function(predicate,context){return reify(this,filterFactory(this,predicate,context,true))},find:function(predicate,context,notSetValue){var entry=this.findEntry(predicate,context);return entry?entry[1]:notSetValue},forEach:function(sideEffect,context){assertNotInfinite(this.size);return this.__iterate(context?sideEffect.bind(context):sideEffect)},join:function(separator){assertNotInfinite(this.size);separator=separator!==undefined?""+separator:",";var joined="";var isFirst=true;this.__iterate(function(v){isFirst?isFirst=false:joined+=separator;joined+=v!==null&&v!==undefined?v.toString():""});return joined},keys:function(){return this.__iterator(ITERATE_KEYS)},map:function(mapper,context){return reify(this,mapFactory(this,mapper,context))},reduce:function(reducer,initialReduction,context){assertNotInfinite(this.size);var reduction;var useFirst;if(arguments.length<2){useFirst=true}else{reduction=initialReduction}this.__iterate(function(v,k,c){if(useFirst){useFirst=false;reduction=v}else{reduction=reducer.call(context,reduction,v,k,c)}});return reduction},reduceRight:function(reducer,initialReduction,context){var reversed=this.toKeyedSeq().reverse();return reversed.reduce.apply(reversed,arguments)},reverse:function(){return reify(this,reverseFactory(this,true))},slice:function(begin,end){return reify(this,sliceFactory(this,begin,end,true))},some:function(predicate,context){return!this.every(not(predicate),context)},sort:function(comparator){return reify(this,sortFactory(this,comparator))},values:function(){return this.__iterator(ITERATE_VALUES)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==undefined?this.size===0:!this.some(function(){
return true})},count:function(predicate,context){return ensureSize(predicate?this.toSeq().filter(predicate,context):this)},countBy:function(grouper,context){return countByFactory(this,grouper,context)},equals:function(other){return deepEqual(this,other)},entrySeq:function(){var iterable=this;if(iterable._cache){return new ArraySeq(iterable._cache)}var entriesSequence=iterable.toSeq().map(entryMapper).toIndexedSeq();entriesSequence.fromEntrySeq=function(){return iterable.toSeq()};return entriesSequence},filterNot:function(predicate,context){return this.filter(not(predicate),context)},findEntry:function(predicate,context,notSetValue){var found=notSetValue;this.__iterate(function(v,k,c){if(predicate.call(context,v,k,c)){found=[k,v];return false}});return found},findKey:function(predicate,context){var entry=this.findEntry(predicate,context);return entry&&entry[0]},findLast:function(predicate,context,notSetValue){return this.toKeyedSeq().reverse().find(predicate,context,notSetValue)},findLastEntry:function(predicate,context,notSetValue){return this.toKeyedSeq().reverse().findEntry(predicate,context,notSetValue)},findLastKey:function(predicate,context){return this.toKeyedSeq().reverse().findKey(predicate,context)},first:function(){return this.find(returnTrue)},flatMap:function(mapper,context){return reify(this,flatMapFactory(this,mapper,context))},flatten:function(depth){return reify(this,flattenFactory(this,depth,true))},fromEntrySeq:function(){return new FromEntriesSequence(this)},get:function(searchKey,notSetValue){return this.find(function(_,key){return is(key,searchKey)},undefined,notSetValue)},getIn:function(searchKeyPath,notSetValue){var nested=this;var iter=forceIterator(searchKeyPath);var step;while(!(step=iter.next()).done){var key=step.value;nested=nested&&nested.get?nested.get(key,NOT_SET):NOT_SET;if(nested===NOT_SET){return notSetValue}}return nested},groupBy:function(grouper,context){return groupByFactory(this,grouper,context)},has:function(searchKey){return this.get(searchKey,NOT_SET)!==NOT_SET},hasIn:function(searchKeyPath){return this.getIn(searchKeyPath,NOT_SET)!==NOT_SET},isSubset:function(iter){iter=typeof iter.includes==="function"?iter:Iterable(iter);return this.every(function(value){return iter.includes(value)})},isSuperset:function(iter){iter=typeof iter.isSubset==="function"?iter:Iterable(iter);return iter.isSubset(this)},keyOf:function(searchValue){return this.findKey(function(value){return is(value,searchValue)})},keySeq:function(){return this.toSeq().map(keyMapper).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(searchValue){return this.toKeyedSeq().reverse().keyOf(searchValue)},max:function(comparator){return maxFactory(this,comparator)},maxBy:function(mapper,comparator){return maxFactory(this,comparator,mapper)},min:function(comparator){return maxFactory(this,comparator?neg(comparator):defaultNegComparator)},minBy:function(mapper,comparator){return maxFactory(this,comparator?neg(comparator):defaultNegComparator,mapper)},rest:function(){return this.slice(1)},skip:function(amount){return this.slice(Math.max(0,amount))},skipLast:function(amount){return reify(this,this.toSeq().reverse().skip(amount).reverse())},skipWhile:function(predicate,context){return reify(this,skipWhileFactory(this,predicate,context,true))},skipUntil:function(predicate,context){return this.skipWhile(not(predicate),context)},sortBy:function(mapper,comparator){return reify(this,sortFactory(this,comparator,mapper))},take:function(amount){return this.slice(0,Math.max(0,amount))},takeLast:function(amount){return reify(this,this.toSeq().reverse().take(amount).reverse())},takeWhile:function(predicate,context){return reify(this,takeWhileFactory(this,predicate,context))},takeUntil:function(predicate,context){return this.takeWhile(not(predicate),context)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=hashIterable(this))}});var IterablePrototype=Iterable.prototype;IterablePrototype[IS_ITERABLE_SENTINEL]=true;IterablePrototype[ITERATOR_SYMBOL]=IterablePrototype.values;IterablePrototype.__toJS=IterablePrototype.toArray;IterablePrototype.__toStringMapper=quoteString;IterablePrototype.inspect=IterablePrototype.toSource=function(){return this.toString()};IterablePrototype.chain=IterablePrototype.flatMap;IterablePrototype.contains=IterablePrototype.includes;mixin(KeyedIterable,{flip:function(){return reify(this,flipFactory(this))},mapEntries:function(mapper,context){var this$0=this;var iterations=0;return reify(this,this.toSeq().map(function(v,k){return mapper.call(context,[k,v],iterations++,this$0)}).fromEntrySeq())},mapKeys:function(mapper,context){var this$0=this;return reify(this,this.toSeq().flip().map(function(k,v){return mapper.call(context,k,v,this$0)}).flip())}});var KeyedIterablePrototype=KeyedIterable.prototype;KeyedIterablePrototype[IS_KEYED_SENTINEL]=true;KeyedIterablePrototype[ITERATOR_SYMBOL]=IterablePrototype.entries;KeyedIterablePrototype.__toJS=IterablePrototype.toObject;KeyedIterablePrototype.__toStringMapper=function(v,k){return JSON.stringify(k)+": "+quoteString(v)};mixin(IndexedIterable,{toKeyedSeq:function(){return new ToKeyedSequence(this,false)},filter:function(predicate,context){return reify(this,filterFactory(this,predicate,context,false))},findIndex:function(predicate,context){var entry=this.findEntry(predicate,context);return entry?entry[0]:-1},indexOf:function(searchValue){var key=this.keyOf(searchValue);return key===undefined?-1:key},lastIndexOf:function(searchValue){var key=this.lastKeyOf(searchValue);return key===undefined?-1:key},reverse:function(){return reify(this,reverseFactory(this,false))},slice:function(begin,end){return reify(this,sliceFactory(this,begin,end,false))},splice:function(index,removeNum){var numArgs=arguments.length;removeNum=Math.max(removeNum|0,0);if(numArgs===0||numArgs===2&&!removeNum){return this}index=resolveBegin(index,index<0?this.count():this.size);var spliced=this.slice(0,index);return reify(this,numArgs===1?spliced:spliced.concat(arrCopy(arguments,2),this.slice(index+removeNum)))},findLastIndex:function(predicate,context){var entry=this.findLastEntry(predicate,context);return entry?entry[0]:-1},first:function(){return this.get(0)},flatten:function(depth){return reify(this,flattenFactory(this,depth,false))},get:function(index,notSetValue){index=wrapIndex(this,index);return index<0||(this.size===Infinity||this.size!==undefined&&index>this.size)?notSetValue:this.find(function(_,key){return key===index},undefined,notSetValue)},has:function(index){index=wrapIndex(this,index);return index>=0&&(this.size!==undefined?this.size===Infinity||index<this.size:this.indexOf(index)!==-1)},interpose:function(separator){return reify(this,interposeFactory(this,separator))},interleave:function(){var iterables=[this].concat(arrCopy(arguments));var zipped=zipWithFactory(this.toSeq(),IndexedSeq.of,iterables);var interleaved=zipped.flatten(true);if(zipped.size){interleaved.size=zipped.size*iterables.length}return reify(this,interleaved)},keySeq:function(){return Range(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(predicate,context){return reify(this,skipWhileFactory(this,predicate,context,false))},zip:function(){var iterables=[this].concat(arrCopy(arguments));return reify(this,zipWithFactory(this,defaultZipper,iterables))},zipWith:function(zipper){var iterables=arrCopy(arguments);iterables[0]=this;return reify(this,zipWithFactory(this,zipper,iterables))}});IndexedIterable.prototype[IS_INDEXED_SENTINEL]=true;IndexedIterable.prototype[IS_ORDERED_SENTINEL]=true;mixin(SetIterable,{get:function(value,notSetValue){return this.has(value)?value:notSetValue},includes:function(value){return this.has(value)},keySeq:function(){return this.valueSeq()}});SetIterable.prototype.has=IterablePrototype.includes;SetIterable.prototype.contains=SetIterable.prototype.includes;mixin(KeyedSeq,KeyedIterable.prototype);mixin(IndexedSeq,IndexedIterable.prototype);mixin(SetSeq,SetIterable.prototype);mixin(KeyedCollection,KeyedIterable.prototype);mixin(IndexedCollection,IndexedIterable.prototype);mixin(SetCollection,SetIterable.prototype);function keyMapper(v,k){return k}function entryMapper(v,k){return[k,v]}function not(predicate){return function(){return!predicate.apply(this,arguments)}}function neg(predicate){return function(){return-predicate.apply(this,arguments)}}function quoteString(value){return typeof value==="string"?JSON.stringify(value):String(value)}function defaultZipper(){return arrCopy(arguments)}function defaultNegComparator(a,b){return a<b?1:a>b?-1:0}function hashIterable(iterable){if(iterable.size===Infinity){return 0}var ordered=isOrdered(iterable);var keyed=isKeyed(iterable);var h=ordered?1:0;var size=iterable.__iterate(keyed?ordered?function(v,k){h=31*h+hashMerge(hash(v),hash(k))|0}:function(v,k){h=h+hashMerge(hash(v),hash(k))|0}:ordered?function(v){h=31*h+hash(v)|0}:function(v){h=h+hash(v)|0});return murmurHashOfSize(size,h)}function murmurHashOfSize(size,h){h=imul(h,3432918353);h=imul(h<<15|h>>>-15,461845907);h=imul(h<<13|h>>>-13,5);h=(h+3864292196|0)^size;h=imul(h^h>>>16,2246822507);h=imul(h^h>>>13,3266489909);h=smi(h^h>>>16);return h}function hashMerge(a,b){return a^b+2654435769+(a<<6)+(a>>2)|0}var Immutable={Iterable:Iterable,Seq:Seq,Collection:Collection,Map:Map,OrderedMap:OrderedMap,List:List,Stack:Stack,Set:Set,OrderedSet:OrderedSet,Record:Record,Range:Range,Repeat:Repeat,is:is,fromJS:fromJS};return Immutable})},{}],118:[function(require,module,exports){var isArguments=require("lodash.isarguments"),isArray=require("lodash.isarray");function isObjectLike(value){return!!value&&typeof value=="object"}var MAX_SAFE_INTEGER=9007199254740991;function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function baseFlatten(array,isDeep,isStrict,result){result||(result=[]);var index=-1,length=array.length;while(++index<length){var value=array[index];if(isObjectLike(value)&&isArrayLike(value)&&(isStrict||isArray(value)||isArguments(value))){if(isDeep){baseFlatten(value,isDeep,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}var getLength=baseProperty("length");function isArrayLike(value){return value!=null&&isLength(getLength(value))}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}module.exports=baseFlatten},{"lodash.isarguments":130,"lodash.isarray":131}],119:[function(require,module,exports){var baseFor=createBaseFor();function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}module.exports=baseFor},{}],120:[function(require,module,exports){function baseIndexOf(array,value,fromIndex){if(value!==value){return indexOfNaN(array,fromIndex)}var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}function indexOfNaN(array,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?0:-1);while(fromRight?index--:++index<length){var other=array[index];if(other!==other){return index}}return-1}module.exports=baseIndexOf},{}],121:[function(require,module,exports){var baseIndexOf=require("lodash._baseindexof"),cacheIndexOf=require("lodash._cacheindexof"),createCache=require("lodash._createcache");var LARGE_ARRAY_SIZE=200;function baseUniq(array,iteratee){var index=-1,indexOf=baseIndexOf,length=array.length,isCommon=true,isLarge=isCommon&&length>=LARGE_ARRAY_SIZE,seen=isLarge?createCache():null,result=[];if(seen){indexOf=cacheIndexOf;isCommon=false}else{isLarge=false;seen=iteratee?[]:result}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(isCommon&&value===value){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer}}if(iteratee){seen.push(computed)}result.push(value)}else if(indexOf(seen,computed,0)<0){if(iteratee||isLarge){seen.push(computed)}result.push(value)}}return result}module.exports=baseUniq},{"lodash._baseindexof":120,"lodash._cacheindexof":123,"lodash._createcache":124}],122:[function(require,module,exports){function bindCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(thisArg===undefined){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}function identity(value){return value}module.exports=bindCallback},{}],123:[function(require,module,exports){function cacheIndexOf(cache,value){var data=cache.data,result=typeof value=="string"||isObject(value)?data.set.has(value):data.hash[value];return result?0:-1}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}module.exports=cacheIndexOf},{}],124:[function(require,module,exports){(function(global){var getNative=require("lodash._getnative");var Set=getNative(global,"Set");var nativeCreate=getNative(Object,"create");function SetCache(values){var length=values?values.length:0;this.data={hash:nativeCreate(null),set:new Set};while(length--){this.push(values[length])}}function cachePush(value){var data=this.data;if(typeof value=="string"||isObject(value)){data.set.add(value)}else{data.hash[value]=true}}function createCache(values){return nativeCreate&&Set?new SetCache(values):null}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}SetCache.prototype.push=cachePush;module.exports=createCache}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"lodash._getnative":125}],125:[function(require,module,exports){var funcTag="[object Function]";var reIsHostCtor=/^\[object .+?Constructor\]$/;function isObjectLike(value){return!!value&&typeof value=="object"}var objectProto=Object.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objToString=objectProto.toString;var reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined}function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isNative(value){if(value==null){return false}if(isFunction(value)){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}module.exports=getNative},{}],126:[function(require,module,exports){(function(global){var objectTypes={function:true,object:true};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType?exports:undefined;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType?module:undefined;var freeGlobal=checkGlobal(freeExports&&freeModule&&typeof global=="object"&&global);var freeSelf=checkGlobal(objectTypes[typeof self]&&self);var freeWindow=checkGlobal(objectTypes[typeof window]&&window);var thisGlobal=checkGlobal(objectTypes[typeof this]&&this);var root=freeGlobal||freeWindow!==(thisGlobal&&thisGlobal.window)&&freeWindow||freeSelf||thisGlobal||Function("return this")();function checkGlobal(value){return value&&value.Object===Object?value:null}module.exports=root}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],127:[function(require,module,exports){var root=require("lodash._root");var INFINITY=1/0;var symbolTag="[object Symbol]";var reLatin1=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g;var rsComboMarksRange="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange="\\u20d0-\\u20f0";var rsCombo="["+rsComboMarksRange+rsComboSymbolsRange+"]";var reComboMark=RegExp(rsCombo,"g");var deburredLetters={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"};function deburrLetter(letter){return deburredLetters[letter]}var objectProto=Object.prototype;var objectToString=objectProto.toString;var Symbol=root.Symbol;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=Symbol?symbolProto.toString:undefined;function isObjectLike(value){return!!value&&typeof value=="object"}function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toString(value){if(typeof value=="string"){return value}if(value==null){return""}if(isSymbol(value)){return Symbol?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function deburr(string){string=toString(string);return string&&string.replace(reLatin1,deburrLetter).replace(reComboMark,"")}module.exports=deburr},{"lodash._root":126}],128:[function(require,module,exports){var root=require("lodash._root");var INFINITY=1/0;var symbolTag="[object Symbol]";var reUnescapedHtml=/[&<>"'`]/g,reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};function escapeHtmlChar(chr){return htmlEscapes[chr]}var objectProto=Object.prototype;var objectToString=objectProto.toString;var Symbol=root.Symbol;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=Symbol?symbolProto.toString:undefined;function isObjectLike(value){return!!value&&typeof value=="object"}function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toString(value){if(typeof value=="string"){return value}if(value==null){return""}if(isSymbol(value)){return Symbol?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function escape(string){string=toString(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}module.exports=escape},{"lodash._root":126}],129:[function(require,module,exports){var baseFor=require("lodash._basefor"),bindCallback=require("lodash._bindcallback"),keys=require("lodash.keys");function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}function createForOwn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!="function"||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3)}return objectFunc(object,iteratee)}}var forOwn=createForOwn(baseForOwn);module.exports=forOwn},{"lodash._basefor":119,"lodash._bindcallback":122,"lodash.keys":133}],130:[function(require,module,exports){var MAX_SAFE_INTEGER=9007199254740991;var argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var propertyIsEnumerable=objectProto.propertyIsEnumerable;function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isObjectLike(value){return!!value&&typeof value=="object"}module.exports=isArguments},{}],131:[function(require,module,exports){var arrayTag="[object Array]",funcTag="[object Function]";var reIsHostCtor=/^\[object .+?Constructor\]$/;function isObjectLike(value){return!!value&&typeof value=="object"}var objectProto=Object.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objToString=objectProto.toString;var reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var nativeIsArray=getNative(Array,"isArray");var MAX_SAFE_INTEGER=9007199254740991;function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}var isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isNative(value){if(value==null){return false}if(isFunction(value)){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}module.exports=isArray},{}],132:[function(require,module,exports){var deburr=require("lodash.deburr"),words=require("lodash.words");function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array.length;if(initAccum&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string)),callback,"")}}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()});module.exports=kebabCase},{"lodash.deburr":127,"lodash.words":136}],133:[function(require,module,exports){var getNative=require("lodash._getnative"),isArguments=require("lodash.isarguments"),isArray=require("lodash.isarray");var reIsUint=/^\d+$/;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeKeys=getNative(Object,"keys");var MAX_SAFE_INTEGER=9007199254740991;function baseProperty(key){return function(object){return object==null?undefined:object[key]}}var getLength=baseProperty("length");function isArrayLike(value){return value!=null&&isLength(getLength(value))}function isIndex(value,length){value=typeof value=="number"||reIsUint.test(value)?+value:-1;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function shimKeys(object){var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length;var allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object));var index=-1,result=[];while(++index<propsLength){var key=props[index];if(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key)){result.push(key)}}return result}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}var keys=!nativeKeys?shimKeys:function(object){var Ctor=object==null?undefined:object.constructor;if(typeof Ctor=="function"&&Ctor.prototype===object||typeof object!="function"&&isArrayLike(object)){return shimKeys(object)}return isObject(object)?nativeKeys(object):[]};function keysIn(object){if(object==null){return[]}if(!isObject(object)){object=Object(object)}var length=object.length;length=length&&isLength(length)&&(isArray(object)||isArguments(object))&&length||0;var Ctor=object.constructor,index=-1,isProto=typeof Ctor=="function"&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;while(++index<length){result[index]=index+""}for(var key in object){if(!(skipIndexes&&isIndex(key,length))&&!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}module.exports=keys},{"lodash._getnative":125,"lodash.isarguments":130,"lodash.isarray":131}],134:[function(require,module,exports){var FUNC_ERROR_TEXT="Expected a function";var nativeMax=Math.max;function restParam(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=nativeMax(start===undefined?func.length-1:+start||0,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);while(++index<length){rest[index]=args[start+index]}switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=rest;return func.apply(this,otherArgs)}}module.exports=restParam},{}],135:[function(require,module,exports){var baseFlatten=require("lodash._baseflatten"),baseUniq=require("lodash._baseuniq"),restParam=require("lodash.restparam");var union=restParam(function(arrays){return baseUniq(baseFlatten(arrays,false,true))});module.exports=union},{"lodash._baseflatten":118,"lodash._baseuniq":121,"lodash.restparam":134}],136:[function(require,module,exports){var root=require("lodash._root");var INFINITY=1/0;var symbolTag="[object Symbol]";var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange="\\u20d0-\\u20f0",rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsQuoteRange="\\u2018\\u2019\\u201c\\u201d",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsQuoteRange+rsSpaceRange;var rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboMarksRange+rsComboSymbolsRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d";var rsLowerMisc="(?:"+rsLower+"|"+rsMisc+")",rsUpperMisc="(?:"+rsUpper+"|"+rsMisc+")",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq;var reBasicWord=/[a-zA-Z0-9]+/g;var reComplexWord=RegExp([rsUpper+"?"+rsLower+"+(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsUpperMisc+"+(?="+[rsBreak,rsUpper+rsLowerMisc,"$"].join("|")+")",rsUpper+"?"+rsLowerMisc+"+",rsUpper+"+",rsDigits,rsEmoji].join("|"),"g");var reHasComplexWord=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var objectProto=Object.prototype;var objectToString=objectProto.toString;var Symbol=root.Symbol;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=Symbol?symbolProto.toString:undefined;function isObjectLike(value){return!!value&&typeof value=="object"}function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toString(value){if(typeof value=="string"){return value}if(value==null){return""}if(isSymbol(value)){return Symbol?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function words(string,pattern,guard){string=toString(string);pattern=guard?undefined:pattern;if(pattern===undefined){pattern=reHasComplexWord.test(string)?reComplexWord:reBasicWord}return string.match(pattern)||[]}module.exports=words},{"lodash._root":126}],137:[function(require,module,exports){"use strict";var proto=Element.prototype;var vendor=proto.matches||proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match;function match(el,selector){if(vendor)return vendor.call(el,selector);var nodes=el.parentNode.querySelectorAll(selector);for(var i=0;i<nodes.length;i++){if(nodes[i]==el)return true}return false}},{}],138:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported");
};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],139:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=classNameFromVNode;var _selectorParser2=require("./selectorParser");var _selectorParser3=_interopRequireDefault(_selectorParser2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function classNameFromVNode(vNode){var _selectorParser=(0,_selectorParser3.default)(vNode.sel);var cn=_selectorParser.className;if(!vNode.data){return cn}var _vNode$data=vNode.data;var dataClass=_vNode$data.class;var props=_vNode$data.props;if(dataClass){var c=Object.keys(vNode.data.class).filter(function(cl){return vNode.data.class[cl]});cn+=" "+c.join(" ")}if(props&&props.className){cn+=" "+props.className}return cn.trim()}},{"./selectorParser":140}],140:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=selectorParser;var _browserSplit=require("browser-split");var _browserSplit2=_interopRequireDefault(_browserSplit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var classIdSplit=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/;var notClassId=/^\.|#/;function selectorParser(){var selector=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var tagName=void 0;var id="";var classes=[];var tagParts=(0,_browserSplit2.default)(selector,classIdSplit);if(notClassId.test(tagParts[1])||selector===""){tagName="div"}var part=void 0;var type=void 0;var i=void 0;for(i=0;i<tagParts.length;i++){part=tagParts[i];if(!part){continue}type=part.charAt(0);if(!tagName){tagName=part}else if(type==="."){classes.push(part.substring(1,part.length))}else if(type==="#"){id=part.substring(1,part.length)}}return{tagName:tagName,id:id,className:classes.join(" ")}}},{"browser-split":61}],141:[function(require,module,exports){module.exports={a:true,defs:true,glyph:true,g:true,marker:true,mask:true,"missing-glyph":true,pattern:true,svg:true,switch:true,symbol:true,desc:true,metadata:true,title:true}},{}],142:[function(require,module,exports){var init=require("./init");module.exports=init([require("./modules/attributes"),require("./modules/style")])},{"./init":143,"./modules/attributes":144,"./modules/style":145}],143:[function(require,module,exports){var parseSelector=require("./parse-selector");var VOID_ELEMENTS=require("./void-elements");var CONTAINER_ELEMENTS=require("./container-elements");module.exports=function init(modules){function parse(data){return modules.reduce(function(arr,fn){arr.push(fn(data));return arr},[]).filter(function(result){return result!==""})}return function renderToString(vnode){if(!vnode.sel&&vnode.text){return vnode.text}vnode.data=vnode.data||{};if(typeof vnode.sel==="string"&&vnode.sel.slice(0,5)==="thunk"){vnode=vnode.data.fn.apply(null,vnode.data.args)}var tagName=parseSelector(vnode.sel).tagName;var attributes=parse(vnode);var svg=vnode.data.ns==="http://www.w3.org/2000/svg";var tag=[];tag.push("<"+tagName);if(attributes.length){tag.push(" "+attributes.join(" "))}if(svg&&CONTAINER_ELEMENTS[tagName]!==true){tag.push(" /")}tag.push(">");if(VOID_ELEMENTS[tagName]!==true&&!svg||svg&&CONTAINER_ELEMENTS[tagName]===true){if(vnode.data.props&&vnode.data.props.innerHTML){tag.push(vnode.data.props.innerHTML)}else if(vnode.text){tag.push(vnode.text)}else if(vnode.children){vnode.children.forEach(function(child){tag.push(renderToString(child))})}tag.push("</"+tagName+">")}return tag.join("")}}},{"./container-elements":141,"./parse-selector":146,"./void-elements":147}],144:[function(require,module,exports){var forOwn=require("lodash.forown");var escape=require("lodash.escape");var union=require("lodash.union");var parseSelector=require("../parse-selector");module.exports=function attributes(vnode){var selector=parseSelector(vnode.sel);var parsedClasses=selector.className.split(" ");var attributes=[];var classes=[];var values={};if(selector.id){values.id=selector.id}setAttributes(vnode.data.props,values);setAttributes(vnode.data.attrs,values);if(vnode.data.class){values.class=undefined}forOwn(vnode.data.class,function(value,key){if(value===true){classes.push(key)}});classes=union(classes,values.class,parsedClasses).filter(function(x){return x!==""});if(classes.length){values.class=classes.join(" ")}forOwn(values,function(value,key){attributes.push(value===true?key:key+'="'+escape(value)+'"')});return attributes.length?attributes.join(" "):""};function setAttributes(values,target){forOwn(values,function(value,key){if(key==="htmlFor"){target["for"]=value;return}if(key==="className"){target["class"]=value.split(" ");return}if(key==="innerHTML"){return}target[key]=value})}},{"../parse-selector":146,"lodash.escape":128,"lodash.forown":129,"lodash.union":135}],145:[function(require,module,exports){var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var forOwn=require("lodash.forown");var escape=require("lodash.escape");var kebabCase=require("lodash.kebabcase");module.exports=function style(vnode){var styles=[];var style=vnode.data.style||{};if(style.delayed){_extends(style,style.delayed)}forOwn(style,function(value,key){if(typeof value==="string"){styles.push(kebabCase(key)+": "+escape(value))}});return styles.length?'style="'+styles.join("; ")+'"':""}},{"lodash.escape":128,"lodash.forown":129,"lodash.kebabcase":132}],146:[function(require,module,exports){var split=require("browser-split");var classIdSplit=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/;var notClassId=/^\.|#/;module.exports=function parseSelector(selector,upper){selector=selector||"";var tagName;var id="";var classes=[];var tagParts=split(selector,classIdSplit);if(notClassId.test(tagParts[1])||selector===""){tagName="div"}var part,type,i;for(i=0;i<tagParts.length;i++){part=tagParts[i];if(!part){continue}type=part.charAt(0);if(!tagName){tagName=part}else if(type==="."){classes.push(part.substring(1,part.length))}else if(type==="#"){id=part.substring(1,part.length)}}return{tagName:upper===true?tagName.toUpperCase():tagName,id:id,className:classes.join(" ")}}},{"browser-split":61}],147:[function(require,module,exports){module.exports={area:true,base:true,br:true,col:true,embed:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true}},{}],148:[function(require,module,exports){var VNode=require("./vnode");var is=require("./is");function addNS(data,children){data.ns="http://www.w3.org/2000/svg";if(children!==undefined){for(var i=0;i<children.length;++i){addNS(children[i].data,children[i].children)}}}module.exports=function h(sel,b,c){var data={},children,text,i;if(c!==undefined){data=b;if(is.array(c)){children=c}else if(is.primitive(c)){text=c}}else if(b!==undefined){if(is.array(b)){children=b}else if(is.primitive(b)){text=b}else{data=b}}if(is.array(children)){for(i=0;i<children.length;++i){if(is.primitive(children[i]))children[i]=VNode(undefined,undefined,undefined,children[i])}}if(sel[0]==="s"&&sel[1]==="v"&&sel[2]==="g"){addNS(data,children)}return VNode(sel,data,children,text,undefined)}},{"./is":150,"./vnode":159}],149:[function(require,module,exports){function createElement(tagName){return document.createElement(tagName)}function createElementNS(namespaceURI,qualifiedName){return document.createElementNS(namespaceURI,qualifiedName)}function createTextNode(text){return document.createTextNode(text)}function insertBefore(parentNode,newNode,referenceNode){parentNode.insertBefore(newNode,referenceNode)}function removeChild(node,child){node.removeChild(child)}function appendChild(node,child){node.appendChild(child)}function parentNode(node){return node.parentElement}function nextSibling(node){return node.nextSibling}function tagName(node){return node.tagName}function setTextContent(node,text){node.textContent=text}module.exports={createElement:createElement,createElementNS:createElementNS,createTextNode:createTextNode,appendChild:appendChild,removeChild:removeChild,insertBefore:insertBefore,parentNode:parentNode,nextSibling:nextSibling,tagName:tagName,setTextContent:setTextContent}},{}],150:[function(require,module,exports){module.exports={array:Array.isArray,primitive:function(s){return typeof s==="string"||typeof s==="number"}}},{}],151:[function(require,module,exports){var booleanAttrs=["allowfullscreen","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","draggable","enabled","formnovalidate","hidden","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","spellcheck","translate","truespeed","typemustmatch","visible"];var booleanAttrsDict={};for(var i=0,len=booleanAttrs.length;i<len;i++){booleanAttrsDict[booleanAttrs[i]]=true}function updateAttrs(oldVnode,vnode){var key,cur,old,elm=vnode.elm,oldAttrs=oldVnode.data.attrs||{},attrs=vnode.data.attrs||{};for(key in attrs){cur=attrs[key];old=oldAttrs[key];if(old!==cur){if(!cur&&booleanAttrsDict[key])elm.removeAttribute(key);else elm.setAttribute(key,cur)}}for(key in oldAttrs){if(!(key in attrs)){elm.removeAttribute(key)}}}module.exports={create:updateAttrs,update:updateAttrs}},{}],152:[function(require,module,exports){function updateClass(oldVnode,vnode){var cur,name,elm=vnode.elm,oldClass=oldVnode.data.class||{},klass=vnode.data.class||{};for(name in oldClass){if(!klass[name]){elm.classList.remove(name)}}for(name in klass){cur=klass[name];if(cur!==oldClass[name]){elm.classList[cur?"add":"remove"](name)}}}module.exports={create:updateClass,update:updateClass}},{}],153:[function(require,module,exports){var is=require("../is");function arrInvoker(arr){return function(){if(!arr.length)return;arr.length===2?arr[0](arr[1]):arr[0].apply(undefined,arr.slice(1))}}function fnInvoker(o){return function(ev){if(o.fn===null)return;o.fn(ev)}}function updateEventListeners(oldVnode,vnode){var name,cur,old,elm=vnode.elm,oldOn=oldVnode.data.on||{},on=vnode.data.on;if(!on)return;for(name in on){cur=on[name];old=oldOn[name];if(old===undefined){if(is.array(cur)){elm.addEventListener(name,arrInvoker(cur))}else{cur={fn:cur};on[name]=cur;elm.addEventListener(name,fnInvoker(cur))}}else if(is.array(old)){old.length=cur.length;for(var i=0;i<old.length;++i)old[i]=cur[i];on[name]=old}else{old.fn=cur;on[name]=old}}if(oldOn){for(name in oldOn){if(on[name]===undefined){var old=oldOn[name];if(is.array(old)){old.length=0}else{old.fn=null}}}}}module.exports={create:updateEventListeners,update:updateEventListeners}},{"../is":150}],154:[function(require,module,exports){var raf=typeof window!=="undefined"&&window.requestAnimationFrame||setTimeout;var nextFrame=function(fn){raf(function(){raf(fn)})};function setNextFrame(obj,prop,val){nextFrame(function(){obj[prop]=val})}function getTextNodeRect(textNode){var rect;if(document.createRange){var range=document.createRange();range.selectNodeContents(textNode);if(range.getBoundingClientRect){rect=range.getBoundingClientRect()}}return rect}function calcTransformOrigin(isTextNode,textRect,boundingRect){if(isTextNode){if(textRect){var relativeCenterX=textRect.left+textRect.width/2-boundingRect.left;var relativeCenterY=textRect.top+textRect.height/2-boundingRect.top;return relativeCenterX+"px "+relativeCenterY+"px"}}return"0 0"}function getTextDx(oldTextRect,newTextRect){if(oldTextRect&&newTextRect){return oldTextRect.left+oldTextRect.width/2-(newTextRect.left+newTextRect.width/2)}return 0}function getTextDy(oldTextRect,newTextRect){if(oldTextRect&&newTextRect){return oldTextRect.top+oldTextRect.height/2-(newTextRect.top+newTextRect.height/2)}return 0}function isTextElement(elm){return elm.childNodes.length===1&&elm.childNodes[0].nodeType===3}var removed,created;function pre(oldVnode,vnode){removed={};created=[]}function create(oldVnode,vnode){var hero=vnode.data.hero;if(hero&&hero.id){created.push(hero.id);created.push(vnode)}}function destroy(vnode){var hero=vnode.data.hero;if(hero&&hero.id){var elm=vnode.elm;vnode.isTextNode=isTextElement(elm);vnode.boundingRect=elm.getBoundingClientRect();vnode.textRect=vnode.isTextNode?getTextNodeRect(elm.childNodes[0]):null;var computedStyle=window.getComputedStyle(elm,null);vnode.savedStyle=JSON.parse(JSON.stringify(computedStyle));removed[hero.id]=vnode}}function post(){var i,id,newElm,oldVnode,oldElm,hRatio,wRatio,oldRect,newRect,dx,dy,origTransform,origTransition,newStyle,oldStyle,newComputedStyle,isTextNode,newTextRect,oldTextRect;for(i=0;i<created.length;i+=2){id=created[i];newElm=created[i+1].elm;oldVnode=removed[id];if(oldVnode){isTextNode=oldVnode.isTextNode&&isTextElement(newElm);newStyle=newElm.style;newComputedStyle=window.getComputedStyle(newElm,null);oldElm=oldVnode.elm;oldStyle=oldElm.style;newRect=newElm.getBoundingClientRect();oldRect=oldVnode.boundingRect;if(isTextNode){newTextRect=getTextNodeRect(newElm.childNodes[0]);oldTextRect=oldVnode.textRect;dx=getTextDx(oldTextRect,newTextRect);dy=getTextDy(oldTextRect,newTextRect)}else{dx=oldRect.left-newRect.left;dy=oldRect.top-newRect.top}hRatio=newRect.height/Math.max(oldRect.height,1);wRatio=isTextNode?hRatio:newRect.width/Math.max(oldRect.width,1);origTransform=newStyle.transform;origTransition=newStyle.transition;if(newComputedStyle.display==="inline")newStyle.display="inline-block";newStyle.transition=origTransition+"transform 0s";newStyle.transformOrigin=calcTransformOrigin(isTextNode,newTextRect,newRect);newStyle.opacity="0";newStyle.transform=origTransform+"translate("+dx+"px, "+dy+"px) "+"scale("+1/wRatio+", "+1/hRatio+")";setNextFrame(newStyle,"transition",origTransition);setNextFrame(newStyle,"transform",origTransform);setNextFrame(newStyle,"opacity","1");for(var key in oldVnode.savedStyle){if(parseInt(key)!=key){var ms=key.substring(0,2)==="ms";var moz=key.substring(0,3)==="moz";var webkit=key.substring(0,6)==="webkit";if(!ms&&!moz&&!webkit)oldStyle[key]=oldVnode.savedStyle[key]}}oldStyle.position="absolute";oldStyle.top=oldRect.top+"px";oldStyle.left=oldRect.left+"px";oldStyle.width=oldRect.width+"px";oldStyle.height=oldRect.height+"px";oldStyle.margin=0;oldStyle.transformOrigin=calcTransformOrigin(isTextNode,oldTextRect,oldRect);oldStyle.transform="";oldStyle.opacity="1";document.body.appendChild(oldElm);setNextFrame(oldStyle,"transform","translate("+-dx+"px, "+-dy+"px) scale("+wRatio+", "+hRatio+")");setNextFrame(oldStyle,"opacity","0");oldElm.addEventListener("transitionend",function(ev){if(ev.propertyName==="transform")document.body.removeChild(ev.target)})}}removed=created=undefined}module.exports={pre:pre,create:create,destroy:destroy,post:post}},{}],155:[function(require,module,exports){function updateProps(oldVnode,vnode){var key,cur,old,elm=vnode.elm,oldProps=oldVnode.data.props||{},props=vnode.data.props||{};for(key in oldProps){if(!props[key]){delete elm[key]}}for(key in props){cur=props[key];old=oldProps[key];if(old!==cur&&(key!=="value"||elm[key]!==cur)){elm[key]=cur}}}module.exports={create:updateProps,update:updateProps}},{}],156:[function(require,module,exports){var raf=typeof window!=="undefined"&&window.requestAnimationFrame||setTimeout;var nextFrame=function(fn){raf(function(){raf(fn)})};function setNextFrame(obj,prop,val){nextFrame(function(){obj[prop]=val})}function updateStyle(oldVnode,vnode){var cur,name,elm=vnode.elm,oldStyle=oldVnode.data.style||{},style=vnode.data.style||{},oldHasDel="delayed"in oldStyle;for(name in oldStyle){if(!style[name]){elm.style[name]=""}}for(name in style){cur=style[name];if(name==="delayed"){for(name in style.delayed){cur=style.delayed[name];if(!oldHasDel||cur!==oldStyle.delayed[name]){setNextFrame(elm.style,name,cur)}}}else if(name!=="remove"&&cur!==oldStyle[name]){elm.style[name]=cur}}}function applyDestroyStyle(vnode){var style,name,elm=vnode.elm,s=vnode.data.style;if(!s||!(style=s.destroy))return;for(name in style){elm.style[name]=style[name]}}function applyRemoveStyle(vnode,rm){var s=vnode.data.style;if(!s||!s.remove){rm();return}var name,elm=vnode.elm,idx,i=0,maxDur=0,compStyle,style=s.remove,amount=0,applied=[];for(name in style){applied.push(name);elm.style[name]=style[name]}compStyle=getComputedStyle(elm);var props=compStyle["transition-property"].split(", ");for(;i<props.length;++i){if(applied.indexOf(props[i])!==-1)amount++}elm.addEventListener("transitionend",function(ev){if(ev.target===elm)--amount;if(amount===0)rm()})}module.exports={create:updateStyle,update:updateStyle,destroy:applyDestroyStyle,remove:applyRemoveStyle}},{}],157:[function(require,module,exports){"use strict";var VNode=require("./vnode");var is=require("./is");var domApi=require("./htmldomapi");function isUndef(s){return s===undefined}function isDef(s){return s!==undefined}var emptyNode=VNode("",{},[],undefined,undefined);function sameVnode(vnode1,vnode2){return vnode1.key===vnode2.key&&vnode1.sel===vnode2.sel}function createKeyToOldIdx(children,beginIdx,endIdx){var i,map={},key;for(i=beginIdx;i<=endIdx;++i){key=children[i].key;if(isDef(key))map[key]=i}return map}var hooks=["create","update","remove","destroy","pre","post"];function init(modules,api){var i,j,cbs={};if(isUndef(api))api=domApi;for(i=0;i<hooks.length;++i){cbs[hooks[i]]=[];for(j=0;j<modules.length;++j){if(modules[j][hooks[i]]!==undefined)cbs[hooks[i]].push(modules[j][hooks[i]])}}function emptyNodeAt(elm){return VNode(api.tagName(elm).toLowerCase(),{},[],undefined,elm)}function createRmCb(childElm,listeners){return function(){if(--listeners===0){var parent=api.parentNode(childElm);api.removeChild(parent,childElm)}}}function createElm(vnode,insertedVnodeQueue){var i,data=vnode.data;if(isDef(data)){if(isDef(i=data.hook)&&isDef(i=i.init)){i(vnode);data=vnode.data}}var elm,children=vnode.children,sel=vnode.sel;if(isDef(sel)){var hashIdx=sel.indexOf("#");var dotIdx=sel.indexOf(".",hashIdx);var hash=hashIdx>0?hashIdx:sel.length;var dot=dotIdx>0?dotIdx:sel.length;var tag=hashIdx!==-1||dotIdx!==-1?sel.slice(0,Math.min(hash,dot)):sel;elm=vnode.elm=isDef(data)&&isDef(i=data.ns)?api.createElementNS(i,tag):api.createElement(tag);if(hash<dot)elm.id=sel.slice(hash+1,dot);if(dotIdx>0)elm.className=sel.slice(dot+1).replace(/\./g," ");if(is.array(children)){for(i=0;i<children.length;++i){api.appendChild(elm,createElm(children[i],insertedVnodeQueue))}}else if(is.primitive(vnode.text)){api.appendChild(elm,api.createTextNode(vnode.text))}for(i=0;i<cbs.create.length;++i)cbs.create[i](emptyNode,vnode);i=vnode.data.hook;if(isDef(i)){if(i.create)i.create(emptyNode,vnode);if(i.insert)insertedVnodeQueue.push(vnode)}}else{elm=vnode.elm=api.createTextNode(vnode.text)}return vnode.elm}function addVnodes(parentElm,before,vnodes,startIdx,endIdx,insertedVnodeQueue){for(;startIdx<=endIdx;++startIdx){api.insertBefore(parentElm,createElm(vnodes[startIdx],insertedVnodeQueue),before)}}function invokeDestroyHook(vnode){var i,j,data=vnode.data;if(isDef(data)){if(isDef(i=data.hook)&&isDef(i=i.destroy))i(vnode);for(i=0;i<cbs.destroy.length;++i)cbs.destroy[i](vnode);if(isDef(i=vnode.children)){for(j=0;j<vnode.children.length;++j){invokeDestroyHook(vnode.children[j])}}}}function removeVnodes(parentElm,vnodes,startIdx,endIdx){for(;startIdx<=endIdx;++startIdx){var i,listeners,rm,ch=vnodes[startIdx];if(isDef(ch)){if(isDef(ch.sel)){invokeDestroyHook(ch);listeners=cbs.remove.length+1;rm=createRmCb(ch.elm,listeners);for(i=0;i<cbs.remove.length;++i)cbs.remove[i](ch,rm);if(isDef(i=ch.data)&&isDef(i=i.hook)&&isDef(i=i.remove)){i(ch,rm)}else{rm()}}else{api.removeChild(parentElm,ch.elm)}}}}function updateChildren(parentElm,oldCh,newCh,insertedVnodeQueue){var oldStartIdx=0,newStartIdx=0;var oldEndIdx=oldCh.length-1;var oldStartVnode=oldCh[0];var oldEndVnode=oldCh[oldEndIdx];var newEndIdx=newCh.length-1;var newStartVnode=newCh[0];var newEndVnode=newCh[newEndIdx];var oldKeyToIdx,idxInOld,elmToMove,before;while(oldStartIdx<=oldEndIdx&&newStartIdx<=newEndIdx){if(isUndef(oldStartVnode)){oldStartVnode=oldCh[++oldStartIdx]}else if(isUndef(oldEndVnode)){oldEndVnode=oldCh[--oldEndIdx]}else if(sameVnode(oldStartVnode,newStartVnode)){patchVnode(oldStartVnode,newStartVnode,insertedVnodeQueue);oldStartVnode=oldCh[++oldStartIdx];newStartVnode=newCh[++newStartIdx]}else if(sameVnode(oldEndVnode,newEndVnode)){patchVnode(oldEndVnode,newEndVnode,insertedVnodeQueue);oldEndVnode=oldCh[--oldEndIdx];newEndVnode=newCh[--newEndIdx]}else if(sameVnode(oldStartVnode,newEndVnode)){patchVnode(oldStartVnode,newEndVnode,insertedVnodeQueue);api.insertBefore(parentElm,oldStartVnode.elm,api.nextSibling(oldEndVnode.elm));oldStartVnode=oldCh[++oldStartIdx];newEndVnode=newCh[--newEndIdx]}else if(sameVnode(oldEndVnode,newStartVnode)){patchVnode(oldEndVnode,newStartVnode,insertedVnodeQueue);api.insertBefore(parentElm,oldEndVnode.elm,oldStartVnode.elm);oldEndVnode=oldCh[--oldEndIdx];newStartVnode=newCh[++newStartIdx]}else{if(isUndef(oldKeyToIdx))oldKeyToIdx=createKeyToOldIdx(oldCh,oldStartIdx,oldEndIdx);idxInOld=oldKeyToIdx[newStartVnode.key];if(isUndef(idxInOld)){api.insertBefore(parentElm,createElm(newStartVnode,insertedVnodeQueue),oldStartVnode.elm);newStartVnode=newCh[++newStartIdx]}else{elmToMove=oldCh[idxInOld];patchVnode(elmToMove,newStartVnode,insertedVnodeQueue);oldCh[idxInOld]=undefined;api.insertBefore(parentElm,elmToMove.elm,oldStartVnode.elm);newStartVnode=newCh[++newStartIdx]}}}if(oldStartIdx>oldEndIdx){before=isUndef(newCh[newEndIdx+1])?null:newCh[newEndIdx+1].elm;addVnodes(parentElm,before,newCh,newStartIdx,newEndIdx,insertedVnodeQueue)}else if(newStartIdx>newEndIdx){removeVnodes(parentElm,oldCh,oldStartIdx,oldEndIdx)}}function patchVnode(oldVnode,vnode,insertedVnodeQueue){var i,hook;if(isDef(i=vnode.data)&&isDef(hook=i.hook)&&isDef(i=hook.prepatch)){i(oldVnode,vnode)}var elm=vnode.elm=oldVnode.elm,oldCh=oldVnode.children,ch=vnode.children;if(oldVnode===vnode)return;if(!sameVnode(oldVnode,vnode)){var parentElm=api.parentNode(oldVnode.elm);elm=createElm(vnode,insertedVnodeQueue);api.insertBefore(parentElm,elm,oldVnode.elm);removeVnodes(parentElm,[oldVnode],0,0);return}if(isDef(vnode.data)){for(i=0;i<cbs.update.length;++i)cbs.update[i](oldVnode,vnode);i=vnode.data.hook;if(isDef(i)&&isDef(i=i.update))i(oldVnode,vnode)}if(isUndef(vnode.text)){if(isDef(oldCh)&&isDef(ch)){if(oldCh!==ch)updateChildren(elm,oldCh,ch,insertedVnodeQueue)}else if(isDef(ch)){if(isDef(oldVnode.text))api.setTextContent(elm,"");addVnodes(elm,null,ch,0,ch.length-1,insertedVnodeQueue)}else if(isDef(oldCh)){removeVnodes(elm,oldCh,0,oldCh.length-1)}else if(isDef(oldVnode.text)){api.setTextContent(elm,"")}}else if(oldVnode.text!==vnode.text){api.setTextContent(elm,vnode.text)}if(isDef(hook)&&isDef(i=hook.postpatch)){i(oldVnode,vnode)}}return function(oldVnode,vnode){var i,elm,parent;var insertedVnodeQueue=[];for(i=0;i<cbs.pre.length;++i)cbs.pre[i]();if(isUndef(oldVnode.sel)){oldVnode=emptyNodeAt(oldVnode)}if(sameVnode(oldVnode,vnode)){patchVnode(oldVnode,vnode,insertedVnodeQueue)}else{elm=oldVnode.elm;parent=api.parentNode(elm);createElm(vnode,insertedVnodeQueue);if(parent!==null){api.insertBefore(parent,vnode.elm,api.nextSibling(elm));removeVnodes(parent,[oldVnode],0,0)}}for(i=0;i<insertedVnodeQueue.length;++i){insertedVnodeQueue[i].data.hook.insert(insertedVnodeQueue[i])}for(i=0;i<cbs.post.length;++i)cbs.post[i]();return vnode}}module.exports={init:init}},{"./htmldomapi":149,"./is":150,"./vnode":159}],158:[function(require,module,exports){var h=require("./h");function copyToThunk(vnode,thunk){thunk.elm=vnode.elm;vnode.data.fn=thunk.data.fn;vnode.data.args=thunk.data.args;thunk.data=vnode.data;thunk.children=vnode.children;thunk.text=vnode.text;thunk.elm=vnode.elm}function init(thunk){var i,cur=thunk.data;var vnode=cur.fn.apply(undefined,cur.args);copyToThunk(vnode,thunk)}function prepatch(oldVnode,thunk){var i,old=oldVnode.data,cur=thunk.data,vnode;var oldArgs=old.args,args=cur.args;if(old.fn!==cur.fn||oldArgs.length!==args.length){copyToThunk(cur.fn.apply(undefined,args),thunk)}for(i=0;i<args.length;++i){if(oldArgs[i]!==args[i]){copyToThunk(cur.fn.apply(undefined,args),thunk);return}}copyToThunk(oldVnode,thunk)}module.exports=function(sel,key,fn,args){if(args===undefined){args=fn;fn=key;key=undefined}return h(sel,{key:key,hook:{init:init,prepatch:prepatch},fn:fn,args:args})}},{"./h":148}],159:[function(require,module,exports){module.exports=function(sel,data,children,text,elm){var key=data===undefined?undefined:data.key;return{sel:sel,data:data,children:children,text:text,elm:elm,key:key}}},{}],160:[function(require,module,exports){module.exports=require("./lib/index")},{"./lib/index":161}],161:[function(require,module,exports){(function(global){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _ponyfill=require("./ponyfill");var _ponyfill2=_interopRequireDefault(_ponyfill);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var root;if(typeof self!=="undefined"){root=self}else if(typeof window!=="undefined"){root=window}else if(typeof global!=="undefined"){root=global}else if(typeof module!=="undefined"){root=module}else{root=Function("return this")()}var result=(0,_ponyfill2["default"])(root);exports["default"]=result}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./ponyfill":162}],162:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=symbolObservablePonyfill;function symbolObservablePonyfill(root){var result;var _Symbol=root.Symbol;if(typeof _Symbol==="function"){if(_Symbol.observable){result=_Symbol.observable}else{result=_Symbol("observable");_Symbol.observable=result}}else{result="@@observable"}return result}},{}],163:[function(require,module,exports){"use strict";var FreeStyle=require("free-style");var raf=typeof requestAnimationFrame==="undefined"?setTimeout:requestAnimationFrame;var afterAllSync=(new(function(){function class_1(){var _this=this;this.pending=0;this.afterAllSync=function(cb){_this.pending++;var pending=_this.pending;raf(function(){if(pending!==_this.pending)return;cb()})}}return class_1}())).afterAllSync;function ensureString(x){return typeof x.type==="string"?x.toString():x}exports.ensureString=ensureString;function ensureStringObj(object){var result={};for(var key in object){var val=object[key];result[key]=ensureString(val)}return result}exports.ensureStringObj=ensureStringObj;var freeStyle=FreeStyle.create();var lastFreeStyleChangeId=freeStyle.changeId;var singletonTag=typeof window==="undefined"?{innerHTML:""}:document.createElement("style");if(typeof document!=="undefined")document.head.appendChild(singletonTag);var styleUpdated=function(){if(freeStyle.changeId===lastFreeStyleChangeId&&!pendingRawChange)return;lastFreeStyleChangeId=freeStyle.changeId;pendingRawChange=false;afterAllSync(flush)};var pendingRawChange=false;var raw="";function cssRaw(mustBeValidCSS){if(!mustBeValidCSS)return;raw=raw+mustBeValidCSS;pendingRawChange=true;styleUpdated()}exports.cssRaw=cssRaw;function flush(){singletonTag.innerHTML=exports.css()}function reinit(){freeStyle=FreeStyle.create();lastFreeStyleChangeId=freeStyle.changeId;raw="";pendingRawChange=false;singletonTag.innerHTML=""}exports.reinit=reinit;exports.css=function(){return raw?raw+freeStyle.getStyles():freeStyle.getStyles()};function style(){var objects=[];for(var _i=0;_i<arguments.length;_i++){objects[_i-0]=arguments[_i]}var object=extend.apply(void 0,objects);var className=freeStyle.registerStyle(object);styleUpdated();return className}exports.style=style;function cssRule(selector){var objects=[];for(var _i=1;_i<arguments.length;_i++){objects[_i-1]=arguments[_i]}var object=extend.apply(void 0,objects);freeStyle.registerRule(selector,object);styleUpdated();return}exports.cssRule=cssRule;function keyframes(frames){for(var key in frames){var frame=frames[key];for(var prop in frame){frame[prop]=ensureString(frame[prop])}}var animationName=freeStyle.registerKeyframes(frames);styleUpdated();return animationName}exports.keyframes=keyframes;function cssFunction(functionName){var params=[];for(var _i=1;_i<arguments.length;_i++){params[_i-1]=arguments[_i]}var parts=params.map(ensureString).join(",");return functionName+"("+parts+")"}exports.cssFunction=cssFunction;function extend(){var objects=[];for(var _i=0;_i<arguments.length;_i++){objects[_i-0]=arguments[_i]}var result={};for(var _a=0,objects_1=objects;_a<objects_1.length;_a++){var object=objects_1[_a];for(var key in object){var val=object[key];if(key.indexOf("&")!==-1||key.indexOf("@media")===0){if(result[key]){result[key]=extend(result[key],object)}else{result[key]=ensureStringObj(val)}}else{result[key]=ensureString(val)}}}return result}exports.extend=extend;function classes(){var classes=[];for(var _i=0;_i<arguments.length;_i++){classes[_i-0]=arguments[_i]}return classes.filter(function(c){return!!c}).join(" ")}exports.classes=classes},{"free-style":116}],164:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var symbol_observable_1=require("symbol-observable");var NO={};function noop(){}function copy(a){var l=a.length;var b=Array(l);for(var i=0;i<l;++i){b[i]=a[i]}return b}exports.NO_IL={_n:noop,_e:noop,_c:noop};function internalizeProducer(producer){producer._start=function _start(il){il.next=il._n;il.error=il._e;il.complete=il._c;this.start(il)};producer._stop=producer.stop}function and(f1,f2){return function andFn(t){return f1(t)&&f2(t)}}var Subscription=function(){function Subscription(_stream,_listener){this._stream=_stream;this._listener=_listener}Subscription.prototype.unsubscribe=function(){this._stream.removeListener(this._listener)};return Subscription}();exports.Subscription=Subscription;var ObservableProducer=function(){function ObservableProducer(observable){this.type="fromObservable";this.ins=observable}ObservableProducer.prototype._start=function(out){this.out=out;this._subscription=this.ins.subscribe(new ObservableListener(out))};ObservableProducer.prototype._stop=function(){this._subscription.unsubscribe()};return ObservableProducer}();var ObservableListener=function(){function ObservableListener(_listener){this._listener=_listener}ObservableListener.prototype.next=function(value){this._listener._n(value)};ObservableListener.prototype.error=function(err){this._listener._e(err)};ObservableListener.prototype.complete=function(){this._listener._c()};return ObservableListener}();var MergeProducer=function(){function MergeProducer(insArr){this.type="merge";this.insArr=insArr;this.out=NO;this.ac=0}MergeProducer.prototype._start=function(out){this.out=out;var s=this.insArr;var L=s.length;this.ac=L;for(var i=0;i<L;i++){s[i]._add(this)}};MergeProducer.prototype._stop=function(){var s=this.insArr;var L=s.length;for(var i=0;i<L;i++){s[i]._remove(this)}this.out=NO};MergeProducer.prototype._n=function(t){var u=this.out;if(u===NO)return;u._n(t)};MergeProducer.prototype._e=function(err){var u=this.out;if(u===NO)return;u._e(err)};MergeProducer.prototype._c=function(){if(--this.ac<=0){var u=this.out;if(u===NO)return;u._c()}};return MergeProducer}();exports.MergeProducer=MergeProducer;var CombineListener=function(){function CombineListener(i,out,p){this.i=i;this.out=out;this.p=p;p.ils.push(this)}CombineListener.prototype._n=function(t){var p=this.p,out=this.out;if(out===NO)return;if(p.up(t,this.i)){out._n(p.vals)}};CombineListener.prototype._e=function(err){var out=this.out;if(out===NO)return;out._e(err)};CombineListener.prototype._c=function(){
var p=this.p;if(p.out===NO)return;if(--p.Nc===0){p.out._c()}};return CombineListener}();exports.CombineListener=CombineListener;var CombineProducer=function(){function CombineProducer(insArr){this.type="combine";this.insArr=insArr;this.out=NO;this.ils=[];this.Nc=this.Nn=0;this.vals=[]}CombineProducer.prototype.up=function(t,i){var v=this.vals[i];var Nn=!this.Nn?0:v===NO?--this.Nn:this.Nn;this.vals[i]=t;return Nn===0};CombineProducer.prototype._start=function(out){this.out=out;var s=this.insArr;var n=this.Nc=this.Nn=s.length;var vals=this.vals=new Array(n);if(n===0){out._n([]);out._c()}else{for(var i=0;i<n;i++){vals[i]=NO;s[i]._add(new CombineListener(i,out,this))}}};CombineProducer.prototype._stop=function(){var s=this.insArr;var n=s.length;var ils=this.ils;for(var i=0;i<n;i++){s[i]._remove(ils[i])}this.out=NO;this.ils=[];this.vals=[]};return CombineProducer}();exports.CombineProducer=CombineProducer;var FromArrayProducer=function(){function FromArrayProducer(a){this.type="fromArray";this.a=a}FromArrayProducer.prototype._start=function(out){var a=this.a;for(var i=0,l=a.length;i<l;i++){out._n(a[i])}out._c()};FromArrayProducer.prototype._stop=function(){};return FromArrayProducer}();exports.FromArrayProducer=FromArrayProducer;var FromPromiseProducer=function(){function FromPromiseProducer(p){this.type="fromPromise";this.on=false;this.p=p}FromPromiseProducer.prototype._start=function(out){var prod=this;this.on=true;this.p.then(function(v){if(prod.on){out._n(v);out._c()}},function(e){out._e(e)}).then(noop,function(err){setTimeout(function(){throw err})})};FromPromiseProducer.prototype._stop=function(){this.on=false};return FromPromiseProducer}();exports.FromPromiseProducer=FromPromiseProducer;var PeriodicProducer=function(){function PeriodicProducer(period){this.type="periodic";this.period=period;this.intervalID=-1;this.i=0}PeriodicProducer.prototype._start=function(stream){var self=this;function intervalHandler(){stream._n(self.i++)}this.intervalID=setInterval(intervalHandler,this.period)};PeriodicProducer.prototype._stop=function(){if(this.intervalID!==-1)clearInterval(this.intervalID);this.intervalID=-1;this.i=0};return PeriodicProducer}();exports.PeriodicProducer=PeriodicProducer;var DebugOperator=function(){function DebugOperator(ins,arg){this.type="debug";this.ins=ins;this.out=NO;this.s=noop;this.l="";if(typeof arg==="string"){this.l=arg}else if(typeof arg==="function"){this.s=arg}}DebugOperator.prototype._start=function(out){this.out=out;this.ins._add(this)};DebugOperator.prototype._stop=function(){this.ins._remove(this);this.out=NO};DebugOperator.prototype._n=function(t){var u=this.out;if(u===NO)return;var s=this.s,l=this.l;if(s!==noop){try{s(t)}catch(e){u._e(e)}}else if(l){console.log(l+":",t)}else{console.log(t)}u._n(t)};DebugOperator.prototype._e=function(err){var u=this.out;if(u===NO)return;u._e(err)};DebugOperator.prototype._c=function(){var u=this.out;if(u===NO)return;u._c()};return DebugOperator}();exports.DebugOperator=DebugOperator;var DropOperator=function(){function DropOperator(max,ins){this.type="drop";this.ins=ins;this.out=NO;this.max=max;this.dropped=0}DropOperator.prototype._start=function(out){this.out=out;this.dropped=0;this.ins._add(this)};DropOperator.prototype._stop=function(){this.ins._remove(this);this.out=NO};DropOperator.prototype._n=function(t){var u=this.out;if(u===NO)return;if(this.dropped++>=this.max)u._n(t)};DropOperator.prototype._e=function(err){var u=this.out;if(u===NO)return;u._e(err)};DropOperator.prototype._c=function(){var u=this.out;if(u===NO)return;u._c()};return DropOperator}();exports.DropOperator=DropOperator;var OtherIL=function(){function OtherIL(out,op){this.out=out;this.op=op}OtherIL.prototype._n=function(t){this.op.end()};OtherIL.prototype._e=function(err){this.out._e(err)};OtherIL.prototype._c=function(){this.op.end()};return OtherIL}();var EndWhenOperator=function(){function EndWhenOperator(o,ins){this.type="endWhen";this.ins=ins;this.out=NO;this.o=o;this.oil=exports.NO_IL}EndWhenOperator.prototype._start=function(out){this.out=out;this.o._add(this.oil=new OtherIL(out,this));this.ins._add(this)};EndWhenOperator.prototype._stop=function(){this.ins._remove(this);this.o._remove(this.oil);this.out=NO;this.oil=exports.NO_IL};EndWhenOperator.prototype.end=function(){var u=this.out;if(u===NO)return;u._c()};EndWhenOperator.prototype._n=function(t){var u=this.out;if(u===NO)return;u._n(t)};EndWhenOperator.prototype._e=function(err){var u=this.out;if(u===NO)return;u._e(err)};EndWhenOperator.prototype._c=function(){this.end()};return EndWhenOperator}();exports.EndWhenOperator=EndWhenOperator;var FilterOperator=function(){function FilterOperator(passes,ins){this.type="filter";this.ins=ins;this.out=NO;this.passes=passes}FilterOperator.prototype._start=function(out){this.out=out;this.ins._add(this)};FilterOperator.prototype._stop=function(){this.ins._remove(this);this.out=NO};FilterOperator.prototype._n=function(t){var u=this.out;if(u===NO)return;try{if(this.passes(t))u._n(t)}catch(e){u._e(e)}};FilterOperator.prototype._e=function(err){var u=this.out;if(u===NO)return;u._e(err)};FilterOperator.prototype._c=function(){var u=this.out;if(u===NO)return;u._c()};return FilterOperator}();exports.FilterOperator=FilterOperator;var FlattenListener=function(){function FlattenListener(out,op){this.out=out;this.op=op}FlattenListener.prototype._n=function(t){this.out._n(t)};FlattenListener.prototype._e=function(err){this.out._e(err)};FlattenListener.prototype._c=function(){this.op.inner=NO;this.op.less()};return FlattenListener}();var FlattenOperator=function(){function FlattenOperator(ins){this.type="flatten";this.ins=ins;this.out=NO;this.open=true;this.inner=NO;this.il=exports.NO_IL}FlattenOperator.prototype._start=function(out){this.out=out;this.open=true;this.inner=NO;this.il=exports.NO_IL;this.ins._add(this)};FlattenOperator.prototype._stop=function(){this.ins._remove(this);if(this.inner!==NO)this.inner._remove(this.il);this.out=NO;this.open=true;this.inner=NO;this.il=exports.NO_IL};FlattenOperator.prototype.less=function(){var u=this.out;if(u===NO)return;if(!this.open&&this.inner===NO)u._c()};FlattenOperator.prototype._n=function(s){var u=this.out;if(u===NO)return;var _a=this,inner=_a.inner,il=_a.il;if(inner!==NO&&il!==exports.NO_IL)inner._remove(il);(this.inner=s)._add(this.il=new FlattenListener(u,this))};FlattenOperator.prototype._e=function(err){var u=this.out;if(u===NO)return;u._e(err)};FlattenOperator.prototype._c=function(){this.open=false;this.less()};return FlattenOperator}();exports.FlattenOperator=FlattenOperator;var FoldOperator=function(){function FoldOperator(f,seed,ins){this.type="fold";this.ins=ins;this.out=NO;this.f=f;this.acc=this.seed=seed}FoldOperator.prototype._start=function(out){this.out=out;this.acc=this.seed;out._n(this.acc);this.ins._add(this)};FoldOperator.prototype._stop=function(){this.ins._remove(this);this.out=NO;this.acc=this.seed};FoldOperator.prototype._n=function(t){var u=this.out;if(u===NO)return;try{u._n(this.acc=this.f(this.acc,t))}catch(e){u._e(e)}};FoldOperator.prototype._e=function(err){var u=this.out;if(u===NO)return;u._e(err)};FoldOperator.prototype._c=function(){var u=this.out;if(u===NO)return;u._c()};return FoldOperator}();exports.FoldOperator=FoldOperator;var LastOperator=function(){function LastOperator(ins){this.type="last";this.ins=ins;this.out=NO;this.has=false;this.val=NO}LastOperator.prototype._start=function(out){this.out=out;this.has=false;this.ins._add(this)};LastOperator.prototype._stop=function(){this.ins._remove(this);this.out=NO;this.val=NO};LastOperator.prototype._n=function(t){this.has=true;this.val=t};LastOperator.prototype._e=function(err){var u=this.out;if(u===NO)return;u._e(err)};LastOperator.prototype._c=function(){var u=this.out;if(u===NO)return;if(this.has){u._n(this.val);u._c()}else{u._e("TODO show proper error")}};return LastOperator}();exports.LastOperator=LastOperator;var MapFlattenInner=function(){function MapFlattenInner(out,op){this.out=out;this.op=op}MapFlattenInner.prototype._n=function(r){this.out._n(r)};MapFlattenInner.prototype._e=function(err){this.out._e(err)};MapFlattenInner.prototype._c=function(){this.op.inner=NO;this.op.less()};return MapFlattenInner}();var MapFlattenOperator=function(){function MapFlattenOperator(mapOp){this.type=mapOp.type+"+flatten";this.ins=mapOp.ins;this.out=NO;this.mapOp=mapOp;this.inner=NO;this.il=exports.NO_IL;this.open=true}MapFlattenOperator.prototype._start=function(out){this.out=out;this.inner=NO;this.il=exports.NO_IL;this.open=true;this.mapOp.ins._add(this)};MapFlattenOperator.prototype._stop=function(){this.mapOp.ins._remove(this);if(this.inner!==NO)this.inner._remove(this.il);this.out=NO;this.inner=NO;this.il=exports.NO_IL};MapFlattenOperator.prototype.less=function(){if(!this.open&&this.inner===NO){var u=this.out;if(u===NO)return;u._c()}};MapFlattenOperator.prototype._n=function(v){var u=this.out;if(u===NO)return;var _a=this,inner=_a.inner,il=_a.il;var s;try{s=this.mapOp.project(v)}catch(e){u._e(e);return}if(inner!==NO&&il!==exports.NO_IL)inner._remove(il);(this.inner=s)._add(this.il=new MapFlattenInner(u,this))};MapFlattenOperator.prototype._e=function(err){var u=this.out;if(u===NO)return;u._e(err)};MapFlattenOperator.prototype._c=function(){this.open=false;this.less()};return MapFlattenOperator}();exports.MapFlattenOperator=MapFlattenOperator;var MapOperator=function(){function MapOperator(project,ins){this.type="map";this.ins=ins;this.out=NO;this.project=project}MapOperator.prototype._start=function(out){this.out=out;this.ins._add(this)};MapOperator.prototype._stop=function(){this.ins._remove(this);this.out=NO};MapOperator.prototype._n=function(t){var u=this.out;if(u===NO)return;try{u._n(this.project(t))}catch(e){u._e(e)}};MapOperator.prototype._e=function(err){var u=this.out;if(u===NO)return;u._e(err)};MapOperator.prototype._c=function(){var u=this.out;if(u===NO)return;u._c()};return MapOperator}();exports.MapOperator=MapOperator;var FilterMapOperator=function(_super){__extends(FilterMapOperator,_super);function FilterMapOperator(passes,project,ins){_super.call(this,project,ins);this.type="filter+map";this.passes=passes}FilterMapOperator.prototype._n=function(t){if(!this.passes(t))return;var u=this.out;if(u===NO)return;try{u._n(this.project(t))}catch(e){u._e(e)}};return FilterMapOperator}(MapOperator);exports.FilterMapOperator=FilterMapOperator;var RememberOperator=function(){function RememberOperator(ins){this.type="remember";this.ins=ins;this.out=NO}RememberOperator.prototype._start=function(out){this.out=out;this.ins._add(out)};RememberOperator.prototype._stop=function(){this.ins._remove(this.out);this.out=NO};return RememberOperator}();exports.RememberOperator=RememberOperator;var ReplaceErrorOperator=function(){function ReplaceErrorOperator(fn,ins){this.type="replaceError";this.ins=ins;this.out=NO;this.fn=fn}ReplaceErrorOperator.prototype._start=function(out){this.out=out;this.ins._add(this)};ReplaceErrorOperator.prototype._stop=function(){this.ins._remove(this);this.out=NO};ReplaceErrorOperator.prototype._n=function(t){var u=this.out;if(u===NO)return;u._n(t)};ReplaceErrorOperator.prototype._e=function(err){var u=this.out;if(u===NO)return;try{this.ins._remove(this);(this.ins=this.fn(err))._add(this)}catch(e){u._e(e)}};ReplaceErrorOperator.prototype._c=function(){var u=this.out;if(u===NO)return;u._c()};return ReplaceErrorOperator}();exports.ReplaceErrorOperator=ReplaceErrorOperator;var StartWithOperator=function(){function StartWithOperator(ins,val){this.type="startWith";this.ins=ins;this.out=NO;this.val=val}StartWithOperator.prototype._start=function(out){this.out=out;this.out._n(this.val);this.ins._add(out)};StartWithOperator.prototype._stop=function(){this.ins._remove(this.out);this.out=NO};return StartWithOperator}();exports.StartWithOperator=StartWithOperator;var TakeOperator=function(){function TakeOperator(max,ins){this.type="take";this.ins=ins;this.out=NO;this.max=max;this.taken=0}TakeOperator.prototype._start=function(out){this.out=out;this.taken=0;if(this.max<=0){out._c()}else{this.ins._add(this)}};TakeOperator.prototype._stop=function(){this.ins._remove(this);this.out=NO};TakeOperator.prototype._n=function(t){var u=this.out;if(u===NO)return;if(this.taken++<this.max-1){u._n(t)}else{u._n(t);u._c()}};TakeOperator.prototype._e=function(err){var u=this.out;if(u===NO)return;u._e(err)};TakeOperator.prototype._c=function(){var u=this.out;if(u===NO)return;u._c()};return TakeOperator}();exports.TakeOperator=TakeOperator;var Stream=function(){function Stream(producer){this._prod=producer||NO;this._ils=[];this._stopID=NO;this._dl=NO;this._d=false;this._target=NO;this._err=NO}Stream.prototype._n=function(t){var a=this._ils;var L=a.length;if(this._d)this._dl._n(t);if(L==1)a[0]._n(t);else{var b=copy(a);for(var i=0;i<L;i++)b[i]._n(t)}};Stream.prototype._e=function(err){if(this._err!==NO)return;this._err=err;var a=this._ils;var L=a.length;this._x();if(this._d)this._dl._e(err);if(L==1)a[0]._e(err);else{var b=copy(a);for(var i=0;i<L;i++)b[i]._e(err)}};Stream.prototype._c=function(){var a=this._ils;var L=a.length;this._x();if(this._d)this._dl._c();if(L==1)a[0]._c();else{var b=copy(a);for(var i=0;i<L;i++)b[i]._c()}};Stream.prototype._x=function(){if(this._ils.length===0)return;if(this._prod!==NO)this._prod._stop();this._err=NO;this._ils=[]};Stream.prototype._stopNow=function(){this._prod._stop();this._err=NO;this._stopID=NO};Stream.prototype._add=function(il){var ta=this._target;if(ta!==NO)return ta._add(il);var a=this._ils;a.push(il);if(a.length>1)return;if(this._stopID!==NO){clearTimeout(this._stopID);this._stopID=NO}else{var p=this._prod;if(p!==NO)p._start(this)}};Stream.prototype._remove=function(il){var _this=this;var ta=this._target;if(ta!==NO)return ta._remove(il);var a=this._ils;var i=a.indexOf(il);if(i>-1){a.splice(i,1);if(this._prod!==NO&&a.length<=0){this._err=NO;this._stopID=setTimeout(function(){return _this._stopNow()})}else if(a.length===1){this._pruneCycles()}}};Stream.prototype._pruneCycles=function(){if(this._hasNoSinks(this,[])){this._remove(this._ils[0])}};Stream.prototype._hasNoSinks=function(x,trace){if(trace.indexOf(x)!==-1){return true}else if(x.out===this){return true}else if(x.out&&x.out!==NO){return this._hasNoSinks(x.out,trace.concat(x))}else if(x._ils){for(var i=0,N=x._ils.length;i<N;i++){if(!this._hasNoSinks(x._ils[i],trace.concat(x))){return false}}return true}else{return false}};Stream.prototype.ctor=function(){return this instanceof MemoryStream?MemoryStream:Stream};Stream.prototype.addListener=function(listener){listener._n=listener.next||noop;listener._e=listener.error||noop;listener._c=listener.complete||noop;this._add(listener)};Stream.prototype.removeListener=function(listener){this._remove(listener)};Stream.prototype.subscribe=function(listener){this.addListener(listener);return new Subscription(this,listener)};Stream.prototype[symbol_observable_1.default]=function(){return this};Stream.create=function(producer){if(producer){if(typeof producer.start!=="function"||typeof producer.stop!=="function"){throw new Error("producer requires both start and stop functions")}internalizeProducer(producer)}return new Stream(producer)};Stream.createWithMemory=function(producer){if(producer){internalizeProducer(producer)}return new MemoryStream(producer)};Stream.never=function(){return new Stream({_start:noop,_stop:noop})};Stream.empty=function(){return new Stream({_start:function(il){il._c()},_stop:noop})};Stream.throw=function(error){return new Stream({_start:function(il){il._e(error)},_stop:noop})};Stream.from=function(input){if(typeof input[symbol_observable_1.default]==="function"){return Stream.fromObservable(input)}else if(typeof input.then==="function"){return Stream.fromPromise(input)}else if(Array.isArray(input)){return Stream.fromArray(input)}throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")};Stream.of=function(){var items=[];for(var _i=0;_i<arguments.length;_i++){items[_i-0]=arguments[_i]}return Stream.fromArray(items)};Stream.fromArray=function(array){return new Stream(new FromArrayProducer(array))};Stream.fromPromise=function(promise){return new Stream(new FromPromiseProducer(promise))};Stream.fromObservable=function(observable){return new Stream(new ObservableProducer(observable))};Stream.periodic=function(period){return new Stream(new PeriodicProducer(period))};Stream.prototype._map=function(project){var p=this._prod;var ctor=this.ctor();if(p instanceof FilterOperator){return new ctor(new FilterMapOperator(p.passes,project,p.ins))}return new ctor(new MapOperator(project,this))};Stream.prototype.map=function(project){return this._map(project)};Stream.prototype.mapTo=function(projectedValue){var s=this.map(function(){return projectedValue});var op=s._prod;op.type=op.type.replace("map","mapTo");return s};Stream.prototype.filter=function(passes){var p=this._prod;if(p instanceof FilterOperator){return new Stream(new FilterOperator(and(p.passes,passes),p.ins))}return new Stream(new FilterOperator(passes,this))};Stream.prototype.take=function(amount){return new(this.ctor())(new TakeOperator(amount,this))};Stream.prototype.drop=function(amount){return new Stream(new DropOperator(amount,this))};Stream.prototype.last=function(){return new Stream(new LastOperator(this))};Stream.prototype.startWith=function(initial){return new MemoryStream(new StartWithOperator(this,initial))};Stream.prototype.endWhen=function(other){return new(this.ctor())(new EndWhenOperator(other,this))};Stream.prototype.fold=function(accumulate,seed){return new MemoryStream(new FoldOperator(accumulate,seed,this))};Stream.prototype.replaceError=function(replace){return new(this.ctor())(new ReplaceErrorOperator(replace,this))};Stream.prototype.flatten=function(){var p=this._prod;return new Stream(p instanceof MapOperator&&!(p instanceof FilterMapOperator)?new MapFlattenOperator(p):new FlattenOperator(this))};Stream.prototype.compose=function(operator){return operator(this)};Stream.prototype.remember=function(){return new MemoryStream(new RememberOperator(this))};Stream.prototype.debug=function(labelOrSpy){return new(this.ctor())(new DebugOperator(this,labelOrSpy))};Stream.prototype.imitate=function(target){if(target instanceof MemoryStream){throw new Error("A MemoryStream was given to imitate(), but it only "+"supports a Stream. Read more about this restriction here: "+"https://github.com/staltz/xstream#faq")}this._target=target;for(var ils=this._ils,N=ils.length,i=0;i<N;i++){target._add(ils[i])}this._ils=[]};Stream.prototype.shamefullySendNext=function(value){this._n(value)};Stream.prototype.shamefullySendError=function(error){this._e(error)};Stream.prototype.shamefullySendComplete=function(){this._c()};Stream.prototype.setDebugListener=function(listener){if(!listener){this._d=false;this._dl=NO}else{this._d=true;listener._n=listener.next;listener._e=listener.error;listener._c=listener.complete;this._dl=listener}};Stream.merge=function merge(){var streams=[];for(var _i=0;_i<arguments.length;_i++){streams[_i-0]=arguments[_i]}return new Stream(new MergeProducer(streams))};Stream.combine=function combine(){var streams=[];for(var _i=0;_i<arguments.length;_i++){streams[_i-0]=arguments[_i]}return new Stream(new CombineProducer(streams))};return Stream}();exports.Stream=Stream;var MemoryStream=function(_super){__extends(MemoryStream,_super);function MemoryStream(producer){_super.call(this,producer);this._has=false}MemoryStream.prototype._n=function(x){this._v=x;this._has=true;_super.prototype._n.call(this,x)};MemoryStream.prototype._add=function(il){var ta=this._target;if(ta!==NO)return ta._add(il);var a=this._ils;a.push(il);if(a.length>1){if(this._has)il._n(this._v);return}if(this._stopID!==NO){if(this._has)il._n(this._v);clearTimeout(this._stopID);this._stopID=NO}else if(this._has)il._n(this._v);else{var p=this._prod;if(p!==NO)p._start(this)}};MemoryStream.prototype._stopNow=function(){this._has=false;_super.prototype._stopNow.call(this)};MemoryStream.prototype._x=function(){this._has=false;_super.prototype._x.call(this)};MemoryStream.prototype.map=function(project){return this._map(project)};MemoryStream.prototype.mapTo=function(projectedValue){return _super.prototype.mapTo.call(this,projectedValue)};MemoryStream.prototype.take=function(amount){return _super.prototype.take.call(this,amount)};MemoryStream.prototype.endWhen=function(other){return _super.prototype.endWhen.call(this,other)};MemoryStream.prototype.replaceError=function(replace){return _super.prototype.replaceError.call(this,replace)};MemoryStream.prototype.remember=function(){return this};MemoryStream.prototype.debug=function(labelOrSpy){return _super.prototype.debug.call(this,labelOrSpy)};return MemoryStream}(Stream);exports.MemoryStream=MemoryStream;Object.defineProperty(exports,"__esModule",{value:true});exports.default=Stream},{"symbol-observable":160}],165:[function(require,module,exports){"use strict";var core_1=require("../core");var ConcatProducer=function(){function ConcatProducer(streams){this.streams=streams;this.type="concat";this.out=null;this.i=0}ConcatProducer.prototype._start=function(out){this.out=out;this.streams[this.i]._add(this)};ConcatProducer.prototype._stop=function(){var streams=this.streams;if(this.i<streams.length){streams[this.i]._remove(this)}this.i=0;this.out=null};ConcatProducer.prototype._n=function(t){var u=this.out;if(!u)return;u._n(t)};ConcatProducer.prototype._e=function(err){var u=this.out;if(!u)return;u._e(err)};ConcatProducer.prototype._c=function(){var u=this.out;if(!u)return;var streams=this.streams;streams[this.i]._remove(this);if(++this.i<streams.length){streams[this.i]._add(this)}else{u._c()}};return ConcatProducer}();function concat(){var streams=[];for(var _i=0;_i<arguments.length;_i++){streams[_i-0]=arguments[_i]}return new core_1.Stream(new ConcatProducer(streams))}Object.defineProperty(exports,"__esModule",{value:true});exports.default=concat},{"../core":164}],166:[function(require,module,exports){"use strict";var core_1=require("../core");var DelayOperator=function(){function DelayOperator(dt,ins){this.dt=dt;this.ins=ins;this.type="delay";this.out=null}DelayOperator.prototype._start=function(out){this.out=out;this.ins._add(this)};DelayOperator.prototype._stop=function(){this.ins._remove(this);this.out=null};DelayOperator.prototype._n=function(t){var u=this.out;if(!u)return;var id=setInterval(function(){u._n(t);clearInterval(id)},this.dt)};DelayOperator.prototype._e=function(err){var u=this.out;if(!u)return;var id=setInterval(function(){u._e(err);clearInterval(id)},this.dt)};DelayOperator.prototype._c=function(){var u=this.out;if(!u)return;var id=setInterval(function(){u._c();clearInterval(id)},this.dt)};return DelayOperator}();function delay(period){return function delayOperator(ins){return new core_1.Stream(new DelayOperator(period,ins))}}Object.defineProperty(exports,"__esModule",{value:true});exports.default=delay},{"../core":164}],167:[function(require,module,exports){"use strict";var core_1=require("../core");var empty={};var DropRepeatsOperator=function(){function DropRepeatsOperator(ins,fn){this.ins=ins;this.fn=fn;this.type="dropRepeats";this.out=null;this.v=empty}DropRepeatsOperator.prototype._start=function(out){this.out=out;this.ins._add(this)};DropRepeatsOperator.prototype._stop=function(){this.ins._remove(this);this.out=null;this.v=empty};DropRepeatsOperator.prototype.isEq=function(x,y){return this.fn?this.fn(x,y):x===y};DropRepeatsOperator.prototype._n=function(t){var u=this.out;if(!u)return;var v=this.v;if(v!==empty&&this.isEq(t,v))return;this.v=Array.isArray(t)?t.slice():t;u._n(t)};DropRepeatsOperator.prototype._e=function(err){var u=this.out;if(!u)return;u._e(err)};DropRepeatsOperator.prototype._c=function(){var u=this.out;if(!u)return;u._c()};return DropRepeatsOperator}();exports.DropRepeatsOperator=DropRepeatsOperator;function dropRepeats(isEqual){if(isEqual===void 0){isEqual=void 0}return function dropRepeatsOperator(ins){return new core_1.Stream(new DropRepeatsOperator(ins,isEqual))}}Object.defineProperty(exports,"__esModule",{value:true});exports.default=dropRepeats},{"../core":164}],168:[function(require,module,exports){"use strict";var core_1=require("../core");var concat_1=require("./concat");function interpolate(y,from,to){return from*(1-y)+to*y}function flip(fn){return function(x){return 1-fn(1-x)}}function createEasing(fn){var fnFlipped=flip(fn);return{easeIn:function(x,from,to){return interpolate(fn(x),from,to)},easeOut:function(x,from,to){return interpolate(fnFlipped(x),from,to)},easeInOut:function(x,from,to){var y=x<.5?fn(2*x)*.5:.5+fnFlipped(2*(x-.5))*.5;return interpolate(y,from,to)}}}var easingPower2=createEasing(function(x){return x*x});var easingPower3=createEasing(function(x){return x*x*x});var easingPower4=createEasing(function(x){var xx=x*x;return xx*xx});var EXP_WEIGHT=6;var EXP_MAX=Math.exp(EXP_WEIGHT)-1;function expFn(x){return(Math.exp(x*EXP_WEIGHT)-1)/EXP_MAX}var easingExponential=createEasing(expFn);var OVERSHOOT=1.70158;var easingBack=createEasing(function(x){return x*x*((OVERSHOOT+1)*x-OVERSHOOT)});var PARAM1=7.5625;var PARAM2=2.75;function easeOutFn(x){var z=x;if(z<1/PARAM2){return PARAM1*z*z}else if(z<2/PARAM2){return PARAM1*(z-=1.5/PARAM2)*z+.75}else if(z<2.5/PARAM2){return PARAM1*(z-=2.25/PARAM2)*z+.9375}else{return PARAM1*(z-=2.625/PARAM2)*z+.984375}}var easingBounce=createEasing(function(x){return 1-easeOutFn(1-x)});var easingCirc=createEasing(function(x){return-(Math.sqrt(1-x*x)-1)});var PERIOD=.3;var OVERSHOOT_ELASTIC=PERIOD/4;var AMPLITUDE=1;function elasticIn(x){var z=x;if(z<=0){return 0}else if(z>=1){return 1}else{z-=1;return-(AMPLITUDE*Math.pow(2,10*z))*Math.sin((z-OVERSHOOT_ELASTIC)*(2*Math.PI)/PERIOD)}}var easingElastic=createEasing(elasticIn);var HALF_PI=Math.PI*.5;var easingSine=createEasing(function(x){return 1-Math.cos(x*HALF_PI)});var DEFAULT_INTERVAL=15;function tween(_a){var from=_a.from,to=_a.to,duration=_a.duration,_b=_a.ease,ease=_b===void 0?tweenFactory.linear.ease:_b,_c=_a.interval,interval=_c===void 0?DEFAULT_INTERVAL:_c;var totalTicks=Math.round(duration/interval);return core_1.Stream.periodic(interval).take(totalTicks).map(function(tick){return ease(tick/totalTicks,from,to)}).compose(function(s){return concat_1.default(s,core_1.Stream.of(to))})}var tweenFactory=tween;tweenFactory.linear={ease:interpolate};tweenFactory.power2=easingPower2;tweenFactory.power3=easingPower3;tweenFactory.power4=easingPower4;tweenFactory.exponential=easingExponential;tweenFactory.back=easingBack;tweenFactory.bounce=easingBounce;tweenFactory.circular=easingCirc;tweenFactory.elastic=easingElastic;tweenFactory.sine=easingSine;Object.defineProperty(exports,"__esModule",{value:true});exports.default=tweenFactory},{"../core":164,"./concat":165}],169:[function(require,module,exports){"use strict";var core_1=require("./core");exports.Stream=core_1.Stream;exports.MemoryStream=core_1.MemoryStream;Object.defineProperty(exports,"__esModule",{value:true});exports.default=core_1.Stream},{"./core":164}]},{},[34]);